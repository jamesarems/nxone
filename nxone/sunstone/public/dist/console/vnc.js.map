{
  "version": 3,
  "sources": [
    "../../bower_components/almond/almond.js",
    "../../bower_components/no-vnc/include/util.js",
    "../../bower_components/no-vnc/include/webutil.js",
    "../../bower_components/no-vnc/include/base64.js",
    "../../bower_components/no-vnc/include/websock.js",
    "../../bower_components/no-vnc/include/des.js",
    "../../bower_components/no-vnc/include/keysymdef.js",
    "../../bower_components/no-vnc/include/keyboard.js",
    "../../bower_components/no-vnc/include/input.js",
    "../../bower_components/no-vnc/include/display.js",
    "../../bower_components/no-vnc/include/jsunzip.js",
    "../../bower_components/no-vnc/include/rfb.js",
    "../../bower_components/no-vnc/include/keysym.js",
    "vnc.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACliBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC71DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "console/vnc.js",
  "sourcesContent": [
    "/**\n * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                //Lop off the last part of baseParts, so that . matches the\n                //\"directory\" and not name of the baseName's module. For instance,\n                //baseName of \"one/two/three\", maps to \"one/two/three.js\", but we\n                //want the directory, \"one/two\" for this normalization.\n                name = baseParts.slice(0, baseParts.length - 1).concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n",
    "/*\n * noVNC: HTML5 VNC client\n * Copyright (C) 2012 Joel Martin\n * Licensed under MPL 2.0 (see LICENSE.txt)\n *\n * See README.md for usage and integration instructions.\n */\n\n/* jshint white: false, nonstandard: true */\n/*global window, console, document, navigator, ActiveXObject, INCLUDE_URI */\n\n// Globals defined here\nvar Util = {};\n\n\n/*\n * Make arrays quack\n */\n\nvar addFunc = function (cl, name, func) {\n    if (!cl.prototype[name]) {\n        Object.defineProperty(cl.prototype, name, { enumerable: false, value: func });\n    }\n};\n\naddFunc(Array, 'push8', function (num) {\n    \"use strict\";\n    this.push(num & 0xFF);\n});\n\naddFunc(Array, 'push16', function (num) {\n    \"use strict\";\n    this.push((num >> 8) & 0xFF,\n              num & 0xFF);\n});\n\naddFunc(Array, 'push32', function (num) {\n    \"use strict\";\n    this.push((num >> 24) & 0xFF,\n              (num >> 16) & 0xFF,\n              (num >>  8) & 0xFF,\n              num & 0xFF);\n});\n\n// IE does not support map (even in IE9)\n//This prototype is provided by the Mozilla foundation and\n//is distributed under the MIT license.\n//http://www.ibiblio.org/pub/Linux/LICENSES/mit.license\naddFunc(Array, 'map', function (fun /*, thisp*/) {\n    \"use strict\";\n    var len = this.length;\n    if (typeof fun != \"function\") {\n        throw new TypeError();\n    }\n\n    var res = new Array(len);\n    var thisp = arguments[1];\n    for (var i = 0; i < len; i++) {\n        if (i in this) {\n            res[i] = fun.call(thisp, this[i], i, this);\n        }\n    }\n\n    return res;\n});\n\n// IE <9 does not support indexOf\n//This prototype is provided by the Mozilla foundation and\n//is distributed under the MIT license.\n//http://www.ibiblio.org/pub/Linux/LICENSES/mit.license\naddFunc(Array, 'indexOf', function (elt /*, from*/) {\n    \"use strict\";\n    var len = this.length >>> 0;\n\n    var from = Number(arguments[1]) || 0;\n    from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n    if (from < 0) {\n        from += len;\n    }\n\n    for (; from < len; from++) {\n        if (from in this &&\n                this[from] === elt) {\n            return from;\n        }\n    }\n    return -1;\n});\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n    Object.keys = (function () {\n        'use strict';\n        var hasOwnProperty = Object.prototype.hasOwnProperty,\n            hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n            dontEnums = [\n                'toString',\n                'toLocaleString',\n                'valueOf',\n                'hasOwnProperty',\n                'isPrototypeOf',\n                'propertyIsEnumerable',\n                'constructor'\n            ],\n            dontEnumsLength = dontEnums.length;\n\n        return function (obj) {\n            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                throw new TypeError('Object.keys called on non-object');\n            }\n\n            var result = [], prop, i;\n\n            for (prop in obj) {\n                if (hasOwnProperty.call(obj, prop)) {\n                    result.push(prop);\n                }\n            }\n\n            if (hasDontEnumBug) {\n                for (i = 0; i < dontEnumsLength; i++) {\n                    if (hasOwnProperty.call(obj, dontEnums[i])) {\n                        result.push(dontEnums[i]);\n                    }\n                }\n            }\n            return result;\n        };\n    })();\n}\n\n// PhantomJS 1.x doesn't support bind,\n// so leave this in until PhantomJS 2.0 is released\n//This prototype is provided by the Mozilla foundation and\n//is distributed under the MIT license.\n//http://www.ibiblio.org/pub/Linux/LICENSES/mit.license\naddFunc(Function, 'bind', function (oThis) {\n    if (typeof this !== \"function\") {\n        // closest thing possible to the ECMAScript 5\n        // internal IsCallable function\n        throw new TypeError(\"Function.prototype.bind - \" +\n                            \"what is trying to be bound is not callable\");\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(this instanceof fNOP && oThis ? this\n                                                                   : oThis,\n                                     aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n});\n\n//\n// requestAnimationFrame shim with setTimeout fallback\n//\n\nwindow.requestAnimFrame = (function () {\n    \"use strict\";\n    return  window.requestAnimationFrame       ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame    ||\n            window.oRequestAnimationFrame      ||\n            window.msRequestAnimationFrame     ||\n            function (callback) {\n                window.setTimeout(callback, 1000 / 60);\n            };\n})();\n\n/*\n * ------------------------------------------------------\n * Namespaced in Util\n * ------------------------------------------------------\n */\n\n/*\n * Logging/debug routines\n */\n\nUtil._log_level = 'warn';\nUtil.init_logging = function (level) {\n    \"use strict\";\n    if (typeof level === 'undefined') {\n        level = Util._log_level;\n    } else {\n        Util._log_level = level;\n    }\n    if (typeof window.console === \"undefined\") {\n        if (typeof window.opera !== \"undefined\") {\n            window.console = {\n                'log'  : window.opera.postError,\n                'warn' : window.opera.postError,\n                'error': window.opera.postError\n            };\n        } else {\n            window.console = {\n                'log'  : function (m) {},\n                'warn' : function (m) {},\n                'error': function (m) {}\n            };\n        }\n    }\n\n    Util.Debug = Util.Info = Util.Warn = Util.Error = function (msg) {};\n    /* jshint -W086 */\n    switch (level) {\n        case 'debug':\n            Util.Debug = function (msg) { console.log(msg); };\n        case 'info':\n            Util.Info  = function (msg) { console.log(msg); };\n        case 'warn':\n            Util.Warn  = function (msg) { console.warn(msg); };\n        case 'error':\n            Util.Error = function (msg) { console.error(msg); };\n        case 'none':\n            break;\n        default:\n            throw new Error(\"invalid logging type '\" + level + \"'\");\n    }\n    /* jshint +W086 */\n};\nUtil.get_logging = function () {\n    return Util._log_level;\n};\n// Initialize logging level\nUtil.init_logging();\n\nUtil.make_property = function (proto, name, mode, type) {\n    \"use strict\";\n\n    var getter;\n    if (type === 'arr') {\n        getter = function (idx) {\n            if (typeof idx !== 'undefined') {\n                return this['_' + name][idx];\n            } else {\n                return this['_' + name];\n            }\n        };\n    } else {\n        getter = function () {\n            return this['_' + name];\n        };\n    }\n\n    var make_setter = function (process_val) {\n        if (process_val) {\n            return function (val, idx) {\n                if (typeof idx !== 'undefined') {\n                    this['_' + name][idx] = process_val(val);\n                } else {\n                    this['_' + name] = process_val(val);\n                }\n            };\n        } else {\n            return function (val, idx) {\n                if (typeof idx !== 'undefined') {\n                    this['_' + name][idx] = val;\n                } else {\n                    this['_' + name] = val;\n                }\n            };\n        }\n    };\n\n    var setter;\n    if (type === 'bool') {\n        setter = make_setter(function (val) {\n            if (!val || (val in {'0': 1, 'no': 1, 'false': 1})) {\n                return false;\n            } else {\n                return true;\n            }\n        });\n    } else if (type === 'int') {\n        setter = make_setter(function (val) { return parseInt(val, 10); });\n    } else if (type === 'float') {\n        setter = make_setter(parseFloat);\n    } else if (type === 'str') {\n        setter = make_setter(String);\n    } else if (type === 'func') {\n        setter = make_setter(function (val) {\n            if (!val) {\n                return function () {};\n            } else {\n                return val;\n            }\n        });\n    } else if (type === 'arr' || type === 'dom' || type == 'raw') {\n        setter = make_setter();\n    } else {\n        throw new Error('Unknown property type ' + type);  // some sanity checking\n    }\n\n    // set the getter\n    if (typeof proto['get_' + name] === 'undefined') {\n        proto['get_' + name] = getter;\n    }\n\n    // set the setter if needed\n    if (typeof proto['set_' + name] === 'undefined') {\n        if (mode === 'rw') {\n            proto['set_' + name] = setter;\n        } else if (mode === 'wo') {\n            proto['set_' + name] = function (val, idx) {\n                if (typeof this['_' + name] !== 'undefined') {\n                    throw new Error(name + \" can only be set once\");\n                }\n                setter.call(this, val, idx);\n            };\n        }\n    }\n\n    // make a special setter that we can use in set defaults\n    proto['_raw_set_' + name] = function (val, idx) {\n        setter.call(this, val, idx);\n        //delete this['_init_set_' + name];  // remove it after use\n    };\n};\n\nUtil.make_properties = function (constructor, arr) {\n    \"use strict\";\n    for (var i = 0; i < arr.length; i++) {\n        Util.make_property(constructor.prototype, arr[i][0], arr[i][1], arr[i][2]);\n    }\n};\n\nUtil.set_defaults = function (obj, conf, defaults) {\n    var defaults_keys = Object.keys(defaults);\n    var conf_keys = Object.keys(conf);\n    var keys_obj = {};\n    var i;\n    for (i = 0; i < defaults_keys.length; i++) { keys_obj[defaults_keys[i]] = 1; }\n    for (i = 0; i < conf_keys.length; i++) { keys_obj[conf_keys[i]] = 1; }\n    var keys = Object.keys(keys_obj);\n\n    for (i = 0; i < keys.length; i++) {\n        var setter = obj['_raw_set_' + keys[i]];\n        if (!setter) {\n          Util.Warn('Invalid property ' + keys[i]);\n          continue;\n        }\n\n        if (keys[i] in conf) {\n            setter.call(obj, conf[keys[i]]);\n        } else {\n            setter.call(obj, defaults[keys[i]]);\n        }\n    }\n};\n\n/*\n * Decode from UTF-8\n */\nUtil.decodeUTF8 = function (utf8string) {\n    \"use strict\";\n    return decodeURIComponent(escape(utf8string));\n};\n\n\n\n/*\n * Cross-browser routines\n */\n\n\n// Dynamically load scripts without using document.write()\n// Reference: http://unixpapa.com/js/dyna.html\n//\n// Handles the case where load_scripts is invoked from a script that\n// itself is loaded via load_scripts. Once all scripts are loaded the\n// window.onscriptsloaded handler is called (if set).\nUtil.get_include_uri = function () {\n    return (typeof INCLUDE_URI !== \"undefined\") ? INCLUDE_URI : \"include/\";\n};\nUtil._loading_scripts = [];\nUtil._pending_scripts = [];\nUtil.load_scripts = function (files) {\n    \"use strict\";\n    var head = document.getElementsByTagName('head')[0], script,\n        ls = Util._loading_scripts, ps = Util._pending_scripts;\n\n    var loadFunc = function (e) {\n        while (ls.length > 0 && (ls[0].readyState === 'loaded' ||\n                                 ls[0].readyState === 'complete')) {\n            // For IE, append the script to trigger execution\n            var s = ls.shift();\n            //console.log(\"loaded script: \" + s.src);\n            head.appendChild(s);\n        }\n        if (!this.readyState ||\n            (Util.Engine.presto && this.readyState === 'loaded') ||\n            this.readyState === 'complete') {\n            if (ps.indexOf(this) >= 0) {\n                this.onload = this.onreadystatechange = null;\n                //console.log(\"completed script: \" + this.src);\n                ps.splice(ps.indexOf(this), 1);\n\n                // Call window.onscriptsload after last script loads\n                if (ps.length === 0 && window.onscriptsload) {\n                    window.onscriptsload();\n                }\n            }\n        }\n    };\n\n    for (var f = 0; f < files.length; f++) {\n        script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = Util.get_include_uri() + files[f];\n        //console.log(\"loading script: \" + script.src);\n        script.onload = script.onreadystatechange = loadFunc;\n        // In-order script execution tricks\n        if (Util.Engine.trident) {\n            // For IE wait until readyState is 'loaded' before\n            // appending it which will trigger execution\n            // http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n            ls.push(script);\n        } else {\n            // For webkit and firefox set async=false and append now\n            // https://developer.mozilla.org/en-US/docs/HTML/Element/script\n            script.async = false;\n            head.appendChild(script);\n        }\n        ps.push(script);\n    }\n};\n\n\n// Get DOM element position on page\n//  This solution is based based on http://www.greywyvern.com/?post=331\n//  Thanks to Brian Huisman AKA GreyWyvern!\nUtil.getPosition = (function () {\n    \"use strict\";\n    function getStyle(obj, styleProp) {\n        var y;\n        if (obj.currentStyle) {\n            y = obj.currentStyle[styleProp];\n        } else if (window.getComputedStyle)\n            y = window.getComputedStyle(obj, null)[styleProp];\n        return y;\n    }\n\n    function scrollDist() {\n        var myScrollTop = 0, myScrollLeft = 0;\n        var html = document.getElementsByTagName('html')[0];\n\n        // get the scrollTop part\n        if (html.scrollTop && document.documentElement.scrollTop) {\n            myScrollTop = html.scrollTop;\n        } else if (html.scrollTop || document.documentElement.scrollTop) {\n            myScrollTop = html.scrollTop + document.documentElement.scrollTop;\n        } else if (document.body.scrollTop) {\n            myScrollTop = document.body.scrollTop;\n        } else {\n            myScrollTop = 0;\n        }\n\n        // get the scrollLeft part\n        if (html.scrollLeft && document.documentElement.scrollLeft) {\n            myScrollLeft = html.scrollLeft;\n        } else if (html.scrollLeft || document.documentElement.scrollLeft) {\n            myScrollLeft = html.scrollLeft + document.documentElement.scrollLeft;\n        } else if (document.body.scrollLeft) {\n            myScrollLeft = document.body.scrollLeft;\n        } else {\n            myScrollLeft = 0;\n        }\n\n        return [myScrollLeft, myScrollTop];\n    }\n\n    return function (obj) {\n        var curleft = 0, curtop = 0, scr = obj, fixed = false;\n        while ((scr = scr.parentNode) && scr != document.body) {\n            curleft -= scr.scrollLeft || 0;\n            curtop -= scr.scrollTop || 0;\n            if (getStyle(scr, \"position\") == \"fixed\") {\n                fixed = true;\n            }\n        }\n        if (fixed && !window.opera) {\n            var scrDist = scrollDist();\n            curleft += scrDist[0];\n            curtop += scrDist[1];\n        }\n\n        do {\n            curleft += obj.offsetLeft;\n            curtop += obj.offsetTop;\n        } while ((obj = obj.offsetParent));\n\n        return {'x': curleft, 'y': curtop};\n    };\n})();\n\n\n// Get mouse event position in DOM element\nUtil.getEventPosition = function (e, obj, scale) {\n    \"use strict\";\n    var evt, docX, docY, pos;\n    //if (!e) evt = window.event;\n    evt = (e ? e : window.event);\n    evt = (evt.changedTouches ? evt.changedTouches[0] : evt.touches ? evt.touches[0] : evt);\n    if (evt.pageX || evt.pageY) {\n        docX = evt.pageX;\n        docY = evt.pageY;\n    } else if (evt.clientX || evt.clientY) {\n        docX = evt.clientX + document.body.scrollLeft +\n            document.documentElement.scrollLeft;\n        docY = evt.clientY + document.body.scrollTop +\n            document.documentElement.scrollTop;\n    }\n    pos = Util.getPosition(obj);\n    if (typeof scale === \"undefined\") {\n        scale = 1;\n    }\n    var realx = docX - pos.x;\n    var realy = docY - pos.y;\n    var x = Math.max(Math.min(realx, obj.width - 1), 0);\n    var y = Math.max(Math.min(realy, obj.height - 1), 0);\n    return {'x': x / scale, 'y': y / scale, 'realx': realx / scale, 'realy': realy / scale};\n};\n\n\n// Event registration. Based on: http://www.scottandrew.com/weblog/articles/cbs-events\nUtil.addEvent = function (obj, evType, fn) {\n    \"use strict\";\n    if (obj.attachEvent) {\n        var r = obj.attachEvent(\"on\" + evType, fn);\n        return r;\n    } else if (obj.addEventListener) {\n        obj.addEventListener(evType, fn, false);\n        return true;\n    } else {\n        throw new Error(\"Handler could not be attached\");\n    }\n};\n\nUtil.removeEvent = function (obj, evType, fn) {\n    \"use strict\";\n    if (obj.detachEvent) {\n        var r = obj.detachEvent(\"on\" + evType, fn);\n        return r;\n    } else if (obj.removeEventListener) {\n        obj.removeEventListener(evType, fn, false);\n        return true;\n    } else {\n        throw new Error(\"Handler could not be removed\");\n    }\n};\n\nUtil.stopEvent = function (e) {\n    \"use strict\";\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else                   { e.cancelBubble = true; }\n\n    if (e.preventDefault)  { e.preventDefault(); }\n    else                   { e.returnValue = false; }\n};\n\n\n// Set browser engine versions. Based on mootools.\nUtil.Features = {xpath: !!(document.evaluate), air: !!(window.runtime), query: !!(document.querySelector)};\n\n(function () {\n    \"use strict\";\n    // 'presto': (function () { return (!window.opera) ? false : true; }()),\n    var detectPresto = function () {\n        return !!window.opera;\n    };\n\n    // 'trident': (function () { return (!window.ActiveXObject) ? false : ((window.XMLHttpRequest) ? ((document.querySelectorAll) ? 6 : 5) : 4);\n    var detectTrident = function () {\n        if (!window.ActiveXObject) {\n            return false;\n        } else {\n            if (window.XMLHttpRequest) {\n                return (document.querySelectorAll) ? 6 : 5;\n            } else {\n                return 4;\n            }\n        }\n    };\n\n    // 'webkit': (function () { try { return (navigator.taintEnabled) ? false : ((Util.Features.xpath) ? ((Util.Features.query) ? 525 : 420) : 419); } catch (e) { return false; } }()),\n    var detectInitialWebkit = function () {\n        try {\n            if (navigator.taintEnabled) {\n                return false;\n            } else {\n                if (Util.Features.xpath) {\n                    return (Util.Features.query) ? 525 : 420;\n                } else {\n                    return 419;\n                }\n            }\n        } catch (e) {\n            return false;\n        }\n    };\n\n    var detectActualWebkit = function (initial_ver) {\n        var re = /WebKit\\/([0-9\\.]*) /;\n        var str_ver = (navigator.userAgent.match(re) || ['', initial_ver])[1];\n        return parseFloat(str_ver, 10);\n    };\n\n    // 'gecko': (function () { return (!document.getBoxObjectFor && window.mozInnerScreenX == null) ? false : ((document.getElementsByClassName) ? 19ssName) ? 19 : 18 : 18); }())\n    var detectGecko = function () {\n        /* jshint -W041 */\n        if (!document.getBoxObjectFor && window.mozInnerScreenX == null) {\n            return false;\n        } else {\n            return (document.getElementsByClassName) ? 19 : 18;\n        }\n        /* jshint +W041 */\n    };\n\n    Util.Engine = {\n        // Version detection break in Opera 11.60 (errors on arguments.callee.caller reference)\n        //'presto': (function() {\n        //         return (!window.opera) ? false : ((arguments.callee.caller) ? 960 : ((document.getElementsByClassName) ? 950 : 925)); }()),\n        'presto': detectPresto(),\n        'trident': detectTrident(),\n        'webkit': detectInitialWebkit(),\n        'gecko': detectGecko(),\n    };\n\n    if (Util.Engine.webkit) {\n        // Extract actual webkit version if available\n        Util.Engine.webkit = detectActualWebkit(Util.Engine.webkit);\n    }\n})();\n\nUtil.Flash = (function () {\n    \"use strict\";\n    var v, version;\n    try {\n        v = navigator.plugins['Shockwave Flash'].description;\n    } catch (err1) {\n        try {\n            v = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (err2) {\n            v = '0 r0';\n        }\n    }\n    version = v.match(/\\d+/g);\n    return {version: parseInt(version[0] || 0 + '.' + version[1], 10) || 0, build: parseInt(version[2], 10) || 0};\n}());\n\ndefine(\"vnc-util\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Util;\n    };\n}(this)));\n\n",
    "/*\n * noVNC: HTML5 VNC client\n * Copyright (C) 2012 Joel Martin\n * Copyright (C) 2013 NTT corp.\n * Licensed under MPL 2.0 (see LICENSE.txt)\n *\n * See README.md for usage and integration instructions.\n */\n\n/*jslint bitwise: false, white: false, browser: true, devel: true */\n/*global Util, window, document */\n\n// Globals defined here\nvar WebUtil = {}, $D;\n\n/*\n * Simple DOM selector by ID\n */\nif (!window.$D) {\n    window.$D = function (id) {\n        if (document.getElementById) {\n            return document.getElementById(id);\n        } else if (document.all) {\n            return document.all[id];\n        } else if (document.layers) {\n            return document.layers[id];\n        }\n        return undefined;\n    };\n}\n\n\n/*\n * ------------------------------------------------------\n * Namespaced in WebUtil\n * ------------------------------------------------------\n */\n\n// init log level reading the logging HTTP param\nWebUtil.init_logging = function (level) {\n    \"use strict\";\n    if (typeof level !== \"undefined\") {\n        Util._log_level = level;\n    } else {\n        var param = document.location.href.match(/logging=([A-Za-z0-9\\._\\-]*)/);\n        Util._log_level = (param || ['', Util._log_level])[1];\n    }\n    Util.init_logging();\n};\n\n\nWebUtil.dirObj = function (obj, depth, parent) {\n    \"use strict\";\n    if (! depth) { depth = 2; }\n    if (! parent) { parent = \"\"; }\n\n    // Print the properties of the passed-in object\n    var msg = \"\";\n    for (var i in obj) {\n        if ((depth > 1) && (typeof obj[i] === \"object\")) {\n            // Recurse attributes that are objects\n            msg += WebUtil.dirObj(obj[i], depth - 1, parent + \".\" + i);\n        } else {\n            //val = new String(obj[i]).replace(\"\\n\", \" \");\n            var val = \"\";\n            if (typeof(obj[i]) === \"undefined\") {\n                val = \"undefined\";\n            } else {\n                val = obj[i].toString().replace(\"\\n\", \" \");\n            }\n            if (val.length > 30) {\n                val = val.substr(0, 30) + \"...\";\n            }\n            msg += parent + \".\" + i + \": \" + val + \"\\n\";\n        }\n    }\n    return msg;\n};\n\n// Read a query string variable\nWebUtil.getQueryVar = function (name, defVal) {\n    \"use strict\";\n    var re = new RegExp('.*[?&]' + name + '=([^&#]*)'),\n        match = document.location.href.match(re);\n    if (typeof defVal === 'undefined') { defVal = null; }\n    if (match) {\n        return decodeURIComponent(match[1]);\n    } else {\n        return defVal;\n    }\n};\n\n\n/*\n * Cookie handling. Dervied from: http://www.quirksmode.org/js/cookies.html\n */\n\n// No days means only for this browser session\nWebUtil.createCookie = function (name, value, days) {\n    \"use strict\";\n    var date, expires;\n    if (days) {\n        date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \"; expires=\" + date.toGMTString();\n    } else {\n        expires = \"\";\n    }\n\n    var secure;\n    if (document.location.protocol === \"https:\") {\n        secure = \"; secure\";\n    } else {\n        secure = \"\";\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\" + secure;\n};\n\nWebUtil.readCookie = function (name, defaultValue) {\n    \"use strict\";\n    var nameEQ = name + \"=\",\n        ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i += 1) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') { c = c.substring(1, c.length); }\n        if (c.indexOf(nameEQ) === 0) { return c.substring(nameEQ.length, c.length); }\n    }\n    return (typeof defaultValue !== 'undefined') ? defaultValue : null;\n};\n\nWebUtil.eraseCookie = function (name) {\n    \"use strict\";\n    WebUtil.createCookie(name, \"\", -1);\n};\n\n/*\n * Setting handling.\n */\n\nWebUtil.initSettings = function (callback /*, ...callbackArgs */) {\n    \"use strict\";\n    var callbackArgs = Array.prototype.slice.call(arguments, 1);\n    if (window.chrome && window.chrome.storage) {\n        window.chrome.storage.sync.get(function (cfg) {\n            WebUtil.settings = cfg;\n            console.log(WebUtil.settings);\n            if (callback) {\n                callback.apply(this, callbackArgs);\n            }\n        });\n    } else {\n        // No-op\n        if (callback) {\n            callback.apply(this, callbackArgs);\n        }\n    }\n};\n\n// No days means only for this browser session\nWebUtil.writeSetting = function (name, value) {\n    \"use strict\";\n    if (window.chrome && window.chrome.storage) {\n        //console.log(\"writeSetting:\", name, value);\n        if (WebUtil.settings[name] !== value) {\n            WebUtil.settings[name] = value;\n            window.chrome.storage.sync.set(WebUtil.settings);\n        }\n    } else {\n        localStorage.setItem(name, value);\n    }\n};\n\nWebUtil.readSetting = function (name, defaultValue) {\n    \"use strict\";\n    var value;\n    if (window.chrome && window.chrome.storage) {\n        value = WebUtil.settings[name];\n    } else {\n        value = localStorage.getItem(name);\n    }\n    if (typeof value === \"undefined\") {\n        value = null;\n    }\n    if (value === null && typeof defaultValue !== undefined) {\n        return defaultValue;\n    } else {\n        return value;\n    }\n};\n\nWebUtil.eraseSetting = function (name) {\n    \"use strict\";\n    if (window.chrome && window.chrome.storage) {\n        window.chrome.storage.sync.remove(name);\n        delete WebUtil.settings[name];\n    } else {\n        localStorage.removeItem(name);\n    }\n};\n\n/*\n * Alternate stylesheet selection\n */\nWebUtil.getStylesheets = function () {\n    \"use strict\";\n    var links = document.getElementsByTagName(\"link\");\n    var sheets = [];\n\n    for (var i = 0; i < links.length; i += 1) {\n        if (links[i].title &&\n            links[i].rel.toUpperCase().indexOf(\"STYLESHEET\") > -1) {\n            sheets.push(links[i]);\n        }\n    }\n    return sheets;\n};\n\n// No sheet means try and use value from cookie, null sheet used to\n// clear all alternates.\nWebUtil.selectStylesheet = function (sheet) {\n    \"use strict\";\n    if (typeof sheet === 'undefined') {\n        sheet = 'default';\n    }\n\n    var sheets = WebUtil.getStylesheets();\n    for (var i = 0; i < sheets.length; i += 1) {\n        var link = sheets[i];\n        if (link.title === sheet) {\n            Util.Debug(\"Using stylesheet \" + sheet);\n            link.disabled = false;\n        } else {\n            //Util.Debug(\"Skipping stylesheet \" + link.title);\n            link.disabled = true;\n        }\n    }\n    return sheet;\n};\n\ndefine(\"vnc-webutil\", [\"vnc-util\"], function(){});\n\n",
    "/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n// From: http://hg.mozilla.org/mozilla-central/raw-file/ec10630b1a54/js/src/devtools/jint/sunspider/string-base64.js\n\n/*jslint white: false */\n/*global console */\n\nvar Base64 = {\n    /* Convert data (an array of integers) to a Base64 string. */\n    toBase64Table : 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.split(''),\n    base64Pad     : '=',\n\n    encode: function (data) {\n        \"use strict\";\n        var result = '';\n        var toBase64Table = Base64.toBase64Table;\n        var length = data.length;\n        var lengthpad = (length % 3);\n        // Convert every three bytes to 4 ascii characters.\n\n        for (var i = 0; i < (length - 2); i += 3) {\n            result += toBase64Table[data[i] >> 2];\n            result += toBase64Table[((data[i] & 0x03) << 4) + (data[i + 1] >> 4)];\n            result += toBase64Table[((data[i + 1] & 0x0f) << 2) + (data[i + 2] >> 6)];\n            result += toBase64Table[data[i + 2] & 0x3f];\n        }\n\n        // Convert the remaining 1 or 2 bytes, pad out to 4 characters.\n        var j = 0;\n        if (lengthpad === 2) {\n            j = length - lengthpad;\n            result += toBase64Table[data[j] >> 2];\n            result += toBase64Table[((data[j] & 0x03) << 4) + (data[j + 1] >> 4)];\n            result += toBase64Table[(data[j + 1] & 0x0f) << 2];\n            result += toBase64Table[64];\n        } else if (lengthpad === 1) {\n            j = length - lengthpad;\n            result += toBase64Table[data[j] >> 2];\n            result += toBase64Table[(data[j] & 0x03) << 4];\n            result += toBase64Table[64];\n            result += toBase64Table[64];\n        }\n\n        return result;\n    },\n\n    /* Convert Base64 data to a string */\n    /* jshint -W013 */\n    toBinaryTable : [\n        -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,\n        -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,\n        -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,62, -1,-1,-1,63,\n        52,53,54,55, 56,57,58,59, 60,61,-1,-1, -1, 0,-1,-1,\n        -1, 0, 1, 2,  3, 4, 5, 6,  7, 8, 9,10, 11,12,13,14,\n        15,16,17,18, 19,20,21,22, 23,24,25,-1, -1,-1,-1,-1,\n        -1,26,27,28, 29,30,31,32, 33,34,35,36, 37,38,39,40,\n        41,42,43,44, 45,46,47,48, 49,50,51,-1, -1,-1,-1,-1\n    ],\n    /* jshint +W013 */\n\n    decode: function (data, offset) {\n        \"use strict\";\n        offset = typeof(offset) !== 'undefined' ? offset : 0;\n        var toBinaryTable = Base64.toBinaryTable;\n        var base64Pad = Base64.base64Pad;\n        var result, result_length;\n        var leftbits = 0; // number of bits decoded, but yet to be appended\n        var leftdata = 0; // bits decoded, but yet to be appended\n        var data_length = data.indexOf('=') - offset;\n\n        if (data_length < 0) { data_length = data.length - offset; }\n\n        /* Every four characters is 3 resulting numbers */\n        result_length = (data_length >> 2) * 3 + Math.floor((data_length % 4) / 1.5);\n        result = new Array(result_length);\n\n        // Convert one by one.\n        for (var idx = 0, i = offset; i < data.length; i++) {\n            var c = toBinaryTable[data.charCodeAt(i) & 0x7f];\n            var padding = (data.charAt(i) === base64Pad);\n            // Skip illegal characters and whitespace\n            if (c === -1) {\n                console.error(\"Illegal character code \" + data.charCodeAt(i) + \" at position \" + i);\n                continue;\n            }\n          \n            // Collect data into leftdata, update bitcount\n            leftdata = (leftdata << 6) | c;\n            leftbits += 6;\n\n            // If we have 8 or more bits, append 8 bits to the result\n            if (leftbits >= 8) {\n                leftbits -= 8;\n                // Append if not padding.\n                if (!padding) {\n                    result[idx++] = (leftdata >> leftbits) & 0xff;\n                }\n                leftdata &= (1 << leftbits) - 1;\n            }\n        }\n\n        // If there are any bits left, the base64 string was corrupted\n        if (leftbits) {\n            err = new Error('Corrupted base64 string');\n            err.name = 'Base64-Error';\n            throw err;\n        }\n\n        return result;\n    }\n}; /* End of Base64 namespace */\n;\ndefine(\"vnc-base64\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * Websock: high-performance binary WebSockets\n * Copyright (C) 2012 Joel Martin\n * Licensed under MPL 2.0 (see LICENSE.txt)\n *\n * Websock is similar to the standard WebSocket object but Websock\n * enables communication with raw TCP sockets (i.e. the binary stream)\n * via websockify. This is accomplished by base64 encoding the data\n * stream between Websock and websockify.\n *\n * Websock has built-in receive queue buffering; the message event\n * does not contain actual data but is simply a notification that\n * there is new data available. Several rQ* methods are available to\n * read binary data off of the receive queue.\n */\n\n/*jslint browser: true, bitwise: true */\n/*global Util, Base64 */\n\n\n// Load Flash WebSocket emulator if needed\n\n// To force WebSocket emulator even when native WebSocket available\n//window.WEB_SOCKET_FORCE_FLASH = true;\n// To enable WebSocket emulator debug:\n//window.WEB_SOCKET_DEBUG=1;\n\nif (window.WebSocket && !window.WEB_SOCKET_FORCE_FLASH) {\n    Websock_native = true;\n} else if (window.MozWebSocket && !window.WEB_SOCKET_FORCE_FLASH) {\n    Websock_native = true;\n    window.WebSocket = window.MozWebSocket;\n} else {\n    /* no builtin WebSocket so load web_socket.js */\n\n    Websock_native = false;\n    (function () {\n        window.WEB_SOCKET_SWF_LOCATION = Util.get_include_uri() +\n                    \"web-socket-js/WebSocketMain.swf\";\n        if (Util.Engine.trident) {\n            Util.Debug(\"Forcing uncached load of WebSocketMain.swf\");\n            window.WEB_SOCKET_SWF_LOCATION += \"?\" + Math.random();\n        }\n        Util.load_scripts([\"web-socket-js/swfobject.js\",\n                           \"web-socket-js/web_socket.js\"]);\n    })();\n}\n\n\nfunction Websock() {\n    \"use strict\";\n\n    this._websocket = null;  // WebSocket object\n    this._rQ = [];           // Receive queue\n    this._rQi = 0;           // Receive queue index\n    this._rQmax = 10000;     // Max receive queue size before compacting\n    this._sQ = [];           // Send queue\n\n    this._mode = 'base64';    // Current WebSocket mode: 'binary', 'base64'\n    this.maxBufferedAmount = 200;\n\n    this._eventHandlers = {\n        'message': function () {},\n        'open': function () {},\n        'close': function () {},\n        'error': function () {}\n    };\n}\n\n(function () {\n    \"use strict\";\n    Websock.prototype = {\n        // Getters and Setters\n        get_sQ: function () {\n            return this._sQ;\n        },\n\n        get_rQ: function () {\n            return this._rQ;\n        },\n\n        get_rQi: function () {\n            return this._rQi;\n        },\n\n        set_rQi: function (val) {\n            this._rQi = val;\n        },\n\n        // Receive Queue\n        rQlen: function () {\n            return this._rQ.length - this._rQi;\n        },\n\n        rQpeek8: function () {\n            return this._rQ[this._rQi];\n        },\n\n        rQshift8: function () {\n            return this._rQ[this._rQi++];\n        },\n\n        rQskip8: function () {\n            this._rQi++;\n        },\n\n        rQskipBytes: function (num) {\n            this._rQi += num;\n        },\n\n        rQunshift8: function (num) {\n            if (this._rQi === 0) {\n                this._rQ.unshift(num);\n            } else {\n                this._rQi--;\n                this._rQ[this._rQi] = num;\n            }\n        },\n\n        rQshift16: function () {\n            return (this._rQ[this._rQi++] << 8) +\n                   this._rQ[this._rQi++];\n        },\n\n        rQshift32: function () {\n            return (this._rQ[this._rQi++] << 24) +\n                   (this._rQ[this._rQi++] << 16) +\n                   (this._rQ[this._rQi++] << 8) +\n                   this._rQ[this._rQi++];\n        },\n\n        rQshiftStr: function (len) {\n            if (typeof(len) === 'undefined') { len = this.rQlen(); }\n            var arr = this._rQ.slice(this._rQi, this._rQi + len);\n            this._rQi += len;\n            return String.fromCharCode.apply(null, arr);\n        },\n\n        rQshiftBytes: function (len) {\n            if (typeof(len) === 'undefined') { len = this.rQlen(); }\n            this._rQi += len;\n            return this._rQ.slice(this._rQi - len, this._rQi);\n        },\n\n        rQslice: function (start, end) {\n            if (end) {\n                return this._rQ.slice(this._rQi + start, this._rQi + end);\n            } else {\n                return this._rQ.slice(this._rQi + start);\n            }\n        },\n\n        // Check to see if we must wait for 'num' bytes (default to FBU.bytes)\n        // to be available in the receive queue. Return true if we need to\n        // wait (and possibly print a debug message), otherwise false.\n        rQwait: function (msg, num, goback) {\n            var rQlen = this._rQ.length - this._rQi; // Skip rQlen() function call\n            if (rQlen < num) {\n                if (goback) {\n                    if (this._rQi < goback) {\n                        throw new Error(\"rQwait cannot backup \" + goback + \" bytes\");\n                    }\n                    this._rQi -= goback;\n                }\n                return true; // true means need more data\n            }\n            return false;\n        },\n\n        // Send Queue\n\n        flush: function () {\n            if (this._websocket.bufferedAmount !== 0) {\n                Util.Debug(\"bufferedAmount: \" + this._websocket.bufferedAmount);\n            }\n\n            if (this._websocket.bufferedAmount < this.maxBufferedAmount) {\n                if (this._sQ.length > 0) {\n                    this._websocket.send(this._encode_message());\n                    this._sQ = [];\n                }\n\n                return true;\n            } else {\n                Util.Info(\"Delaying send, bufferedAmount: \" +\n                        this._websocket.bufferedAmount);\n                return false;\n            }\n        },\n\n        send: function (arr) {\n           this._sQ = this._sQ.concat(arr);\n           return this.flush();\n        },\n\n        send_string: function (str) {\n            this.send(str.split('').map(function (chr) {\n                return chr.charCodeAt(0);\n            }));\n        },\n\n        // Event Handlers\n        on: function (evt, handler) {\n            this._eventHandlers[evt] = handler;\n        },\n\n        init: function (protocols, ws_schema) {\n            this._rQ = [];\n            this._rQi = 0;\n            this._sQ = [];\n            this._websocket = null;\n\n            // Check for full typed array support\n            var bt = false;\n            if (('Uint8Array' in window) &&\n                    ('set' in Uint8Array.prototype)) {\n                bt = true;\n            }\n\n            // Check for full binary type support in WebSockets\n            // Inspired by:\n            // https://github.com/Modernizr/Modernizr/issues/370\n            // https://github.com/Modernizr/Modernizr/blob/master/feature-detects/websockets/binary.js\n            var wsbt = false;\n            try {\n                if (bt && ('binaryType' in WebSocket.prototype ||\n                           !!(new WebSocket(ws_schema + '://.').binaryType))) {\n                    Util.Info(\"Detected binaryType support in WebSockets\");\n                    wsbt = true;\n                }\n            } catch (exc) {\n                // Just ignore failed test localhost connection\n            }\n\n            // Default protocols if not specified\n            if (typeof(protocols) === \"undefined\") {\n                if (wsbt) {\n                    protocols = ['binary', 'base64'];\n                } else {\n                    protocols = 'base64';\n                }\n            }\n\n            if (!wsbt) {\n                if (protocols === 'binary') {\n                    throw new Error('WebSocket binary sub-protocol requested but not supported');\n                }\n\n                if (typeof(protocols) === 'object') {\n                    var new_protocols = [];\n\n                    for (var i = 0; i < protocols.length; i++) {\n                        if (protocols[i] === 'binary') {\n                            Util.Error('Skipping unsupported WebSocket binary sub-protocol');\n                        } else {\n                            new_protocols.push(protocols[i]);\n                        }\n                    }\n\n                    if (new_protocols.length > 0) {\n                        protocols = new_protocols;\n                    } else {\n                        throw new Error(\"Only WebSocket binary sub-protocol was requested and is not supported.\");\n                    }\n                }\n            }\n\n            return protocols;\n        },\n\n        open: function (uri, protocols) {\n            var ws_schema = uri.match(/^([a-z]+):\\/\\//)[1];\n            protocols = this.init(protocols, ws_schema);\n\n            this._websocket = new WebSocket(uri, protocols);\n\n            if (protocols.indexOf('binary') >= 0) {\n                this._websocket.binaryType = 'arraybuffer';\n            }\n\n            this._websocket.onmessage = this._recv_message.bind(this);\n            this._websocket.onopen = (function () {\n                Util.Debug('>> WebSock.onopen');\n                if (this._websocket.protocol) {\n                    this._mode = this._websocket.protocol;\n                    Util.Info(\"Server choose sub-protocol: \" + this._websocket.protocol);\n                } else {\n                    this._mode = 'base64';\n                    Util.Error('Server select no sub-protocol!: ' + this._websocket.protocol);\n                }\n                this._eventHandlers.open();\n                Util.Debug(\"<< WebSock.onopen\");\n            }).bind(this);\n            this._websocket.onclose = (function (e) {\n                Util.Debug(\">> WebSock.onclose\");\n                this._eventHandlers.close(e);\n                Util.Debug(\"<< WebSock.onclose\");\n            }).bind(this);\n            this._websocket.onerror = (function (e) {\n                Util.Debug(\">> WebSock.onerror: \" + e);\n                this._eventHandlers.error(e);\n                Util.Debug(\"<< WebSock.onerror: \" + e);\n            }).bind(this);\n        },\n\n        close: function () {\n            if (this._websocket) {\n                if ((this._websocket.readyState === WebSocket.OPEN) ||\n                        (this._websocket.readyState === WebSocket.CONNECTING)) {\n                    Util.Info(\"Closing WebSocket connection\");\n                    this._websocket.close();\n                }\n\n                this._websocket.onmessage = function (e) { return; };\n            }\n        },\n\n        // private methods\n        _encode_message: function () {\n            if (this._mode === 'binary') {\n                // Put in a binary arraybuffer\n                return (new Uint8Array(this._sQ)).buffer;\n            } else {\n                // base64 encode\n                return Base64.encode(this._sQ);\n            }\n        },\n\n        _decode_message: function (data) {\n            if (this._mode === 'binary') {\n                // push arraybuffer values onto the end\n                var u8 = new Uint8Array(data);\n                for (var i = 0; i < u8.length; i++) {\n                    this._rQ.push(u8[i]);\n                }\n            } else {\n                // base64 decode and concat to end\n                this._rQ = this._rQ.concat(Base64.decode(data, 0));\n            }\n        },\n\n        _recv_message: function (e) {\n            try {\n                this._decode_message(e.data);\n                if (this.rQlen() > 0) {\n                    this._eventHandlers.message();\n                    // Compact the receive queue\n                    if (this._rQ.length > this._rQmax) {\n                        this._rQ = this._rQ.slice(this._rQi);\n                        this._rQi = 0;\n                    }\n                } else {\n                    Util.Debug(\"Ignoring empty message\");\n                }\n            } catch (exc) {\n                var exception_str = \"\";\n                if (exc.name) {\n                    exception_str += \"\\n    name: \" + exc.name + \"\\n\";\n                    exception_str += \"    message: \" + exc.message + \"\\n\";\n                }\n\n                if (typeof exc.description !== 'undefined') {\n                    exception_str += \"    description: \" + exc.description + \"\\n\";\n                }\n\n                if (typeof exc.stack !== 'undefined') {\n                    exception_str += exc.stack;\n                }\n\n                if (exception_str.length > 0) {\n                    Util.Error(\"recv_message, caught exception: \" + exception_str);\n                } else {\n                    Util.Error(\"recv_message, caught exception: \" + exc);\n                }\n\n                if (typeof exc.name !== 'undefined') {\n                    this._eventHandlers.error(exc.name + \": \" + exc.message);\n                } else {\n                    this._eventHandlers.error(exc);\n                }\n            }\n        }\n    };\n})();\n\ndefine(\"vnc-websock\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * Ported from Flashlight VNC ActionScript implementation:\n *     http://www.wizhelp.com/flashlight-vnc/\n *\n * Full attribution follows:\n *\n * -------------------------------------------------------------------------\n *\n * This DES class has been extracted from package Acme.Crypto for use in VNC.\n * The unnecessary odd parity code has been removed.\n *\n * These changes are:\n *  Copyright (C) 1999 AT&T Laboratories Cambridge.  All Rights Reserved.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n *\n\n * DesCipher - the DES encryption method\n *\n * The meat of this code is by Dave Zimmerman <dzimm@widget.com>, and is:\n *\n * Copyright (c) 1996 Widget Workshop, Inc. All Rights Reserved.\n *\n * Permission to use, copy, modify, and distribute this software\n * and its documentation for NON-COMMERCIAL or COMMERCIAL purposes and\n * without fee is hereby granted, provided that this copyright notice is kept \n * intact. \n * \n * WIDGET WORKSHOP MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY\n * OF THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE, OR NON-INFRINGEMENT. WIDGET WORKSHOP SHALL NOT BE LIABLE\n * FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR\n * DISTRIBUTING THIS SOFTWARE OR ITS DERIVATIVES.\n * \n * THIS SOFTWARE IS NOT DESIGNED OR INTENDED FOR USE OR RESALE AS ON-LINE\n * CONTROL EQUIPMENT IN HAZARDOUS ENVIRONMENTS REQUIRING FAIL-SAFE\n * PERFORMANCE, SUCH AS IN THE OPERATION OF NUCLEAR FACILITIES, AIRCRAFT\n * NAVIGATION OR COMMUNICATION SYSTEMS, AIR TRAFFIC CONTROL, DIRECT LIFE\n * SUPPORT MACHINES, OR WEAPONS SYSTEMS, IN WHICH THE FAILURE OF THE\n * SOFTWARE COULD LEAD DIRECTLY TO DEATH, PERSONAL INJURY, OR SEVERE\n * PHYSICAL OR ENVIRONMENTAL DAMAGE (\"HIGH RISK ACTIVITIES\").  WIDGET WORKSHOP\n * SPECIFICALLY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTY OF FITNESS FOR\n * HIGH RISK ACTIVITIES.\n *\n *\n * The rest is:\n *\n * Copyright (C) 1996 by Jef Poskanzer <jef@acme.com>.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n * SUCH DAMAGE.\n *\n * Visit the ACME Labs Java page for up-to-date versions of this and other\n * fine Java utilities: http://www.acme.com/java/\n */\n\n/* jslint white: false */\n\nfunction DES(passwd) {\n    \"use strict\";\n\n    // Tables, permutations, S-boxes, etc.\n    // jshint -W013\n    var PC2 = [13,16,10,23, 0, 4, 2,27,14, 5,20, 9,22,18,11, 3,\n               25, 7,15, 6,26,19,12, 1,40,51,30,36,46,54,29,39,\n               50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31 ],\n        totrot = [ 1, 2, 4, 6, 8,10,12,14,15,17,19,21,23,25,27,28],\n        z = 0x0, a,b,c,d,e,f, SP1,SP2,SP3,SP4,SP5,SP6,SP7,SP8,\n        keys = [];\n\n    // jshint -W015\n    a=1<<16; b=1<<24; c=a|b; d=1<<2; e=1<<10; f=d|e;\n    SP1 = [c|e,z|z,a|z,c|f,c|d,a|f,z|d,a|z,z|e,c|e,c|f,z|e,b|f,c|d,b|z,z|d,\n           z|f,b|e,b|e,a|e,a|e,c|z,c|z,b|f,a|d,b|d,b|d,a|d,z|z,z|f,a|f,b|z,\n           a|z,c|f,z|d,c|z,c|e,b|z,b|z,z|e,c|d,a|z,a|e,b|d,z|e,z|d,b|f,a|f,\n           c|f,a|d,c|z,b|f,b|d,z|f,a|f,c|e,z|f,b|e,b|e,z|z,a|d,a|e,z|z,c|d];\n    a=1<<20; b=1<<31; c=a|b; d=1<<5; e=1<<15; f=d|e;\n    SP2 = [c|f,b|e,z|e,a|f,a|z,z|d,c|d,b|f,b|d,c|f,c|e,b|z,b|e,a|z,z|d,c|d,\n           a|e,a|d,b|f,z|z,b|z,z|e,a|f,c|z,a|d,b|d,z|z,a|e,z|f,c|e,c|z,z|f,\n           z|z,a|f,c|d,a|z,b|f,c|z,c|e,z|e,c|z,b|e,z|d,c|f,a|f,z|d,z|e,b|z,\n           z|f,c|e,a|z,b|d,a|d,b|f,b|d,a|d,a|e,z|z,b|e,z|f,b|z,c|d,c|f,a|e];\n    a=1<<17; b=1<<27; c=a|b; d=1<<3; e=1<<9; f=d|e;\n    SP3 = [z|f,c|e,z|z,c|d,b|e,z|z,a|f,b|e,a|d,b|d,b|d,a|z,c|f,a|d,c|z,z|f,\n           b|z,z|d,c|e,z|e,a|e,c|z,c|d,a|f,b|f,a|e,a|z,b|f,z|d,c|f,z|e,b|z,\n           c|e,b|z,a|d,z|f,a|z,c|e,b|e,z|z,z|e,a|d,c|f,b|e,b|d,z|e,z|z,c|d,\n           b|f,a|z,b|z,c|f,z|d,a|f,a|e,b|d,c|z,b|f,z|f,c|z,a|f,z|d,c|d,a|e];\n    a=1<<13; b=1<<23; c=a|b; d=1<<0; e=1<<7; f=d|e;\n    SP4 = [c|d,a|f,a|f,z|e,c|e,b|f,b|d,a|d,z|z,c|z,c|z,c|f,z|f,z|z,b|e,b|d,\n           z|d,a|z,b|z,c|d,z|e,b|z,a|d,a|e,b|f,z|d,a|e,b|e,a|z,c|e,c|f,z|f,\n           b|e,b|d,c|z,c|f,z|f,z|z,z|z,c|z,a|e,b|e,b|f,z|d,c|d,a|f,a|f,z|e,\n           c|f,z|f,z|d,a|z,b|d,a|d,c|e,b|f,a|d,a|e,b|z,c|d,z|e,b|z,a|z,c|e];\n    a=1<<25; b=1<<30; c=a|b; d=1<<8; e=1<<19; f=d|e;\n    SP5 = [z|d,a|f,a|e,c|d,z|e,z|d,b|z,a|e,b|f,z|e,a|d,b|f,c|d,c|e,z|f,b|z,\n           a|z,b|e,b|e,z|z,b|d,c|f,c|f,a|d,c|e,b|d,z|z,c|z,a|f,a|z,c|z,z|f,\n           z|e,c|d,z|d,a|z,b|z,a|e,c|d,b|f,a|d,b|z,c|e,a|f,b|f,z|d,a|z,c|e,\n           c|f,z|f,c|z,c|f,a|e,z|z,b|e,c|z,z|f,a|d,b|d,z|e,z|z,b|e,a|f,b|d];\n    a=1<<22; b=1<<29; c=a|b; d=1<<4; e=1<<14; f=d|e;\n    SP6 = [b|d,c|z,z|e,c|f,c|z,z|d,c|f,a|z,b|e,a|f,a|z,b|d,a|d,b|e,b|z,z|f,\n           z|z,a|d,b|f,z|e,a|e,b|f,z|d,c|d,c|d,z|z,a|f,c|e,z|f,a|e,c|e,b|z,\n           b|e,z|d,c|d,a|e,c|f,a|z,z|f,b|d,a|z,b|e,b|z,z|f,b|d,c|f,a|e,c|z,\n           a|f,c|e,z|z,c|d,z|d,z|e,c|z,a|f,z|e,a|d,b|f,z|z,c|e,b|z,a|d,b|f];\n    a=1<<21; b=1<<26; c=a|b; d=1<<1; e=1<<11; f=d|e;\n    SP7 = [a|z,c|d,b|f,z|z,z|e,b|f,a|f,c|e,c|f,a|z,z|z,b|d,z|d,b|z,c|d,z|f,\n           b|e,a|f,a|d,b|e,b|d,c|z,c|e,a|d,c|z,z|e,z|f,c|f,a|e,z|d,b|z,a|e,\n           b|z,a|e,a|z,b|f,b|f,c|d,c|d,z|d,a|d,b|z,b|e,a|z,c|e,z|f,a|f,c|e,\n           z|f,b|d,c|f,c|z,a|e,z|z,z|d,c|f,z|z,a|f,c|z,z|e,b|d,b|e,z|e,a|d];\n    a=1<<18; b=1<<28; c=a|b; d=1<<6; e=1<<12; f=d|e;\n    SP8 = [b|f,z|e,a|z,c|f,b|z,b|f,z|d,b|z,a|d,c|z,c|f,a|e,c|e,a|f,z|e,z|d,\n           c|z,b|d,b|e,z|f,a|e,a|d,c|d,c|e,z|f,z|z,z|z,c|d,b|d,b|e,a|f,a|z,\n           a|f,a|z,c|e,z|e,z|d,c|d,z|e,a|f,b|e,z|d,b|d,c|z,c|d,b|z,a|z,b|f,\n           z|z,c|f,a|d,b|d,c|z,b|e,b|f,z|z,c|f,a|e,a|e,z|f,z|f,a|d,b|z,c|e];\n    // jshint +W013,+W015\n\n    // Set the key.\n    function setKeys(keyBlock) {\n        var i, j, l, m, n, o, pc1m = [], pcr = [], kn = [],\n            raw0, raw1, rawi, KnLi;\n\n        for (j = 0, l = 56; j < 56; ++j, l -= 8) {\n            l += l < -5 ? 65 : l < -3 ? 31 : l < -1 ? 63 : l === 27 ? 35 : 0; // PC1\n            m = l & 0x7;\n            pc1m[j] = ((keyBlock[l >>> 3] & (1<<m)) !== 0) ? 1: 0;\n        }\n\n        for (i = 0; i < 16; ++i) {\n            m = i << 1;\n            n = m + 1;\n            kn[m] = kn[n] = 0;\n            for (o = 28; o < 59; o += 28) {\n                for (j = o - 28; j < o; ++j) {\n                    l = j + totrot[i];\n                    if (l < o) {\n                        pcr[j] = pc1m[l];\n                    } else {\n                        pcr[j] = pc1m[l - 28];\n                    }\n                }\n            }\n            for (j = 0; j < 24; ++j) {\n                if (pcr[PC2[j]] !== 0) {\n                    kn[m] |= 1 << (23 - j);\n                }\n                if (pcr[PC2[j + 24]] !== 0) {\n                    kn[n] |= 1 << (23 - j);\n                }\n            }\n        }\n\n        // cookey\n        for (i = 0, rawi = 0, KnLi = 0; i < 16; ++i) {\n            raw0 = kn[rawi++];\n            raw1 = kn[rawi++];\n            keys[KnLi] = (raw0 & 0x00fc0000) << 6;\n            keys[KnLi] |= (raw0 & 0x00000fc0) << 10;\n            keys[KnLi] |= (raw1 & 0x00fc0000) >>> 10;\n            keys[KnLi] |= (raw1 & 0x00000fc0) >>> 6;\n            ++KnLi;\n            keys[KnLi] = (raw0 & 0x0003f000) << 12;\n            keys[KnLi] |= (raw0 & 0x0000003f) << 16;\n            keys[KnLi] |= (raw1 & 0x0003f000) >>> 4;\n            keys[KnLi] |= (raw1 & 0x0000003f);\n            ++KnLi;\n        }\n    }\n\n    // Encrypt 8 bytes of text\n    function enc8(text) {\n        var i = 0, b = text.slice(), fval, keysi = 0,\n            l, r, x; // left, right, accumulator\n\n        // Squash 8 bytes to 2 ints\n        l = b[i++]<<24 | b[i++]<<16 | b[i++]<<8 | b[i++];\n        r = b[i++]<<24 | b[i++]<<16 | b[i++]<<8 | b[i++];\n\n        x = ((l >>> 4) ^ r) & 0x0f0f0f0f;\n        r ^= x;\n        l ^= (x << 4);\n        x = ((l >>> 16) ^ r) & 0x0000ffff;\n        r ^= x;\n        l ^= (x << 16);\n        x = ((r >>> 2) ^ l) & 0x33333333;\n        l ^= x;\n        r ^= (x << 2);\n        x = ((r >>> 8) ^ l) & 0x00ff00ff;\n        l ^= x;\n        r ^= (x << 8);\n        r = (r << 1) | ((r >>> 31) & 1);\n        x = (l ^ r) & 0xaaaaaaaa;\n        l ^= x;\n        r ^= x;\n        l = (l << 1) | ((l >>> 31) & 1);\n\n        for (i = 0; i < 8; ++i) {\n            x = (r << 28) | (r >>> 4);\n            x ^= keys[keysi++];\n            fval =  SP7[x & 0x3f];\n            fval |= SP5[(x >>> 8) & 0x3f];\n            fval |= SP3[(x >>> 16) & 0x3f];\n            fval |= SP1[(x >>> 24) & 0x3f];\n            x = r ^ keys[keysi++];\n            fval |= SP8[x & 0x3f];\n            fval |= SP6[(x >>> 8) & 0x3f];\n            fval |= SP4[(x >>> 16) & 0x3f];\n            fval |= SP2[(x >>> 24) & 0x3f];\n            l ^= fval;\n            x = (l << 28) | (l >>> 4);\n            x ^= keys[keysi++];\n            fval =  SP7[x & 0x3f];\n            fval |= SP5[(x >>> 8) & 0x3f];\n            fval |= SP3[(x >>> 16) & 0x3f];\n            fval |= SP1[(x >>> 24) & 0x3f];\n            x = l ^ keys[keysi++];\n            fval |= SP8[x & 0x0000003f];\n            fval |= SP6[(x >>> 8) & 0x3f];\n            fval |= SP4[(x >>> 16) & 0x3f];\n            fval |= SP2[(x >>> 24) & 0x3f];\n            r ^= fval;\n        }\n\n        r = (r << 31) | (r >>> 1);\n        x = (l ^ r) & 0xaaaaaaaa;\n        l ^= x;\n        r ^= x;\n        l = (l << 31) | (l >>> 1);\n        x = ((l >>> 8) ^ r) & 0x00ff00ff;\n        r ^= x;\n        l ^= (x << 8);\n        x = ((l >>> 2) ^ r) & 0x33333333;\n        r ^= x;\n        l ^= (x << 2);\n        x = ((r >>> 16) ^ l) & 0x0000ffff;\n        l ^= x;\n        r ^= (x << 16);\n        x = ((r >>> 4) ^ l) & 0x0f0f0f0f;\n        l ^= x;\n        r ^= (x << 4);\n\n        // Spread ints to bytes\n        x = [r, l];\n        for (i = 0; i < 8; i++) {\n            b[i] = (x[i>>>2] >>> (8 * (3 - (i % 4)))) % 256;\n            if (b[i] < 0) { b[i] += 256; } // unsigned\n        }\n        return b;\n    }\n\n    // Encrypt 16 bytes of text using passwd as key\n    function encrypt(t) {\n        return enc8(t.slice(0, 8)).concat(enc8(t.slice(8, 16)));\n    }\n\n    setKeys(passwd);             // Setup keys\n    return {'encrypt': encrypt}; // Public interface\n\n} // function DES\n;\ndefine(\"vnc-des\", [\"vnc-util\"], function(){});\n\n",
    "// This file describes mappings from Unicode codepoints to the keysym values\n// (and optionally, key names) expected by the RFB protocol\n// How this file was generated:\n// node /Users/jalf/dev/mi/novnc/utils/parse.js /opt/X11/include/X11/keysymdef.h\nvar keysyms = (function(){\n    \"use strict\";\n    var keynames = null;\n    var codepoints = {\"32\":32,\"33\":33,\"34\":34,\"35\":35,\"36\":36,\"37\":37,\"38\":38,\"39\":39,\"40\":40,\"41\":41,\"42\":42,\"43\":43,\"44\":44,\"45\":45,\"46\":46,\"47\":47,\"48\":48,\"49\":49,\"50\":50,\"51\":51,\"52\":52,\"53\":53,\"54\":54,\"55\":55,\"56\":56,\"57\":57,\"58\":58,\"59\":59,\"60\":60,\"61\":61,\"62\":62,\"63\":63,\"64\":64,\"65\":65,\"66\":66,\"67\":67,\"68\":68,\"69\":69,\"70\":70,\"71\":71,\"72\":72,\"73\":73,\"74\":74,\"75\":75,\"76\":76,\"77\":77,\"78\":78,\"79\":79,\"80\":80,\"81\":81,\"82\":82,\"83\":83,\"84\":84,\"85\":85,\"86\":86,\"87\":87,\"88\":88,\"89\":89,\"90\":90,\"91\":91,\"92\":92,\"93\":93,\"94\":94,\"95\":95,\"96\":96,\"97\":97,\"98\":98,\"99\":99,\"100\":100,\"101\":101,\"102\":102,\"103\":103,\"104\":104,\"105\":105,\"106\":106,\"107\":107,\"108\":108,\"109\":109,\"110\":110,\"111\":111,\"112\":112,\"113\":113,\"114\":114,\"115\":115,\"116\":116,\"117\":117,\"118\":118,\"119\":119,\"120\":120,\"121\":121,\"122\":122,\"123\":123,\"124\":124,\"125\":125,\"126\":126,\"160\":160,\"161\":161,\"162\":162,\"163\":163,\"164\":164,\"165\":165,\"166\":166,\"167\":167,\"168\":168,\"169\":169,\"170\":170,\"171\":171,\"172\":172,\"173\":173,\"174\":174,\"175\":175,\"176\":176,\"177\":177,\"178\":178,\"179\":179,\"180\":180,\"181\":181,\"182\":182,\"183\":183,\"184\":184,\"185\":185,\"186\":186,\"187\":187,\"188\":188,\"189\":189,\"190\":190,\"191\":191,\"192\":192,\"193\":193,\"194\":194,\"195\":195,\"196\":196,\"197\":197,\"198\":198,\"199\":199,\"200\":200,\"201\":201,\"202\":202,\"203\":203,\"204\":204,\"205\":205,\"206\":206,\"207\":207,\"208\":208,\"209\":209,\"210\":210,\"211\":211,\"212\":212,\"213\":213,\"214\":214,\"215\":215,\"216\":216,\"217\":217,\"218\":218,\"219\":219,\"220\":220,\"221\":221,\"222\":222,\"223\":223,\"224\":224,\"225\":225,\"226\":226,\"227\":227,\"228\":228,\"229\":229,\"230\":230,\"231\":231,\"232\":232,\"233\":233,\"234\":234,\"235\":235,\"236\":236,\"237\":237,\"238\":238,\"239\":239,\"240\":240,\"241\":241,\"242\":242,\"243\":243,\"244\":244,\"245\":245,\"246\":246,\"247\":247,\"248\":248,\"249\":249,\"250\":250,\"251\":251,\"252\":252,\"253\":253,\"254\":254,\"255\":255,\"256\":960,\"257\":992,\"258\":451,\"259\":483,\"260\":417,\"261\":433,\"262\":454,\"263\":486,\"264\":710,\"265\":742,\"266\":709,\"267\":741,\"268\":456,\"269\":488,\"270\":463,\"271\":495,\"272\":464,\"273\":496,\"274\":938,\"275\":954,\"278\":972,\"279\":1004,\"280\":458,\"281\":490,\"282\":460,\"283\":492,\"284\":728,\"285\":760,\"286\":683,\"287\":699,\"288\":725,\"289\":757,\"290\":939,\"291\":955,\"292\":678,\"293\":694,\"294\":673,\"295\":689,\"296\":933,\"297\":949,\"298\":975,\"299\":1007,\"300\":16777516,\"301\":16777517,\"302\":967,\"303\":999,\"304\":681,\"305\":697,\"308\":684,\"309\":700,\"310\":979,\"311\":1011,\"312\":930,\"313\":453,\"314\":485,\"315\":934,\"316\":950,\"317\":421,\"318\":437,\"321\":419,\"322\":435,\"323\":465,\"324\":497,\"325\":977,\"326\":1009,\"327\":466,\"328\":498,\"330\":957,\"331\":959,\"332\":978,\"333\":1010,\"336\":469,\"337\":501,\"338\":5052,\"339\":5053,\"340\":448,\"341\":480,\"342\":931,\"343\":947,\"344\":472,\"345\":504,\"346\":422,\"347\":438,\"348\":734,\"349\":766,\"350\":426,\"351\":442,\"352\":425,\"353\":441,\"354\":478,\"355\":510,\"356\":427,\"357\":443,\"358\":940,\"359\":956,\"360\":989,\"361\":1021,\"362\":990,\"363\":1022,\"364\":733,\"365\":765,\"366\":473,\"367\":505,\"368\":475,\"369\":507,\"370\":985,\"371\":1017,\"372\":16777588,\"373\":16777589,\"374\":16777590,\"375\":16777591,\"376\":5054,\"377\":428,\"378\":444,\"379\":431,\"380\":447,\"381\":430,\"382\":446,\"399\":16777615,\"402\":2294,\"415\":16777631,\"416\":16777632,\"417\":16777633,\"431\":16777647,\"432\":16777648,\"437\":16777653,\"438\":16777654,\"439\":16777655,\"466\":16777681,\"486\":16777702,\"487\":16777703,\"601\":16777817,\"629\":16777845,\"658\":16777874,\"711\":439,\"728\":418,\"729\":511,\"731\":434,\"733\":445,\"901\":1966,\"902\":1953,\"904\":1954,\"905\":1955,\"906\":1956,\"908\":1959,\"910\":1960,\"911\":1963,\"912\":1974,\"913\":1985,\"914\":1986,\"915\":1987,\"916\":1988,\"917\":1989,\"918\":1990,\"919\":1991,\"920\":1992,\"921\":1993,\"922\":1994,\"923\":1995,\"924\":1996,\"925\":1997,\"926\":1998,\"927\":1999,\"928\":2000,\"929\":2001,\"931\":2002,\"932\":2004,\"933\":2005,\"934\":2006,\"935\":2007,\"936\":2008,\"937\":2009,\"938\":1957,\"939\":1961,\"940\":1969,\"941\":1970,\"942\":1971,\"943\":1972,\"944\":1978,\"945\":2017,\"946\":2018,\"947\":2019,\"948\":2020,\"949\":2021,\"950\":2022,\"951\":2023,\"952\":2024,\"953\":2025,\"954\":2026,\"955\":2027,\"956\":2028,\"957\":2029,\"958\":2030,\"959\":2031,\"960\":2032,\"961\":2033,\"962\":2035,\"963\":2034,\"964\":2036,\"965\":2037,\"966\":2038,\"967\":2039,\"968\":2040,\"969\":2041,\"970\":1973,\"971\":1977,\"972\":1975,\"973\":1976,\"974\":1979,\"1025\":1715,\"1026\":1713,\"1027\":1714,\"1028\":1716,\"1029\":1717,\"1030\":1718,\"1031\":1719,\"1032\":1720,\"1033\":1721,\"1034\":1722,\"1035\":1723,\"1036\":1724,\"1038\":1726,\"1039\":1727,\"1040\":1761,\"1041\":1762,\"1042\":1783,\"1043\":1767,\"1044\":1764,\"1045\":1765,\"1046\":1782,\"1047\":1786,\"1048\":1769,\"1049\":1770,\"1050\":1771,\"1051\":1772,\"1052\":1773,\"1053\":1774,\"1054\":1775,\"1055\":1776,\"1056\":1778,\"1057\":1779,\"1058\":1780,\"1059\":1781,\"1060\":1766,\"1061\":1768,\"1062\":1763,\"1063\":1790,\"1064\":1787,\"1065\":1789,\"1066\":1791,\"1067\":1785,\"1068\":1784,\"1069\":1788,\"1070\":1760,\"1071\":1777,\"1072\":1729,\"1073\":1730,\"1074\":1751,\"1075\":1735,\"1076\":1732,\"1077\":1733,\"1078\":1750,\"1079\":1754,\"1080\":1737,\"1081\":1738,\"1082\":1739,\"1083\":1740,\"1084\":1741,\"1085\":1742,\"1086\":1743,\"1087\":1744,\"1088\":1746,\"1089\":1747,\"1090\":1748,\"1091\":1749,\"1092\":1734,\"1093\":1736,\"1094\":1731,\"1095\":1758,\"1096\":1755,\"1097\":1757,\"1098\":1759,\"1099\":1753,\"1100\":1752,\"1101\":1756,\"1102\":1728,\"1103\":1745,\"1105\":1699,\"1106\":1697,\"1107\":1698,\"1108\":1700,\"1109\":1701,\"1110\":1702,\"1111\":1703,\"1112\":1704,\"1113\":1705,\"1114\":1706,\"1115\":1707,\"1116\":1708,\"1118\":1710,\"1119\":1711,\"1168\":1725,\"1169\":1709,\"1170\":16778386,\"1171\":16778387,\"1174\":16778390,\"1175\":16778391,\"1178\":16778394,\"1179\":16778395,\"1180\":16778396,\"1181\":16778397,\"1186\":16778402,\"1187\":16778403,\"1198\":16778414,\"1199\":16778415,\"1200\":16778416,\"1201\":16778417,\"1202\":16778418,\"1203\":16778419,\"1206\":16778422,\"1207\":16778423,\"1208\":16778424,\"1209\":16778425,\"1210\":16778426,\"1211\":16778427,\"1240\":16778456,\"1241\":16778457,\"1250\":16778466,\"1251\":16778467,\"1256\":16778472,\"1257\":16778473,\"1262\":16778478,\"1263\":16778479,\"1329\":16778545,\"1330\":16778546,\"1331\":16778547,\"1332\":16778548,\"1333\":16778549,\"1334\":16778550,\"1335\":16778551,\"1336\":16778552,\"1337\":16778553,\"1338\":16778554,\"1339\":16778555,\"1340\":16778556,\"1341\":16778557,\"1342\":16778558,\"1343\":16778559,\"1344\":16778560,\"1345\":16778561,\"1346\":16778562,\"1347\":16778563,\"1348\":16778564,\"1349\":16778565,\"1350\":16778566,\"1351\":16778567,\"1352\":16778568,\"1353\":16778569,\"1354\":16778570,\"1355\":16778571,\"1356\":16778572,\"1357\":16778573,\"1358\":16778574,\"1359\":16778575,\"1360\":16778576,\"1361\":16778577,\"1362\":16778578,\"1363\":16778579,\"1364\":16778580,\"1365\":16778581,\"1366\":16778582,\"1370\":16778586,\"1371\":16778587,\"1372\":16778588,\"1373\":16778589,\"1374\":16778590,\"1377\":16778593,\"1378\":16778594,\"1379\":16778595,\"1380\":16778596,\"1381\":16778597,\"1382\":16778598,\"1383\":16778599,\"1384\":16778600,\"1385\":16778601,\"1386\":16778602,\"1387\":16778603,\"1388\":16778604,\"1389\":16778605,\"1390\":16778606,\"1391\":16778607,\"1392\":16778608,\"1393\":16778609,\"1394\":16778610,\"1395\":16778611,\"1396\":16778612,\"1397\":16778613,\"1398\":16778614,\"1399\":16778615,\"1400\":16778616,\"1401\":16778617,\"1402\":16778618,\"1403\":16778619,\"1404\":16778620,\"1405\":16778621,\"1406\":16778622,\"1407\":16778623,\"1408\":16778624,\"1409\":16778625,\"1410\":16778626,\"1411\":16778627,\"1412\":16778628,\"1413\":16778629,\"1414\":16778630,\"1415\":16778631,\"1417\":16778633,\"1418\":16778634,\"1488\":3296,\"1489\":3297,\"1490\":3298,\"1491\":3299,\"1492\":3300,\"1493\":3301,\"1494\":3302,\"1495\":3303,\"1496\":3304,\"1497\":3305,\"1498\":3306,\"1499\":3307,\"1500\":3308,\"1501\":3309,\"1502\":3310,\"1503\":3311,\"1504\":3312,\"1505\":3313,\"1506\":3314,\"1507\":3315,\"1508\":3316,\"1509\":3317,\"1510\":3318,\"1511\":3319,\"1512\":3320,\"1513\":3321,\"1514\":3322,\"1548\":1452,\"1563\":1467,\"1567\":1471,\"1569\":1473,\"1570\":1474,\"1571\":1475,\"1572\":1476,\"1573\":1477,\"1574\":1478,\"1575\":1479,\"1576\":1480,\"1577\":1481,\"1578\":1482,\"1579\":1483,\"1580\":1484,\"1581\":1485,\"1582\":1486,\"1583\":1487,\"1584\":1488,\"1585\":1489,\"1586\":1490,\"1587\":1491,\"1588\":1492,\"1589\":1493,\"1590\":1494,\"1591\":1495,\"1592\":1496,\"1593\":1497,\"1594\":1498,\"1600\":1504,\"1601\":1505,\"1602\":1506,\"1603\":1507,\"1604\":1508,\"1605\":1509,\"1606\":1510,\"1607\":1511,\"1608\":1512,\"1609\":1513,\"1610\":1514,\"1611\":1515,\"1612\":1516,\"1613\":1517,\"1614\":1518,\"1615\":1519,\"1616\":1520,\"1617\":1521,\"1618\":1522,\"1619\":16778835,\"1620\":16778836,\"1621\":16778837,\"1632\":16778848,\"1633\":16778849,\"1634\":16778850,\"1635\":16778851,\"1636\":16778852,\"1637\":16778853,\"1638\":16778854,\"1639\":16778855,\"1640\":16778856,\"1641\":16778857,\"1642\":16778858,\"1648\":16778864,\"1657\":16778873,\"1662\":16778878,\"1670\":16778886,\"1672\":16778888,\"1681\":16778897,\"1688\":16778904,\"1700\":16778916,\"1705\":16778921,\"1711\":16778927,\"1722\":16778938,\"1726\":16778942,\"1729\":16778945,\"1740\":16778956,\"1746\":16778962,\"1748\":16778964,\"1776\":16778992,\"1777\":16778993,\"1778\":16778994,\"1779\":16778995,\"1780\":16778996,\"1781\":16778997,\"1782\":16778998,\"1783\":16778999,\"1784\":16779000,\"1785\":16779001,\"3458\":16780674,\"3459\":16780675,\"3461\":16780677,\"3462\":16780678,\"3463\":16780679,\"3464\":16780680,\"3465\":16780681,\"3466\":16780682,\"3467\":16780683,\"3468\":16780684,\"3469\":16780685,\"3470\":16780686,\"3471\":16780687,\"3472\":16780688,\"3473\":16780689,\"3474\":16780690,\"3475\":16780691,\"3476\":16780692,\"3477\":16780693,\"3478\":16780694,\"3482\":16780698,\"3483\":16780699,\"3484\":16780700,\"3485\":16780701,\"3486\":16780702,\"3487\":16780703,\"3488\":16780704,\"3489\":16780705,\"3490\":16780706,\"3491\":16780707,\"3492\":16780708,\"3493\":16780709,\"3494\":16780710,\"3495\":16780711,\"3496\":16780712,\"3497\":16780713,\"3498\":16780714,\"3499\":16780715,\"3500\":16780716,\"3501\":16780717,\"3502\":16780718,\"3503\":16780719,\"3504\":16780720,\"3505\":16780721,\"3507\":16780723,\"3508\":16780724,\"3509\":16780725,\"3510\":16780726,\"3511\":16780727,\"3512\":16780728,\"3513\":16780729,\"3514\":16780730,\"3515\":16780731,\"3517\":16780733,\"3520\":16780736,\"3521\":16780737,\"3522\":16780738,\"3523\":16780739,\"3524\":16780740,\"3525\":16780741,\"3526\":16780742,\"3530\":16780746,\"3535\":16780751,\"3536\":16780752,\"3537\":16780753,\"3538\":16780754,\"3539\":16780755,\"3540\":16780756,\"3542\":16780758,\"3544\":16780760,\"3545\":16780761,\"3546\":16780762,\"3547\":16780763,\"3548\":16780764,\"3549\":16780765,\"3550\":16780766,\"3551\":16780767,\"3570\":16780786,\"3571\":16780787,\"3572\":16780788,\"3585\":3489,\"3586\":3490,\"3587\":3491,\"3588\":3492,\"3589\":3493,\"3590\":3494,\"3591\":3495,\"3592\":3496,\"3593\":3497,\"3594\":3498,\"3595\":3499,\"3596\":3500,\"3597\":3501,\"3598\":3502,\"3599\":3503,\"3600\":3504,\"3601\":3505,\"3602\":3506,\"3603\":3507,\"3604\":3508,\"3605\":3509,\"3606\":3510,\"3607\":3511,\"3608\":3512,\"3609\":3513,\"3610\":3514,\"3611\":3515,\"3612\":3516,\"3613\":3517,\"3614\":3518,\"3615\":3519,\"3616\":3520,\"3617\":3521,\"3618\":3522,\"3619\":3523,\"3620\":3524,\"3621\":3525,\"3622\":3526,\"3623\":3527,\"3624\":3528,\"3625\":3529,\"3626\":3530,\"3627\":3531,\"3628\":3532,\"3629\":3533,\"3630\":3534,\"3631\":3535,\"3632\":3536,\"3633\":3537,\"3634\":3538,\"3635\":3539,\"3636\":3540,\"3637\":3541,\"3638\":3542,\"3639\":3543,\"3640\":3544,\"3641\":3545,\"3642\":3546,\"3647\":3551,\"3648\":3552,\"3649\":3553,\"3650\":3554,\"3651\":3555,\"3652\":3556,\"3653\":3557,\"3654\":3558,\"3655\":3559,\"3656\":3560,\"3657\":3561,\"3658\":3562,\"3659\":3563,\"3660\":3564,\"3661\":3565,\"3664\":3568,\"3665\":3569,\"3666\":3570,\"3667\":3571,\"3668\":3572,\"3669\":3573,\"3670\":3574,\"3671\":3575,\"3672\":3576,\"3673\":3577,\"4304\":16781520,\"4305\":16781521,\"4306\":16781522,\"4307\":16781523,\"4308\":16781524,\"4309\":16781525,\"4310\":16781526,\"4311\":16781527,\"4312\":16781528,\"4313\":16781529,\"4314\":16781530,\"4315\":16781531,\"4316\":16781532,\"4317\":16781533,\"4318\":16781534,\"4319\":16781535,\"4320\":16781536,\"4321\":16781537,\"4322\":16781538,\"4323\":16781539,\"4324\":16781540,\"4325\":16781541,\"4326\":16781542,\"4327\":16781543,\"4328\":16781544,\"4329\":16781545,\"4330\":16781546,\"4331\":16781547,\"4332\":16781548,\"4333\":16781549,\"4334\":16781550,\"4335\":16781551,\"4336\":16781552,\"4337\":16781553,\"4338\":16781554,\"4339\":16781555,\"4340\":16781556,\"4341\":16781557,\"4342\":16781558,\"7682\":16784898,\"7683\":16784899,\"7690\":16784906,\"7691\":16784907,\"7710\":16784926,\"7711\":16784927,\"7734\":16784950,\"7735\":16784951,\"7744\":16784960,\"7745\":16784961,\"7766\":16784982,\"7767\":16784983,\"7776\":16784992,\"7777\":16784993,\"7786\":16785002,\"7787\":16785003,\"7808\":16785024,\"7809\":16785025,\"7810\":16785026,\"7811\":16785027,\"7812\":16785028,\"7813\":16785029,\"7818\":16785034,\"7819\":16785035,\"7840\":16785056,\"7841\":16785057,\"7842\":16785058,\"7843\":16785059,\"7844\":16785060,\"7845\":16785061,\"7846\":16785062,\"7847\":16785063,\"7848\":16785064,\"7849\":16785065,\"7850\":16785066,\"7851\":16785067,\"7852\":16785068,\"7853\":16785069,\"7854\":16785070,\"7855\":16785071,\"7856\":16785072,\"7857\":16785073,\"7858\":16785074,\"7859\":16785075,\"7860\":16785076,\"7861\":16785077,\"7862\":16785078,\"7863\":16785079,\"7864\":16785080,\"7865\":16785081,\"7866\":16785082,\"7867\":16785083,\"7868\":16785084,\"7869\":16785085,\"7870\":16785086,\"7871\":16785087,\"7872\":16785088,\"7873\":16785089,\"7874\":16785090,\"7875\":16785091,\"7876\":16785092,\"7877\":16785093,\"7878\":16785094,\"7879\":16785095,\"7880\":16785096,\"7881\":16785097,\"7882\":16785098,\"7883\":16785099,\"7884\":16785100,\"7885\":16785101,\"7886\":16785102,\"7887\":16785103,\"7888\":16785104,\"7889\":16785105,\"7890\":16785106,\"7891\":16785107,\"7892\":16785108,\"7893\":16785109,\"7894\":16785110,\"7895\":16785111,\"7896\":16785112,\"7897\":16785113,\"7898\":16785114,\"7899\":16785115,\"7900\":16785116,\"7901\":16785117,\"7902\":16785118,\"7903\":16785119,\"7904\":16785120,\"7905\":16785121,\"7906\":16785122,\"7907\":16785123,\"7908\":16785124,\"7909\":16785125,\"7910\":16785126,\"7911\":16785127,\"7912\":16785128,\"7913\":16785129,\"7914\":16785130,\"7915\":16785131,\"7916\":16785132,\"7917\":16785133,\"7918\":16785134,\"7919\":16785135,\"7920\":16785136,\"7921\":16785137,\"7922\":16785138,\"7923\":16785139,\"7924\":16785140,\"7925\":16785141,\"7926\":16785142,\"7927\":16785143,\"7928\":16785144,\"7929\":16785145,\"8194\":2722,\"8195\":2721,\"8196\":2723,\"8197\":2724,\"8199\":2725,\"8200\":2726,\"8201\":2727,\"8202\":2728,\"8210\":2747,\"8211\":2730,\"8212\":2729,\"8213\":1967,\"8215\":3295,\"8216\":2768,\"8217\":2769,\"8218\":2813,\"8220\":2770,\"8221\":2771,\"8222\":2814,\"8224\":2801,\"8225\":2802,\"8226\":2790,\"8229\":2735,\"8230\":2734,\"8240\":2773,\"8242\":2774,\"8243\":2775,\"8248\":2812,\"8254\":1150,\"8304\":16785520,\"8308\":16785524,\"8309\":16785525,\"8310\":16785526,\"8311\":16785527,\"8312\":16785528,\"8313\":16785529,\"8320\":16785536,\"8321\":16785537,\"8322\":16785538,\"8323\":16785539,\"8324\":16785540,\"8325\":16785541,\"8326\":16785542,\"8327\":16785543,\"8328\":16785544,\"8329\":16785545,\"8352\":16785568,\"8353\":16785569,\"8354\":16785570,\"8355\":16785571,\"8356\":16785572,\"8357\":16785573,\"8358\":16785574,\"8359\":16785575,\"8360\":16785576,\"8361\":3839,\"8362\":16785578,\"8363\":16785579,\"8364\":8364,\"8453\":2744,\"8470\":1712,\"8471\":2811,\"8478\":2772,\"8482\":2761,\"8531\":2736,\"8532\":2737,\"8533\":2738,\"8534\":2739,\"8535\":2740,\"8536\":2741,\"8537\":2742,\"8538\":2743,\"8539\":2755,\"8540\":2756,\"8541\":2757,\"8542\":2758,\"8592\":2299,\"8593\":2300,\"8594\":2301,\"8595\":2302,\"8658\":2254,\"8660\":2253,\"8706\":2287,\"8709\":16785925,\"8711\":2245,\"8712\":16785928,\"8713\":16785929,\"8715\":16785931,\"8728\":3018,\"8730\":2262,\"8731\":16785947,\"8732\":16785948,\"8733\":2241,\"8734\":2242,\"8743\":2270,\"8744\":2271,\"8745\":2268,\"8746\":2269,\"8747\":2239,\"8748\":16785964,\"8749\":16785965,\"8756\":2240,\"8757\":16785973,\"8764\":2248,\"8771\":2249,\"8773\":16785992,\"8775\":16785991,\"8800\":2237,\"8801\":2255,\"8802\":16786018,\"8803\":16786019,\"8804\":2236,\"8805\":2238,\"8834\":2266,\"8835\":2267,\"8866\":3068,\"8867\":3036,\"8868\":3010,\"8869\":3022,\"8968\":3027,\"8970\":3012,\"8981\":2810,\"8992\":2212,\"8993\":2213,\"9109\":3020,\"9115\":2219,\"9117\":2220,\"9118\":2221,\"9120\":2222,\"9121\":2215,\"9123\":2216,\"9124\":2217,\"9126\":2218,\"9128\":2223,\"9132\":2224,\"9143\":2209,\"9146\":2543,\"9147\":2544,\"9148\":2546,\"9149\":2547,\"9225\":2530,\"9226\":2533,\"9227\":2537,\"9228\":2531,\"9229\":2532,\"9251\":2732,\"9252\":2536,\"9472\":2211,\"9474\":2214,\"9484\":2210,\"9488\":2539,\"9492\":2541,\"9496\":2538,\"9500\":2548,\"9508\":2549,\"9516\":2551,\"9524\":2550,\"9532\":2542,\"9618\":2529,\"9642\":2791,\"9643\":2785,\"9644\":2779,\"9645\":2786,\"9646\":2783,\"9647\":2767,\"9650\":2792,\"9651\":2787,\"9654\":2781,\"9655\":2765,\"9660\":2793,\"9661\":2788,\"9664\":2780,\"9665\":2764,\"9670\":2528,\"9675\":2766,\"9679\":2782,\"9702\":2784,\"9734\":2789,\"9742\":2809,\"9747\":2762,\"9756\":2794,\"9758\":2795,\"9792\":2808,\"9794\":2807,\"9827\":2796,\"9829\":2798,\"9830\":2797,\"9837\":2806,\"9839\":2805,\"10003\":2803,\"10007\":2804,\"10013\":2777,\"10016\":2800,\"10216\":2748,\"10217\":2750,\"10240\":16787456,\"10241\":16787457,\"10242\":16787458,\"10243\":16787459,\"10244\":16787460,\"10245\":16787461,\"10246\":16787462,\"10247\":16787463,\"10248\":16787464,\"10249\":16787465,\"10250\":16787466,\"10251\":16787467,\"10252\":16787468,\"10253\":16787469,\"10254\":16787470,\"10255\":16787471,\"10256\":16787472,\"10257\":16787473,\"10258\":16787474,\"10259\":16787475,\"10260\":16787476,\"10261\":16787477,\"10262\":16787478,\"10263\":16787479,\"10264\":16787480,\"10265\":16787481,\"10266\":16787482,\"10267\":16787483,\"10268\":16787484,\"10269\":16787485,\"10270\":16787486,\"10271\":16787487,\"10272\":16787488,\"10273\":16787489,\"10274\":16787490,\"10275\":16787491,\"10276\":16787492,\"10277\":16787493,\"10278\":16787494,\"10279\":16787495,\"10280\":16787496,\"10281\":16787497,\"10282\":16787498,\"10283\":16787499,\"10284\":16787500,\"10285\":16787501,\"10286\":16787502,\"10287\":16787503,\"10288\":16787504,\"10289\":16787505,\"10290\":16787506,\"10291\":16787507,\"10292\":16787508,\"10293\":16787509,\"10294\":16787510,\"10295\":16787511,\"10296\":16787512,\"10297\":16787513,\"10298\":16787514,\"10299\":16787515,\"10300\":16787516,\"10301\":16787517,\"10302\":16787518,\"10303\":16787519,\"10304\":16787520,\"10305\":16787521,\"10306\":16787522,\"10307\":16787523,\"10308\":16787524,\"10309\":16787525,\"10310\":16787526,\"10311\":16787527,\"10312\":16787528,\"10313\":16787529,\"10314\":16787530,\"10315\":16787531,\"10316\":16787532,\"10317\":16787533,\"10318\":16787534,\"10319\":16787535,\"10320\":16787536,\"10321\":16787537,\"10322\":16787538,\"10323\":16787539,\"10324\":16787540,\"10325\":16787541,\"10326\":16787542,\"10327\":16787543,\"10328\":16787544,\"10329\":16787545,\"10330\":16787546,\"10331\":16787547,\"10332\":16787548,\"10333\":16787549,\"10334\":16787550,\"10335\":16787551,\"10336\":16787552,\"10337\":16787553,\"10338\":16787554,\"10339\":16787555,\"10340\":16787556,\"10341\":16787557,\"10342\":16787558,\"10343\":16787559,\"10344\":16787560,\"10345\":16787561,\"10346\":16787562,\"10347\":16787563,\"10348\":16787564,\"10349\":16787565,\"10350\":16787566,\"10351\":16787567,\"10352\":16787568,\"10353\":16787569,\"10354\":16787570,\"10355\":16787571,\"10356\":16787572,\"10357\":16787573,\"10358\":16787574,\"10359\":16787575,\"10360\":16787576,\"10361\":16787577,\"10362\":16787578,\"10363\":16787579,\"10364\":16787580,\"10365\":16787581,\"10366\":16787582,\"10367\":16787583,\"10368\":16787584,\"10369\":16787585,\"10370\":16787586,\"10371\":16787587,\"10372\":16787588,\"10373\":16787589,\"10374\":16787590,\"10375\":16787591,\"10376\":16787592,\"10377\":16787593,\"10378\":16787594,\"10379\":16787595,\"10380\":16787596,\"10381\":16787597,\"10382\":16787598,\"10383\":16787599,\"10384\":16787600,\"10385\":16787601,\"10386\":16787602,\"10387\":16787603,\"10388\":16787604,\"10389\":16787605,\"10390\":16787606,\"10391\":16787607,\"10392\":16787608,\"10393\":16787609,\"10394\":16787610,\"10395\":16787611,\"10396\":16787612,\"10397\":16787613,\"10398\":16787614,\"10399\":16787615,\"10400\":16787616,\"10401\":16787617,\"10402\":16787618,\"10403\":16787619,\"10404\":16787620,\"10405\":16787621,\"10406\":16787622,\"10407\":16787623,\"10408\":16787624,\"10409\":16787625,\"10410\":16787626,\"10411\":16787627,\"10412\":16787628,\"10413\":16787629,\"10414\":16787630,\"10415\":16787631,\"10416\":16787632,\"10417\":16787633,\"10418\":16787634,\"10419\":16787635,\"10420\":16787636,\"10421\":16787637,\"10422\":16787638,\"10423\":16787639,\"10424\":16787640,\"10425\":16787641,\"10426\":16787642,\"10427\":16787643,\"10428\":16787644,\"10429\":16787645,\"10430\":16787646,\"10431\":16787647,\"10432\":16787648,\"10433\":16787649,\"10434\":16787650,\"10435\":16787651,\"10436\":16787652,\"10437\":16787653,\"10438\":16787654,\"10439\":16787655,\"10440\":16787656,\"10441\":16787657,\"10442\":16787658,\"10443\":16787659,\"10444\":16787660,\"10445\":16787661,\"10446\":16787662,\"10447\":16787663,\"10448\":16787664,\"10449\":16787665,\"10450\":16787666,\"10451\":16787667,\"10452\":16787668,\"10453\":16787669,\"10454\":16787670,\"10455\":16787671,\"10456\":16787672,\"10457\":16787673,\"10458\":16787674,\"10459\":16787675,\"10460\":16787676,\"10461\":16787677,\"10462\":16787678,\"10463\":16787679,\"10464\":16787680,\"10465\":16787681,\"10466\":16787682,\"10467\":16787683,\"10468\":16787684,\"10469\":16787685,\"10470\":16787686,\"10471\":16787687,\"10472\":16787688,\"10473\":16787689,\"10474\":16787690,\"10475\":16787691,\"10476\":16787692,\"10477\":16787693,\"10478\":16787694,\"10479\":16787695,\"10480\":16787696,\"10481\":16787697,\"10482\":16787698,\"10483\":16787699,\"10484\":16787700,\"10485\":16787701,\"10486\":16787702,\"10487\":16787703,\"10488\":16787704,\"10489\":16787705,\"10490\":16787706,\"10491\":16787707,\"10492\":16787708,\"10493\":16787709,\"10494\":16787710,\"10495\":16787711,\"12289\":1188,\"12290\":1185,\"12300\":1186,\"12301\":1187,\"12443\":1246,\"12444\":1247,\"12449\":1191,\"12450\":1201,\"12451\":1192,\"12452\":1202,\"12453\":1193,\"12454\":1203,\"12455\":1194,\"12456\":1204,\"12457\":1195,\"12458\":1205,\"12459\":1206,\"12461\":1207,\"12463\":1208,\"12465\":1209,\"12467\":1210,\"12469\":1211,\"12471\":1212,\"12473\":1213,\"12475\":1214,\"12477\":1215,\"12479\":1216,\"12481\":1217,\"12483\":1199,\"12484\":1218,\"12486\":1219,\"12488\":1220,\"12490\":1221,\"12491\":1222,\"12492\":1223,\"12493\":1224,\"12494\":1225,\"12495\":1226,\"12498\":1227,\"12501\":1228,\"12504\":1229,\"12507\":1230,\"12510\":1231,\"12511\":1232,\"12512\":1233,\"12513\":1234,\"12514\":1235,\"12515\":1196,\"12516\":1236,\"12517\":1197,\"12518\":1237,\"12519\":1198,\"12520\":1238,\"12521\":1239,\"12522\":1240,\"12523\":1241,\"12524\":1242,\"12525\":1243,\"12527\":1244,\"12530\":1190,\"12531\":1245,\"12539\":1189,\"12540\":1200};\n\n    function lookup(k) { return k ? {keysym: k, keyname: keynames ? keynames[k] : k} : undefined; }\n    return {\n        fromUnicode : function(u) { return lookup(codepoints[u]); },\n        lookup : lookup\n    };\n})();\n\ndefine(\"vnc-keysymdef\", [\"vnc-util\"], function(){});\n\n",
    "var kbdUtil = (function() {\n    \"use strict\";\n\n    function substituteCodepoint(cp) {\n        // Any Unicode code points which do not have corresponding keysym entries\n        // can be swapped out for another code point by adding them to this table\n        var substitutions = {\n            // {S,s} with comma below -> {S,s} with cedilla\n            0x218 : 0x15e,\n            0x219 : 0x15f,\n            // {T,t} with comma below -> {T,t} with cedilla\n            0x21a : 0x162,\n            0x21b : 0x163\n        };\n\n        var sub = substitutions[cp];\n        return sub ? sub : cp;\n    }\n\n    function isMac() {\n        return navigator && !!(/mac/i).exec(navigator.platform);\n    }\n    function isWindows() {\n        return navigator && !!(/win/i).exec(navigator.platform);\n    }\n    function isLinux() {\n        return navigator && !!(/linux/i).exec(navigator.platform);\n    }\n\n    // Return true if a modifier which is not the specified char modifier (and is not shift) is down\n    function hasShortcutModifier(charModifier, currentModifiers) {\n        var mods = {};\n        for (var key in currentModifiers) {\n            if (parseInt(key) !== XK_Shift_L) {\n                mods[key] = currentModifiers[key];\n            }\n        }\n\n        var sum = 0;\n        for (var k in currentModifiers) {\n            if (mods[k]) {\n                ++sum;\n            }\n        }\n        if (hasCharModifier(charModifier, mods)) {\n            return sum > charModifier.length;\n        }\n        else {\n            return sum > 0;\n        }\n    }\n\n    // Return true if the specified char modifier is currently down\n    function hasCharModifier(charModifier, currentModifiers) {\n        if (charModifier.length === 0) { return false; }\n\n        for (var i = 0; i < charModifier.length; ++i) {\n            if (!currentModifiers[charModifier[i]]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // Helper object tracking modifier key state\n    // and generates fake key events to compensate if it gets out of sync\n    function ModifierSync(charModifier) {\n        if (!charModifier) {\n            if (isMac()) {\n                // on Mac, Option (AKA Alt) is used as a char modifier\n                charModifier = [XK_Alt_L];\n            }\n            else if (isWindows()) {\n                // on Windows, Ctrl+Alt is used as a char modifier\n                charModifier = [XK_Alt_L, XK_Control_L];\n            }\n            else if (isLinux()) {\n                // on Linux, ISO Level 3 Shift (AltGr) is used as a char modifier\n                charModifier = [XK_ISO_Level3_Shift];\n            }\n            else {\n                charModifier = [];\n            }\n        }\n\n        var state = {};\n        state[XK_Control_L] = false;\n        state[XK_Alt_L] = false;\n        state[XK_ISO_Level3_Shift] = false;\n        state[XK_Shift_L] = false;\n        state[XK_Meta_L] = false;\n\n        function sync(evt, keysym) {\n            var result = [];\n            function syncKey(keysym) {\n                return {keysym: keysyms.lookup(keysym), type: state[keysym] ? 'keydown' : 'keyup'};\n            }\n\n            if (evt.ctrlKey !== undefined &&\n                evt.ctrlKey !== state[XK_Control_L] && keysym !== XK_Control_L) {\n                state[XK_Control_L] = evt.ctrlKey;\n                result.push(syncKey(XK_Control_L));\n            }\n            if (evt.altKey !== undefined &&\n                evt.altKey !== state[XK_Alt_L] && keysym !== XK_Alt_L) {\n                state[XK_Alt_L] = evt.altKey;\n                result.push(syncKey(XK_Alt_L));\n            }\n            if (evt.altGraphKey !== undefined &&\n                evt.altGraphKey !== state[XK_ISO_Level3_Shift] && keysym !== XK_ISO_Level3_Shift) {\n                state[XK_ISO_Level3_Shift] = evt.altGraphKey;\n                result.push(syncKey(XK_ISO_Level3_Shift));\n            }\n            if (evt.shiftKey !== undefined &&\n                evt.shiftKey !== state[XK_Shift_L] && keysym !== XK_Shift_L) {\n                state[XK_Shift_L] = evt.shiftKey;\n                result.push(syncKey(XK_Shift_L));\n            }\n            if (evt.metaKey !== undefined &&\n                evt.metaKey !== state[XK_Meta_L] && keysym !== XK_Meta_L) {\n                state[XK_Meta_L] = evt.metaKey;\n                result.push(syncKey(XK_Meta_L));\n            }\n            return result;\n        }\n        function syncKeyEvent(evt, down) {\n            var obj = getKeysym(evt);\n            var keysym = obj ? obj.keysym : null;\n\n            // first, apply the event itself, if relevant\n            if (keysym !== null && state[keysym] !== undefined) {\n                state[keysym] = down;\n            }\n            return sync(evt, keysym);\n        }\n\n        return {\n            // sync on the appropriate keyboard event\n            keydown: function(evt) { return syncKeyEvent(evt, true);},\n            keyup: function(evt) { return syncKeyEvent(evt, false);},\n            // Call this with a non-keyboard event (such as mouse events) to use its modifier state to synchronize anyway\n            syncAny: function(evt) { return sync(evt);},\n\n            // is a shortcut modifier down?\n            hasShortcutModifier: function() { return hasShortcutModifier(charModifier, state); },\n            // if a char modifier is down, return the keys it consists of, otherwise return null\n            activeCharModifier: function() { return hasCharModifier(charModifier, state) ? charModifier : null; }\n        };\n    }\n\n    // Get a key ID from a keyboard event\n    // May be a string or an integer depending on the available properties\n    function getKey(evt){\n        if ('keyCode' in evt && 'key' in evt) {\n            return evt.key + ':' + evt.keyCode;\n        }\n        else if ('keyCode' in evt) {\n            return evt.keyCode;\n        }\n        else {\n            return evt.key;\n        }\n    }\n\n    // Get the most reliable keysym value we can get from a key event\n    // if char/charCode is available, prefer those, otherwise fall back to key/keyCode/which\n    function getKeysym(evt){\n        var codepoint;\n        if (evt.char && evt.char.length === 1) {\n            codepoint = evt.char.charCodeAt();\n        }\n        else if (evt.charCode) {\n            codepoint = evt.charCode;\n        }\n        else if (evt.keyCode && evt.type === 'keypress') {\n            // IE10 stores the char code as keyCode, and has no other useful properties\n            codepoint = evt.keyCode;\n        }\n        if (codepoint) {\n            var res = keysyms.fromUnicode(substituteCodepoint(codepoint));\n            if (res) {\n                return res;\n            }\n        }\n        // we could check evt.key here.\n        // Legal values are defined in http://www.w3.org/TR/DOM-Level-3-Events/#key-values-list,\n        // so we \"just\" need to map them to keysym, but AFAIK this is only available in IE10, which also provides evt.key\n        // so we don't *need* it yet\n        if (evt.keyCode) {\n            return keysyms.lookup(keysymFromKeyCode(evt.keyCode, evt.shiftKey));\n        }\n        if (evt.which) {\n            return keysyms.lookup(keysymFromKeyCode(evt.which, evt.shiftKey));\n        }\n        return null;\n    }\n\n    // Given a keycode, try to predict which keysym it might be.\n    // If the keycode is unknown, null is returned.\n    function keysymFromKeyCode(keycode, shiftPressed) {\n        if (typeof(keycode) !== 'number') {\n            return null;\n        }\n        // won't be accurate for azerty\n        if (keycode >= 0x30 && keycode <= 0x39) {\n            return keycode; // digit\n        }\n        if (keycode >= 0x41 && keycode <= 0x5a) {\n            // remap to lowercase unless shift is down\n            return shiftPressed ? keycode : keycode + 32; // A-Z\n        }\n        if (keycode >= 0x60 && keycode <= 0x69) {\n            return XK_KP_0 + (keycode - 0x60); // numpad 0-9\n        }\n\n        switch(keycode) {\n            case 0x20: return XK_space;\n            case 0x6a: return XK_KP_Multiply;\n            case 0x6b: return XK_KP_Add;\n            case 0x6c: return XK_KP_Separator;\n            case 0x6d: return XK_KP_Subtract;\n            case 0x6e: return XK_KP_Decimal;\n            case 0x6f: return XK_KP_Divide;\n            case 0xbb: return XK_plus;\n            case 0xbc: return XK_comma;\n            case 0xbd: return XK_minus;\n            case 0xbe: return XK_period;\n        }\n\n        return nonCharacterKey({keyCode: keycode});\n    }\n\n    // if the key is a known non-character key (any key which doesn't generate character data)\n    // return its keysym value. Otherwise return null\n    function nonCharacterKey(evt) {\n        // evt.key not implemented yet\n        if (!evt.keyCode) { return null; }\n        var keycode = evt.keyCode;\n\n        if (keycode >= 0x70 && keycode <= 0x87) {\n            return XK_F1 + keycode - 0x70; // F1-F24\n        }\n        switch (keycode) {\n\n            case 8 : return XK_BackSpace;\n            case 13 : return XK_Return;\n\n            case 9 : return XK_Tab;\n\n            case 27 : return XK_Escape;\n            case 46 : return XK_Delete;\n\n            case 36 : return XK_Home;\n            case 35 : return XK_End;\n            case 33 : return XK_Page_Up;\n            case 34 : return XK_Page_Down;\n            case 45 : return XK_Insert;\n\n            case 37 : return XK_Left;\n            case 38 : return XK_Up;\n            case 39 : return XK_Right;\n            case 40 : return XK_Down;\n\n            case 16 : return XK_Shift_L;\n            case 17 : return XK_Control_L;\n            case 18 : return XK_Alt_L; // also: Option-key on Mac\n\n            case 224 : return XK_Meta_L;\n            case 225 : return XK_ISO_Level3_Shift; // AltGr\n            case 91 : return XK_Super_L; // also: Windows-key\n            case 92 : return XK_Super_R; // also: Windows-key\n            case 93 : return XK_Menu; // also: Windows-Menu, Command on Mac\n            default: return null;\n        }\n    }\n    return {\n        hasShortcutModifier : hasShortcutModifier,\n        hasCharModifier : hasCharModifier,\n        ModifierSync : ModifierSync,\n        getKey : getKey,\n        getKeysym : getKeysym,\n        keysymFromKeyCode : keysymFromKeyCode,\n        nonCharacterKey : nonCharacterKey,\n        substituteCodepoint : substituteCodepoint\n    };\n})();\n\n// Takes a DOM keyboard event and:\n// - determines which keysym it represents\n// - determines a keyId  identifying the key that was pressed (corresponding to the key/keyCode properties on the DOM event)\n// - synthesizes events to synchronize modifier key state between which modifiers are actually down, and which we thought were down\n// - marks each event with an 'escape' property if a modifier was down which should be \"escaped\"\n// - generates a \"stall\" event in cases where it might be necessary to wait and see if a keypress event follows a keydown\n// This information is collected into an object which is passed to the next() function. (one call per event)\nfunction KeyEventDecoder(modifierState, next) {\n    \"use strict\";\n    function sendAll(evts) {\n        for (var i = 0; i < evts.length; ++i) {\n            next(evts[i]);\n        }\n    }\n    function process(evt, type) {\n        var result = {type: type};\n        var keyId = kbdUtil.getKey(evt);\n        if (keyId) {\n            result.keyId = keyId;\n        }\n\n        var keysym = kbdUtil.getKeysym(evt);\n\n        var hasModifier = modifierState.hasShortcutModifier() || !!modifierState.activeCharModifier();\n        // Is this a case where we have to decide on the keysym right away, rather than waiting for the keypress?\n        // \"special\" keys like enter, tab or backspace don't send keypress events,\n        // and some browsers don't send keypresses at all if a modifier is down\n        if (keysym && (type !== 'keydown' || kbdUtil.nonCharacterKey(evt) || hasModifier)) {\n            result.keysym = keysym;\n        }\n\n        var isShift = evt.keyCode === 0x10 || evt.key === 'Shift';\n\n        // Should we prevent the browser from handling the event?\n        // Doing so on a keydown (in most browsers) prevents keypress from being generated\n        // so only do that if we have to.\n        var suppress = !isShift && (type !== 'keydown' || modifierState.hasShortcutModifier() || !!kbdUtil.nonCharacterKey(evt));\n\n        // If a char modifier is down on a keydown, we need to insert a stall,\n        // so VerifyCharModifier knows to wait and see if a keypress is comnig\n        var stall = type === 'keydown' && modifierState.activeCharModifier() && !kbdUtil.nonCharacterKey(evt);\n\n        // if a char modifier is pressed, get the keys it consists of (on Windows, AltGr is equivalent to Ctrl+Alt)\n        var active = modifierState.activeCharModifier();\n\n        // If we have a char modifier down, and we're able to determine a keysym reliably\n        // then (a) we know to treat the modifier as a char modifier,\n        // and (b) we'll have to \"escape\" the modifier to undo the modifier when sending the char.\n        if (active && keysym) {\n            var isCharModifier = false;\n            for (var i  = 0; i < active.length; ++i) {\n                if (active[i] === keysym.keysym) {\n                    isCharModifier = true;\n                }\n            }\n            if (type === 'keypress' && !isCharModifier) {\n                result.escape = modifierState.activeCharModifier();\n            }\n        }\n\n        if (stall) {\n            // insert a fake \"stall\" event\n            next({type: 'stall'});\n        }\n        next(result);\n\n        return suppress;\n    }\n\n    return {\n        keydown: function(evt) {\n            sendAll(modifierState.keydown(evt));\n            return process(evt, 'keydown');\n        },\n        keypress: function(evt) {\n            return process(evt, 'keypress');\n        },\n        keyup: function(evt) {\n            sendAll(modifierState.keyup(evt));\n            return process(evt, 'keyup');\n        },\n        syncModifiers: function(evt) {\n            sendAll(modifierState.syncAny(evt));\n        },\n        releaseAll: function() { next({type: 'releaseall'}); }\n    };\n}\n\n// Combines keydown and keypress events where necessary to handle char modifiers.\n// On some OS'es, a char modifier is sometimes used as a shortcut modifier.\n// For example, on Windows, AltGr is synonymous with Ctrl-Alt. On a Danish keyboard layout, AltGr-2 yields a @, but Ctrl-Alt-D does nothing\n// so when used with the '2' key, Ctrl-Alt counts as a char modifier (and should be escaped), but when used with 'D', it does not.\n// The only way we can distinguish these cases is to wait and see if a keypress event arrives\n// When we receive a \"stall\" event, wait a few ms before processing the next keydown. If a keypress has also arrived, merge the two\nfunction VerifyCharModifier(next) {\n    \"use strict\";\n    var queue = [];\n    var timer = null;\n    function process() {\n        if (timer) {\n            return;\n        }\n\n        var delayProcess = function () {\n            clearTimeout(timer);\n            timer = null;\n            process();\n        };\n\n        while (queue.length !== 0) {\n            var cur = queue[0];\n            queue = queue.splice(1);\n            switch (cur.type) {\n            case 'stall':\n                // insert a delay before processing available events.\n                /* jshint loopfunc: true */\n                timer = setTimeout(delayProcess, 5);\n                /* jshint loopfunc: false */\n                return;\n            case 'keydown':\n                // is the next element a keypress? Then we should merge the two\n                if (queue.length !== 0 && queue[0].type === 'keypress') {\n                    // Firefox sends keypress even when no char is generated.\n                    // so, if keypress keysym is the same as we'd have guessed from keydown,\n                    // the modifier didn't have any effect, and should not be escaped\n                    if (queue[0].escape && (!cur.keysym || cur.keysym.keysym !== queue[0].keysym.keysym)) {\n                        cur.escape = queue[0].escape;\n                    }\n                    cur.keysym = queue[0].keysym;\n                    queue = queue.splice(1);\n                }\n                break;\n            }\n\n            // swallow stall events, and pass all others to the next stage\n            if (cur.type !== 'stall') {\n                next(cur);\n            }\n        }\n    }\n    return function(evt) {\n        queue.push(evt);\n        process();\n    };\n}\n\n// Keeps track of which keys we (and the server) believe are down\n// When a keyup is received, match it against this list, to determine the corresponding keysym(s)\n// in some cases, a single key may produce multiple keysyms, so the corresponding keyup event must release all of these chars\n// key repeat events should be merged into a single entry.\n// Because we can't always identify which entry a keydown or keyup event corresponds to, we sometimes have to guess\nfunction TrackKeyState(next) {\n    \"use strict\";\n    var state = [];\n\n    return function (evt) {\n        var last = state.length !== 0 ? state[state.length-1] : null;\n\n        switch (evt.type) {\n        case 'keydown':\n            // insert a new entry if last seen key was different.\n            if (!last || !evt.keyId || last.keyId !== evt.keyId) {\n                last = {keyId: evt.keyId, keysyms: {}};\n                state.push(last);\n            }\n            if (evt.keysym) {\n                // make sure last event contains this keysym (a single \"logical\" keyevent\n                // can cause multiple key events to be sent to the VNC server)\n                last.keysyms[evt.keysym.keysym] = evt.keysym;\n                last.ignoreKeyPress = true;\n                next(evt);\n            }\n            break;\n        case 'keypress':\n            if (!last) {\n                last = {keyId: evt.keyId, keysyms: {}};\n                state.push(last);\n            }\n            if (!evt.keysym) {\n                console.log('keypress with no keysym:', evt);\n            }\n\n            // If we didn't expect a keypress, and already sent a keydown to the VNC server\n            // based on the keydown, make sure to skip this event.\n            if (evt.keysym && !last.ignoreKeyPress) {\n                last.keysyms[evt.keysym.keysym] = evt.keysym;\n                evt.type = 'keydown';\n                next(evt);\n            }\n            break;\n        case 'keyup':\n            if (state.length === 0) {\n                return;\n            }\n            var idx = null;\n            // do we have a matching key tracked as being down?\n            for (var i = 0; i !== state.length; ++i) {\n                if (state[i].keyId === evt.keyId) {\n                    idx = i;\n                    break;\n                }\n            }\n            // if we couldn't find a match (it happens), assume it was the last key pressed\n            if (idx === null) {\n                idx = state.length - 1;\n            }\n\n            var item = state.splice(idx, 1)[0];\n            // for each keysym tracked by this key entry, clone the current event and override the keysym\n            var clone = (function(){\n                function Clone(){}\n                return function (obj) { Clone.prototype=obj; return new Clone(); };\n            }());\n            for (var key in item.keysyms) {\n                var out = clone(evt);\n                out.keysym = item.keysyms[key];\n                next(out);\n            }\n            break;\n        case 'releaseall':\n            /* jshint shadow: true */\n            for (var i = 0; i < state.length; ++i) {\n                for (var key in state[i].keysyms) {\n                    var keysym = state[i].keysyms[key];\n                    next({keyId: 0, keysym: keysym, type: 'keyup'});\n                }\n            }\n            /* jshint shadow: false */\n            state = [];\n        }\n    };\n}\n\n// Handles \"escaping\" of modifiers: if a char modifier is used to produce a keysym (such as AltGr-2 to generate an @),\n// then the modifier must be \"undone\" before sending the @, and \"redone\" afterwards.\nfunction EscapeModifiers(next) {\n    \"use strict\";\n    return function(evt) {\n        if (evt.type !== 'keydown' || evt.escape === undefined) {\n            next(evt);\n            return;\n        }\n        // undo modifiers\n        for (var i = 0; i < evt.escape.length; ++i) {\n            next({type: 'keyup', keyId: 0, keysym: keysyms.lookup(evt.escape[i])});\n        }\n        // send the character event\n        next(evt);\n        // redo modifiers\n        /* jshint shadow: true */\n        for (var i = 0; i < evt.escape.length; ++i) {\n            next({type: 'keydown', keyId: 0, keysym: keysyms.lookup(evt.escape[i])});\n        }\n        /* jshint shadow: false */\n    };\n}\n;\ndefine(\"vnc-keyboard\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * noVNC: HTML5 VNC client\n * Copyright (C) 2012 Joel Martin\n * Copyright (C) 2013 Samuel Mannehed for Cendio AB\n * Licensed under MPL 2.0 or any later version (see LICENSE.txt)\n */\n\n/*jslint browser: true, white: false */\n/*global window, Util */\n\nvar Keyboard, Mouse;\n\n(function () {\n    \"use strict\";\n\n    //\n    // Keyboard event handler\n    //\n\n    Keyboard = function (defaults) {\n        this._keyDownList = [];         // List of depressed keys\n                                        // (even if they are happy)\n\n        Util.set_defaults(this, defaults, {\n            'target': document,\n            'focused': true\n        });\n\n        // create the keyboard handler\n        this._handler = new KeyEventDecoder(kbdUtil.ModifierSync(),\n            VerifyCharModifier( /* jshint newcap: false */\n                TrackKeyState(\n                    EscapeModifiers(this._handleRfbEvent.bind(this))\n                )\n            )\n        ); /* jshint newcap: true */\n\n        // keep these here so we can refer to them later\n        this._eventHandlers = {\n            'keyup': this._handleKeyUp.bind(this),\n            'keydown': this._handleKeyDown.bind(this),\n            'keypress': this._handleKeyPress.bind(this),\n            'blur': this._allKeysUp.bind(this)\n        };\n    };\n\n    Keyboard.prototype = {\n        // private methods\n\n        _handleRfbEvent: function (e) {\n            if (this._onKeyPress) {\n                Util.Debug(\"onKeyPress \" + (e.type == 'keydown' ? \"down\" : \"up\") +\n                           \", keysym: \" + e.keysym.keysym + \"(\" + e.keysym.keyname + \")\");\n                this._onKeyPress(e.keysym.keysym, e.type == 'keydown');\n            }\n        },\n\n        _handleKeyDown: function (e) {\n            if (!this._focused) { return true; }\n\n            if (this._handler.keydown(e)) {\n                // Suppress bubbling/default actions\n                Util.stopEvent(e);\n                return false;\n            } else {\n                // Allow the event to bubble and become a keyPress event which\n                // will have the character code translated\n                return true;\n            }\n        },\n\n        _handleKeyPress: function (e) {\n            if (!this._focused) { return true; }\n\n            if (this._handler.keypress(e)) {\n                // Suppress bubbling/default actions\n                Util.stopEvent(e);\n                return false;\n            } else {\n                // Allow the event to bubble and become a keyPress event which\n                // will have the character code translated\n                return true;\n            }\n        },\n\n        _handleKeyUp: function (e) {\n            if (!this._focused) { return true; }\n\n            if (this._handler.keyup(e)) {\n                // Suppress bubbling/default actions\n                Util.stopEvent(e);\n                return false;\n            } else {\n                // Allow the event to bubble and become a keyPress event which\n                // will have the character code translated\n                return true;\n            }\n        },\n\n        _allKeysUp: function () {\n            Util.Debug(\">> Keyboard.allKeysUp\");\n            this._handler.releaseAll();\n            Util.Debug(\"<< Keyboard.allKeysUp\");\n        },\n\n        // Public methods\n\n        grab: function () {\n            //Util.Debug(\">> Keyboard.grab\");\n            var c = this._target;\n\n            Util.addEvent(c, 'keydown', this._eventHandlers.keydown);\n            Util.addEvent(c, 'keyup', this._eventHandlers.keyup);\n            Util.addEvent(c, 'keypress', this._eventHandlers.keypress);\n\n            // Release (key up) if window loses focus\n            Util.addEvent(window, 'blur', this._eventHandlers.blur);\n\n            //Util.Debug(\"<< Keyboard.grab\");\n        },\n\n        ungrab: function () {\n            //Util.Debug(\">> Keyboard.ungrab\");\n            var c = this._target;\n\n            Util.removeEvent(c, 'keydown', this._eventHandlers.keydown);\n            Util.removeEvent(c, 'keyup', this._eventHandlers.keyup);\n            Util.removeEvent(c, 'keypress', this._eventHandlers.keypress);\n            Util.removeEvent(window, 'blur', this._eventHandlers.blur);\n\n            // Release (key up) all keys that are in a down state\n            this._allKeysUp();\n\n            //Util.Debug(\">> Keyboard.ungrab\");\n        },\n\n        sync: function (e) {\n            this._handler.syncModifiers(e);\n        }\n    };\n\n    Util.make_properties(Keyboard, [\n        ['target',     'wo', 'dom'],  // DOM element that captures keyboard input\n        ['focused',    'rw', 'bool'], // Capture and send key events\n\n        ['onKeyPress', 'rw', 'func'] // Handler for key press/release\n    ]);\n\n    //\n    // Mouse event handler\n    //\n\n    Mouse = function (defaults) {\n        this._mouseCaptured  = false;\n\n        this._doubleClickTimer = null;\n        this._lastTouchPos = null;\n\n        // Configuration attributes\n        Util.set_defaults(this, defaults, {\n            'target': document,\n            'focused': true,\n            'scale': 1.0,\n            'touchButton': 1\n        });\n\n        this._eventHandlers = {\n            'mousedown': this._handleMouseDown.bind(this),\n            'mouseup': this._handleMouseUp.bind(this),\n            'mousemove': this._handleMouseMove.bind(this),\n            'mousewheel': this._handleMouseWheel.bind(this),\n            'mousedisable': this._handleMouseDisable.bind(this)\n        };\n    };\n\n    Mouse.prototype = {\n        // private methods\n        _captureMouse: function () {\n            // capturing the mouse ensures we get the mouseup event\n            if (this._target.setCapture) {\n                this._target.setCapture();\n            }\n\n            // some browsers give us mouseup events regardless,\n            // so if we never captured the mouse, we can disregard the event\n            this._mouseCaptured = true;\n        },\n\n        _releaseMouse: function () {\n            if (this._target.releaseCapture) {\n                this._target.releaseCapture();\n            }\n            this._mouseCaptured = false;\n        },\n\n        _resetDoubleClickTimer: function () {\n            this._doubleClickTimer = null;\n        },\n\n        _handleMouseButton: function (e, down) {\n            if (!this._focused) { return true; }\n\n            if (this._notify) {\n                this._notify(e);\n            }\n\n            var evt = (e ? e : window.event);\n            var pos = Util.getEventPosition(e, this._target, this._scale);\n\n            var bmask;\n            if (e.touches || e.changedTouches) {\n                // Touch device\n\n                // When two touches occur within 500 ms of each other and are\n                // closer than 20 pixels together a double click is triggered.\n                if (down == 1) {\n                    if (this._doubleClickTimer === null) {\n                        this._lastTouchPos = pos;\n                    } else {\n                        clearTimeout(this._doubleClickTimer);\n\n                        // When the distance between the two touches is small enough\n                        // force the position of the latter touch to the position of\n                        // the first.\n\n                        var xs = this._lastTouchPos.x - pos.x;\n                        var ys = this._lastTouchPos.y - pos.y;\n                        var d = Math.sqrt((xs * xs) + (ys * ys));\n\n                        // The goal is to trigger on a certain physical width, the\n                        // devicePixelRatio brings us a bit closer but is not optimal.\n                        if (d < 20 * window.devicePixelRatio) {\n                            pos = this._lastTouchPos;\n                        }\n                    }\n                    this._doubleClickTimer = setTimeout(this._resetDoubleClickTimer.bind(this), 500);\n                }\n                bmask = this._touchButton;\n                // If bmask is set\n            } else if (evt.which) {\n                /* everything except IE */\n                bmask = 1 << evt.button;\n            } else {\n                /* IE including 9 */\n                bmask = (evt.button & 0x1) +      // Left\n                        (evt.button & 0x2) * 2 +  // Right\n                        (evt.button & 0x4) / 2;   // Middle\n            }\n\n            if (this._onMouseButton) {\n                Util.Debug(\"onMouseButton \" + (down ? \"down\" : \"up\") +\n                           \", x: \" + pos.x + \", y: \" + pos.y + \", bmask: \" + bmask);\n                this._onMouseButton(pos.x, pos.y, down, bmask);\n            }\n            Util.stopEvent(e);\n            return false;\n        },\n\n        _handleMouseDown: function (e) {\n            this._captureMouse();\n            this._handleMouseButton(e, 1);\n        },\n\n        _handleMouseUp: function (e) {\n            if (!this._mouseCaptured) { return; }\n\n            this._handleMouseButton(e, 0);\n            this._releaseMouse();\n        },\n\n        _handleMouseWheel: function (e) {\n            if (!this._focused) { return true; }\n\n            if (this._notify) {\n                this._notify(e);\n            }\n\n            var evt = (e ? e : window.event);\n            var pos = Util.getEventPosition(e, this._target, this._scale);\n            var wheelData = evt.detail ? evt.detail * -1 : evt.wheelDelta / 40;\n            var bmask;\n            if (wheelData > 0) {\n                bmask = 1 << 3;\n            } else {\n                bmask = 1 << 4;\n            }\n\n            if (this._onMouseButton) {\n                this._onMouseButton(pos.x, pos.y, 1, bmask);\n                this._onMouseButton(pos.x, pos.y, 0, bmask);\n            }\n            Util.stopEvent(e);\n            return false;\n        },\n\n        _handleMouseMove: function (e) {\n            if (! this._focused) { return true; }\n\n            if (this._notify) {\n                this._notify(e);\n            }\n\n            var evt = (e ? e : window.event);\n            var pos = Util.getEventPosition(e, this._target, this._scale);\n            if (this._onMouseMove) {\n                this._onMouseMove(pos.x, pos.y);\n            }\n            Util.stopEvent(e);\n            return false;\n        },\n\n        _handleMouseDisable: function (e) {\n            if (!this._focused) { return true; }\n\n            var evt = (e ? e : window.event);\n            var pos = Util.getEventPosition(e, this._target, this._scale);\n\n            /* Stop propagation if inside canvas area */\n            if ((pos.realx >= 0) && (pos.realy >= 0) &&\n                (pos.realx < this._target.offsetWidth) &&\n                (pos.realy < this._target.offsetHeight)) {\n                //Util.Debug(\"mouse event disabled\");\n                Util.stopEvent(e);\n                return false;\n            }\n\n            return true;\n        },\n\n\n        // Public methods\n        grab: function () {\n            var c = this._target;\n\n            if ('ontouchstart' in document.documentElement) {\n                Util.addEvent(c, 'touchstart', this._eventHandlers.mousedown);\n                Util.addEvent(window, 'touchend', this._eventHandlers.mouseup);\n                Util.addEvent(c, 'touchend', this._eventHandlers.mouseup);\n                Util.addEvent(c, 'touchmove', this._eventHandlers.mousemove);\n            } else {\n                Util.addEvent(c, 'mousedown', this._eventHandlers.mousedown);\n                Util.addEvent(window, 'mouseup', this._eventHandlers.mouseup);\n                Util.addEvent(c, 'mouseup', this._eventHandlers.mouseup);\n                Util.addEvent(c, 'mousemove', this._eventHandlers.mousemove);\n                Util.addEvent(c, (Util.Engine.gecko) ? 'DOMMouseScroll' : 'mousewheel',\n                              this._eventHandlers.mousewheel);\n            }\n\n            /* Work around right and middle click browser behaviors */\n            Util.addEvent(document, 'click', this._eventHandlers.mousedisable);\n            Util.addEvent(document.body, 'contextmenu', this._eventHandlers.mousedisable);\n        },\n\n        ungrab: function () {\n            var c = this._target;\n\n            if ('ontouchstart' in document.documentElement) {\n                Util.removeEvent(c, 'touchstart', this._eventHandlers.mousedown);\n                Util.removeEvent(window, 'touchend', this._eventHandlers.mouseup);\n                Util.removeEvent(c, 'touchend', this._eventHandlers.mouseup);\n                Util.removeEvent(c, 'touchmove', this._eventHandlers.mousemove);\n            } else {\n                Util.removeEvent(c, 'mousedown', this._eventHandlers.mousedown);\n                Util.removeEvent(window, 'mouseup', this._eventHandlers.mouseup);\n                Util.removeEvent(c, 'mouseup', this._eventHandlers.mouseup);\n                Util.removeEvent(c, 'mousemove', this._eventHandlers.mousemove);\n                Util.removeEvent(c, (Util.Engine.gecko) ? 'DOMMouseScroll' : 'mousewheel',\n                                 this._eventHandlers.mousewheel);\n            }\n\n            /* Work around right and middle click browser behaviors */\n            Util.removeEvent(document, 'click', this._eventHandlers.mousedisable);\n            Util.removeEvent(document.body, 'contextmenu', this._eventHandlers.mousedisable);\n\n        }\n    };\n\n    Util.make_properties(Mouse, [\n        ['target',         'ro', 'dom'],   // DOM element that captures mouse input\n        ['notify',         'ro', 'func'],  // Function to call to notify whenever a mouse event is received\n        ['focused',        'rw', 'bool'],  // Capture and send mouse clicks/movement\n        ['scale',          'rw', 'float'], // Viewport scale factor 0.0 - 1.0\n\n        ['onMouseButton',  'rw', 'func'],  // Handler for mouse button click/release\n        ['onMouseMove',    'rw', 'func'],  // Handler for mouse movement\n        ['touchButton',    'rw', 'int']    // Button mask (1, 2, 4) for touch devices (0 means ignore clicks)\n    ]);\n})();\n\ndefine(\"vnc-input\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * noVNC: HTML5 VNC client\n * Copyright (C) 2012 Joel Martin\n * Licensed under MPL 2.0 (see LICENSE.txt)\n *\n * See README.md for usage and integration instructions.\n */\n\n/*jslint browser: true, white: false */\n/*global Util, Base64, changeCursor */\n\nvar Display;\n\n(function () {\n    \"use strict\";\n\n    Display = function (defaults) {\n        this._drawCtx = null;\n        this._c_forceCanvas = false;\n\n        this._renderQ = [];  // queue drawing actions for in-oder rendering\n\n        // the full frame buffer (logical canvas) size\n        this._fb_width = 0;\n        this._fb_height = 0;\n\n        // the visible \"physical canvas\" viewport\n        this._viewportLoc = { 'x': 0, 'y': 0, 'w': 0, 'h': 0 };\n        this._cleanRect = { 'x1': 0, 'y1': 0, 'x2': -1, 'y2': -1 };\n\n        this._prevDrawStyle = \"\";\n        this._tile = null;\n        this._tile16x16 = null;\n        this._tile_x = 0;\n        this._tile_y = 0;\n\n        Util.set_defaults(this, defaults, {\n            'true_color': true,\n            'colourMap': [],\n            'scale': 1.0,\n            'viewport': false,\n            'render_mode': ''\n        });\n\n        Util.Debug(\">> Display.constructor\");\n\n        if (!this._target) {\n            throw new Error(\"Target must be set\");\n        }\n\n        if (typeof this._target === 'string') {\n            throw new Error('target must be a DOM element');\n        }\n\n        if (!this._target.getContext) {\n            throw new Error(\"no getContext method\");\n        }\n\n        if (!this._drawCtx) {\n            this._drawCtx = this._target.getContext('2d');\n        }\n\n        Util.Debug(\"User Agent: \" + navigator.userAgent);\n        if (Util.Engine.gecko) { Util.Debug(\"Browser: gecko \" + Util.Engine.gecko); }\n        if (Util.Engine.webkit) { Util.Debug(\"Browser: webkit \" + Util.Engine.webkit); }\n        if (Util.Engine.trident) { Util.Debug(\"Browser: trident \" + Util.Engine.trident); }\n        if (Util.Engine.presto) { Util.Debug(\"Browser: presto \" + Util.Engine.presto); }\n\n        this.clear();\n\n        // Check canvas features\n        if ('createImageData' in this._drawCtx) {\n            this._render_mode = 'canvas rendering';\n        } else {\n            throw new Error(\"Canvas does not support createImageData\");\n        }\n\n        if (this._prefer_js === null) {\n            Util.Info(\"Prefering javascript operations\");\n            this._prefer_js = true;\n        }\n\n        // Determine browser support for setting the cursor via data URI scheme\n        var curDat = [];\n        for (var i = 0; i < 8 * 8 * 4; i++) {\n            curDat.push(255);\n        }\n        try {\n            var curSave = this._target.style.cursor;\n            Display.changeCursor(this._target, curDat, curDat, 2, 2, 8, 8);\n            if (this._target.style.cursor) {\n                if (this._cursor_uri === null || this._cursor_uri === undefined) {\n                    this._cursor_uri = true;\n                }\n                Util.Info(\"Data URI scheme cursor supported\");\n            } else {\n                if (this._cursor_uri === null || this._cursor_uri === undefined) {\n                    this._cursor_uri = false;\n                }\n                Util.Warn(\"Data URI scheme cursor not supported\");\n            }\n            this._target.style.cursor = curSave;\n        } catch (exc) {\n            Util.Error(\"Data URI scheme cursor test exception: \" + exc);\n            this._cursor_uri = false;\n        }\n\n        Util.Debug(\"<< Display.constructor\");\n    };\n\n    Display.prototype = {\n        // Public methods\n        viewportChange: function (deltaX, deltaY, width, height) {\n            var vp = this._viewportLoc;\n            var cr = this._cleanRect;\n            var canvas = this._target;\n\n            if (!this._viewport) {\n                Util.Debug(\"Setting viewport to full display region\");\n                deltaX = -vp.w;  // clamped later of out of bounds\n                deltaY = -vp.h;\n                width = this._fb_width;\n                height = this._fb_height;\n            }\n\n            if (typeof(deltaX) === \"undefined\") { deltaX = 0; }\n            if (typeof(deltaY) === \"undefined\") { deltaY = 0; }\n            if (typeof(width) === \"undefined\") { width = vp.w; }\n            if (typeof(height) === \"undefined\") { height = vp.h; }\n\n            // Size change\n            if (width > this._fb_width) { width = this._fb_width; }\n            if (height > this._fb_height) { height = this._fb_height; }\n\n            if (vp.w !== width || vp.h !== height) {\n                // Change width\n                if (width < vp.w &&  cr.x2 > vp.x + width - 1) {\n                    cr.x2 = vp.x + width - 1;\n                }\n                vp.w = width;\n\n                // Change height\n                if (height < vp.h &&  cr.y2 > vp.y + height - 1) {\n                    cr.y2 = vp.y + height - 1;\n                }\n                vp.h = height;\n\n                var saveImg = null;\n                if (vp.w > 0 && vp.h > 0 && canvas.width > 0 && canvas.height > 0) {\n                    var img_width = canvas.width < vp.w ? canvas.width : vp.w;\n                    var img_height = canvas.height < vp.h ? canvas.height : vp.h;\n                    saveImg = this._drawCtx.getImageData(0, 0, img_width, img_height);\n                }\n\n                canvas.width = vp.w;\n                canvas.height = vp.h;\n\n                if (saveImg) {\n                    this._drawCtx.putImageData(saveImg, 0, 0);\n                }\n            }\n\n            var vx2 = vp.x + vp.w - 1;\n            var vy2 = vp.y + vp.h - 1;\n\n            // Position change\n\n            if (deltaX < 0 && vp.x + deltaX < 0) {\n                deltaX = -vp.x;\n            }\n            if (vx2 + deltaX >= this._fb_width) {\n                deltaX -= vx2 + deltaX - this._fb_width + 1;\n            }\n\n            if (vp.y + deltaY < 0) {\n                deltaY = -vp.y;\n            }\n            if (vy2 + deltaY >= this._fb_height) {\n                deltaY -= (vy2 + deltaY - this._fb_height + 1);\n            }\n\n            if (deltaX === 0 && deltaY === 0) {\n                return;\n            }\n            Util.Debug(\"viewportChange deltaX: \" + deltaX + \", deltaY: \" + deltaY);\n\n            vp.x += deltaX;\n            vx2 += deltaX;\n            vp.y += deltaY;\n            vy2 += deltaY;\n\n            // Update the clean rectangle\n            if (vp.x > cr.x1) {\n                cr.x1 = vp.x;\n            }\n            if (vx2 < cr.x2) {\n                cr.x2 = vx2;\n            }\n            if (vp.y > cr.y1) {\n                cr.y1 = vp.y;\n            }\n            if (vy2 < cr.y2) {\n                cr.y2 = vy2;\n            }\n\n            var x1, w;\n            if (deltaX < 0) {\n                // Shift viewport left, redraw left section\n                x1 = 0;\n                w = -deltaX;\n            } else {\n                // Shift viewport right, redraw right section\n                x1 = vp.w - deltaX;\n                w = deltaX;\n            }\n\n            var y1, h;\n            if (deltaY < 0) {\n                // Shift viewport up, redraw top section\n                y1 = 0;\n                h = -deltaY;\n            } else {\n                // Shift viewport down, redraw bottom section\n                y1 = vp.h - deltaY;\n                h = deltaY;\n            }\n\n            // Copy the valid part of the viewport to the shifted location\n            var saveStyle = this._drawCtx.fillStyle;\n            this._drawCtx.fillStyle = \"rgb(255,255,255)\";\n            if (deltaX !== 0) {\n                this._drawCtx.drawImage(canvas, 0, 0, vp.w, vp.h, -deltaX, 0, vp.w, vp.h);\n                this._drawCtx.fillRect(x1, 0, w, vp.h);\n            }\n            if (deltaY !== 0) {\n                this._drawCtx.drawImage(canvas, 0, 0, vp.w, vp.h, 0, -deltaY, vp.w, vp.h);\n                this._drawCtx.fillRect(0, y1, vp.w, h);\n            }\n            this._drawCtx.fillStyle = saveStyle;\n        },\n\n        // Return a map of clean and dirty areas of the viewport and reset the\n        // tracking of clean and dirty areas\n        //\n        // Returns: { 'cleanBox': { 'x': x, 'y': y, 'w': w, 'h': h},\n        //            'dirtyBoxes': [{ 'x': x, 'y': y, 'w': w, 'h': h }, ...] }\n        getCleanDirtyReset: function () {\n            var vp = this._viewportLoc;\n            var cr = this._cleanRect;\n\n            var cleanBox = { 'x': cr.x1, 'y': cr.y1,\n                             'w': cr.x2 - cr.x1 + 1, 'h': cr.y2 - cr.y1 + 1 };\n\n            var dirtyBoxes = [];\n            if (cr.x1 >= cr.x2 || cr.y1 >= cr.y2) {\n                // Whole viewport is dirty\n                dirtyBoxes.push({ 'x': vp.x, 'y': vp.y, 'w': vp.w, 'h': vp.h });\n            } else {\n                // Redraw dirty regions\n                var vx2 = vp.x + vp.w - 1;\n                var vy2 = vp.y + vp.h - 1;\n\n                if (vp.x < cr.x1) {\n                    // left side dirty region\n                    dirtyBoxes.push({'x': vp.x, 'y': vp.y,\n                                     'w': cr.x1 - vp.x + 1, 'h': vp.h});\n                }\n                if (vx2 > cr.x2) {\n                    // right side dirty region\n                    dirtyBoxes.push({'x': cr.x2 + 1, 'y': vp.y,\n                                     'w': vx2 - cr.x2, 'h': vp.h});\n                }\n                if(vp.y < cr.y1) {\n                    // top/middle dirty region\n                    dirtyBoxes.push({'x': cr.x1, 'y': vp.y,\n                                     'w': cr.x2 - cr.x1 + 1, 'h': cr.y1 - vp.y});\n                }\n                if (vy2 > cr.y2) {\n                    // bottom/middle dirty region\n                    dirtyBoxes.push({'x': cr.x1, 'y': cr.y2 + 1,\n                                     'w': cr.x2 - cr.x1 + 1, 'h': vy2 - cr.y2});\n                }\n            }\n\n            this._cleanRect = {'x1': vp.x, 'y1': vp.y,\n                               'x2': vp.x + vp.w - 1, 'y2': vp.y + vp.h - 1};\n\n            return {'cleanBox': cleanBox, 'dirtyBoxes': dirtyBoxes};\n        },\n\n        absX: function (x) {\n            return x + this._viewportLoc.x;\n        },\n\n        absY: function (y) {\n            return y + this._viewportLoc.y;\n        },\n\n        resize: function (width, height) {\n            this._prevDrawStyle = \"\";\n\n            this._fb_width = width;\n            this._fb_height = height;\n\n            this._rescale(this._scale);\n\n            this.viewportChange();\n        },\n\n        clear: function () {\n            if (this._logo) {\n                this.resize(this._logo.width, this._logo.height);\n                this.blitStringImage(this._logo.data, 0, 0);\n            } else {\n                if (Util.Engine.trident === 6) {\n                    // NB(directxman12): there's a bug in IE10 where we can fail to actually\n                    //                   clear the canvas here because of the resize.\n                    //                   Clearing the current viewport first fixes the issue\n                    this._drawCtx.clearRect(0, 0, this._viewportLoc.w, this._viewportLoc.h);\n                }\n                this.resize(240, 20);\n                this._drawCtx.clearRect(0, 0, this._viewportLoc.w, this._viewportLoc.h);\n            }\n\n            this._renderQ = [];\n        },\n\n        fillRect: function (x, y, width, height, color) {\n            this._setFillColor(color);\n            this._drawCtx.fillRect(x - this._viewportLoc.x, y - this._viewportLoc.y, width, height);\n        },\n\n        copyImage: function (old_x, old_y, new_x, new_y, w, h) {\n            var x1 = old_x - this._viewportLoc.x;\n            var y1 = old_y - this._viewportLoc.y;\n            var x2 = new_x - this._viewportLoc.x;\n            var y2 = new_y - this._viewportLoc.y;\n\n            this._drawCtx.drawImage(this._target, x1, y1, w, h, x2, y2, w, h);\n        },\n\n        // start updating a tile\n        startTile: function (x, y, width, height, color) {\n            this._tile_x = x;\n            this._tile_y = y;\n            if (width === 16 && height === 16) {\n                this._tile = this._tile16x16;\n            } else {\n                this._tile = this._drawCtx.createImageData(width, height);\n            }\n\n            if (this._prefer_js) {\n                var bgr;\n                if (this._true_color) {\n                    bgr = color;\n                } else {\n                    bgr = this._colourMap[color[0]];\n                }\n                var red = bgr[2];\n                var green = bgr[1];\n                var blue = bgr[0];\n\n                var data = this._tile.data;\n                for (var i = 0; i < width * height * 4; i += 4) {\n                    data[i] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = 255;\n                }\n            } else {\n                this.fillRect(x, y, width, height, color);\n            }\n        },\n\n        // update sub-rectangle of the current tile\n        subTile: function (x, y, w, h, color) {\n            if (this._prefer_js) {\n                var bgr;\n                if (this._true_color) {\n                    bgr = color;\n                } else {\n                    bgr = this._colourMap[color[0]];\n                }\n                var red = bgr[2];\n                var green = bgr[1];\n                var blue = bgr[0];\n                var xend = x + w;\n                var yend = y + h;\n\n                var data = this._tile.data;\n                var width = this._tile.width;\n                for (var j = y; j < yend; j++) {\n                    for (var i = x; i < xend; i++) {\n                        var p = (i + (j * width)) * 4;\n                        data[p] = red;\n                        data[p + 1] = green;\n                        data[p + 2] = blue;\n                        data[p + 3] = 255;\n                    }\n                }\n            } else {\n                this.fillRect(this._tile_x + x, this._tile_y + y, w, h, color);\n            }\n        },\n\n        // draw the current tile to the screen\n        finishTile: function () {\n            if (this._prefer_js) {\n                this._drawCtx.putImageData(this._tile, this._tile_x - this._viewportLoc.x,\n                                           this._tile_y - this._viewportLoc.y);\n            }\n            // else: No-op -- already done by setSubTile\n        },\n\n        blitImage: function (x, y, width, height, arr, offset) {\n            if (this._true_color) {\n                this._bgrxImageData(x, y, this._viewportLoc.x, this._viewportLoc.y, width, height, arr, offset);\n            } else {\n                this._cmapImageData(x, y, this._viewportLoc.x, this._viewportLoc.y, width, height, arr, offset);\n            }\n        },\n\n        blitRgbImage: function (x, y , width, height, arr, offset) {\n            if (this._true_color) {\n                this._rgbImageData(x, y, this._viewportLoc.x, this._viewportLoc.y, width, height, arr, offset);\n            } else {\n                // probably wrong?\n                this._cmapImageData(x, y, this._viewportLoc.x, this._viewportLoc.y, width, height, arr, offset);\n            }\n        },\n\n        blitStringImage: function (str, x, y) {\n            var img = new Image();\n            img.onload = function () {\n                this._drawCtx.drawImage(img, x - this._viewportLoc.x, y - this._viewportLoc.y);\n            }.bind(this);\n            img.src = str;\n            return img; // for debugging purposes\n        },\n\n        // wrap ctx.drawImage but relative to viewport\n        drawImage: function (img, x, y) {\n            this._drawCtx.drawImage(img, x - this._viewportLoc.x, y - this._viewportLoc.y);\n        },\n\n        renderQ_push: function (action) {\n            this._renderQ.push(action);\n            if (this._renderQ.length === 1) {\n                // If this can be rendered immediately it will be, otherwise\n                // the scanner will start polling the queue (every\n                // requestAnimationFrame interval)\n                this._scan_renderQ();\n            }\n        },\n\n        changeCursor: function (pixels, mask, hotx, hoty, w, h) {\n            if (this._cursor_uri === false) {\n                Util.Warn(\"changeCursor called but no cursor data URI support\");\n                return;\n            }\n\n            if (this._true_color) {\n                Display.changeCursor(this._target, pixels, mask, hotx, hoty, w, h);\n            } else {\n                Display.changeCursor(this._target, pixels, mask, hotx, hoty, w, h, this._colourMap);\n            }\n        },\n\n        defaultCursor: function () {\n            this._target.style.cursor = \"default\";\n        },\n\n        // Overridden getters/setters\n        get_context: function () {\n            return this._drawCtx;\n        },\n\n        set_scale: function (scale) {\n            this._rescale(scale);\n        },\n\n        set_width: function (w) {\n            this.resize(w, this._fb_height);\n        },\n        get_width: function () {\n            return this._fb_width;\n        },\n\n        set_height: function (h) {\n            this.resize(this._fb_width, h);\n        },\n        get_height: function () {\n            return this._fb_height;\n        },\n\n        // Private Methods\n        _rescale: function (factor) {\n            var canvas = this._target;\n            var properties = ['transform', 'WebkitTransform', 'MozTransform'];\n            var transform_prop;\n            while ((transform_prop = properties.shift())) {\n                if (typeof canvas.style[transform_prop] !== 'undefined') {\n                    break;\n                }\n            }\n\n            if (transform_prop === null) {\n                Util.Debug(\"No scaling support\");\n                return;\n            }\n\n            if (typeof(factor) === \"undefined\") {\n                factor = this._scale;\n            } else if (factor > 1.0) {\n                factor = 1.0;\n            } else if (factor < 0.1) {\n                factor = 0.1;\n            }\n\n            if (this._scale === factor) {\n                return;\n            }\n\n            this._scale = factor;\n            var x = canvas.width - (canvas.width * factor);\n            var y = canvas.height - (canvas.height * factor);\n            canvas.style[transform_prop] = 'scale(' + this._scale + ') translate(-' + x + 'px, -' + y + 'px)';\n        },\n\n        _setFillColor: function (color) {\n            var bgr;\n            if (this._true_color) {\n                bgr = color;\n            } else {\n                bgr = this._colourMap[color[0]];\n            }\n\n            var newStyle = 'rgb(' + bgr[2] + ',' + bgr[1] + ',' + bgr[0] + ')';\n            if (newStyle !== this._prevDrawStyle) {\n                this._drawCtx.fillStyle = newStyle;\n                this._prevDrawStyle = newStyle;\n            }\n        },\n\n        _rgbImageData: function (x, y, vx, vy, width, height, arr, offset) {\n            var img = this._drawCtx.createImageData(width, height);\n            var data = img.data;\n            for (var i = 0, j = offset; i < width * height * 4; i += 4, j += 3) {\n                data[i]     = arr[j];\n                data[i + 1] = arr[j + 1];\n                data[i + 2] = arr[j + 2];\n                data[i + 3] = 255;  // Alpha\n            }\n            this._drawCtx.putImageData(img, x - vx, y - vy);\n        },\n\n        _bgrxImageData: function (x, y, vx, vy, width, height, arr, offset) {\n            var img = this._drawCtx.createImageData(width, height);\n            var data = img.data;\n            for (var i = 0, j = offset; i < width * height * 4; i += 4, j += 4) {\n                data[i]     = arr[j + 2];\n                data[i + 1] = arr[j + 1];\n                data[i + 2] = arr[j];\n                data[i + 3] = 255;  // Alpha\n            }\n            this._drawCtx.putImageData(img, x - vx, y - vy);\n        },\n\n        _cmapImageData: function (x, y, vx, vy, width, height, arr, offset) {\n            var img = this._drawCtx.createImageData(width, height);\n            var data = img.data;\n            var cmap = this._colourMap;\n            for (var i = 0, j = offset; i < width * height * 4; i += 4, j++) {\n                var bgr = cmap[arr[j]];\n                data[i]     = bgr[2];\n                data[i + 1] = bgr[1];\n                data[i + 2] = bgr[0];\n                data[i + 3] = 255;  // Alpha\n            }\n            this._drawCtx.putImageData(img, x - vx, y - vy);\n        },\n\n        _scan_renderQ: function () {\n            var ready = true;\n            while (ready && this._renderQ.length > 0) {\n                var a = this._renderQ[0];\n                switch (a.type) {\n                    case 'copy':\n                        this.copyImage(a.old_x, a.old_y, a.x, a.y, a.width, a.height);\n                        break;\n                    case 'fill':\n                        this.fillRect(a.x, a.y, a.width, a.height, a.color);\n                        break;\n                    case 'blit':\n                        this.blitImage(a.x, a.y, a.width, a.height, a.data, 0);\n                        break;\n                    case 'blitRgb':\n                        this.blitRgbImage(a.x, a.y, a.width, a.height, a.data, 0);\n                        break;\n                    case 'img':\n                        if (a.img.complete) {\n                            this.drawImage(a.img, a.x, a.y);\n                        } else {\n                            // We need to wait for this image to 'load'\n                            // to keep things in-order\n                            ready = false;\n                        }\n                        break;\n                }\n\n                if (ready) {\n                    this._renderQ.shift();\n                }\n            }\n\n            if (this._renderQ.length > 0) {\n                requestAnimFrame(this._scan_renderQ.bind(this));\n            }\n        },\n    };\n\n    Util.make_properties(Display, [\n        ['target', 'wo', 'dom'],       // Canvas element for rendering\n        ['context', 'ro', 'raw'],      // Canvas 2D context for rendering (read-only)\n        ['logo', 'rw', 'raw'],         // Logo to display when cleared: {\"width\": w, \"height\": h, \"data\": data}\n        ['true_color', 'rw', 'bool'],  // Use true-color pixel data\n        ['colourMap', 'rw', 'arr'],    // Colour map array (when not true-color)\n        ['scale', 'rw', 'float'],      // Display area scale factor 0.0 - 1.0\n        ['viewport', 'rw', 'bool'],    // Use a viewport set with viewportChange()\n        ['width', 'rw', 'int'],        // Display area width\n        ['height', 'rw', 'int'],       // Display area height\n\n        ['render_mode', 'ro', 'str'],  // Canvas rendering mode (read-only)\n\n        ['prefer_js', 'rw', 'str'],    // Prefer Javascript over canvas methods\n        ['cursor_uri', 'rw', 'raw']    // Can we render cursor using data URI\n    ]);\n\n    // Class Methods\n    Display.changeCursor = function (target, pixels, mask, hotx, hoty, w0, h0, cmap) {\n        var w = w0;\n        var h = h0;\n        if (h < w) {\n            h = w;  // increase h to make it square\n        } else {\n            w = h;  // increase w to make it square\n        }\n\n        var cur = [];\n\n        // Push multi-byte little-endian values\n        cur.push16le = function (num) {\n            this.push(num & 0xFF, (num >> 8) & 0xFF);\n        };\n        cur.push32le = function (num) {\n            this.push(num & 0xFF,\n                      (num >> 8) & 0xFF,\n                      (num >> 16) & 0xFF,\n                      (num >> 24) & 0xFF);\n        };\n\n        var IHDRsz = 40;\n        var RGBsz = w * h * 4;\n        var XORsz = Math.ceil((w * h) / 8.0);\n        var ANDsz = Math.ceil((w * h) / 8.0);\n\n        cur.push16le(0);        // 0: Reserved\n        cur.push16le(2);        // 2: .CUR type\n        cur.push16le(1);        // 4: Number of images, 1 for non-animated ico\n\n        // Cursor #1 header (ICONDIRENTRY)\n        cur.push(w);            // 6: width\n        cur.push(h);            // 7: height\n        cur.push(0);            // 8: colors, 0 -> true-color\n        cur.push(0);            // 9: reserved\n        cur.push16le(hotx);     // 10: hotspot x coordinate\n        cur.push16le(hoty);     // 12: hotspot y coordinate\n        cur.push32le(IHDRsz + RGBsz + XORsz + ANDsz);\n                                // 14: cursor data byte size\n        cur.push32le(22);       // 18: offset of cursor data in the file\n\n        // Cursor #1 InfoHeader (ICONIMAGE/BITMAPINFO)\n        cur.push32le(IHDRsz);   // 22: InfoHeader size\n        cur.push32le(w);        // 26: Cursor width\n        cur.push32le(h * 2);    // 30: XOR+AND height\n        cur.push16le(1);        // 34: number of planes\n        cur.push16le(32);       // 36: bits per pixel\n        cur.push32le(0);        // 38: Type of compression\n\n        cur.push32le(XORsz + ANDsz);\n                                // 42: Size of Image\n        cur.push32le(0);        // 46: reserved\n        cur.push32le(0);        // 50: reserved\n        cur.push32le(0);        // 54: reserved\n        cur.push32le(0);        // 58: reserved\n\n        // 62: color data (RGBQUAD icColors[])\n        var y, x;\n        for (y = h - 1; y >= 0; y--) {\n            for (x = 0; x < w; x++) {\n                if (x >= w0 || y >= h0) {\n                    cur.push(0);  // blue\n                    cur.push(0);  // green\n                    cur.push(0);  // red\n                    cur.push(0);  // alpha\n                } else {\n                    var idx = y * Math.ceil(w0 / 8) + Math.floor(x / 8);\n                    var alpha = (mask[idx] << (x % 8)) & 0x80 ? 255 : 0;\n                    if (cmap) {\n                        idx = (w0 * y) + x;\n                        var rgb = cmap[pixels[idx]];\n                        cur.push(rgb[2]);  // blue\n                        cur.push(rgb[1]);  // green\n                        cur.push(rgb[0]);  // red\n                        cur.push(alpha);   // alpha\n                    } else {\n                        idx = ((w0 * y) + x) * 4;\n                        cur.push(pixels[idx + 2]); // blue\n                        cur.push(pixels[idx + 1]); // green\n                        cur.push(pixels[idx]);     // red\n                        cur.push(alpha);           // alpha\n                    }\n                }\n            }\n        }\n\n        // XOR/bitmask data (BYTE icXOR[])\n        // (ignored, just needs to be the right size)\n        for (y = 0; y < h; y++) {\n            for (x = 0; x < Math.ceil(w / 8); x++) {\n                cur.push(0);\n            }\n        }\n\n        // AND/bitmask data (BYTE icAND[])\n        // (ignored, just needs to be the right size)\n        for (y = 0; y < h; y++) {\n            for (x = 0; x < Math.ceil(w / 8); x++) {\n                cur.push(0);\n            }\n        }\n\n        var url = 'data:image/x-icon;base64,' + Base64.encode(cur);\n        target.style.cursor = 'url(' + url + ')' + hotx + ' ' + hoty + ', default';\n    };\n})();\n\ndefine(\"vnc-display\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * JSUnzip\n *\n * Copyright (c) 2011 by Erik Moller\n * All Rights Reserved\n *\n * This software is provided 'as-is', without any express\n * or implied warranty.  In no event will the authors be\n * held liable for any damages arising from the use of\n * this software.\n *\n * Permission is granted to anyone to use this software\n * for any purpose, including commercial applications,\n * and to alter it and redistribute it freely, subject to\n * the following restrictions:\n *\n * 1. The origin of this software must not be\n *    misrepresented; you must not claim that you\n *    wrote the original software. If you use this\n *    software in a product, an acknowledgment in\n *    the product documentation would be appreciated\n *    but is not required.\n *\n * 2. Altered source versions must be plainly marked\n *    as such, and must not be misrepresented as\n *    being the original software.\n *\n * 3. This notice may not be removed or altered from\n *    any source distribution.\n */\n \nvar tinf;\n\nfunction JSUnzip() {\n\n    this.getInt = function(offset, size) {\n        switch (size) {\n        case 4:\n            return  (this.data.charCodeAt(offset + 3) & 0xff) << 24 | \n                    (this.data.charCodeAt(offset + 2) & 0xff) << 16 | \n                    (this.data.charCodeAt(offset + 1) & 0xff) << 8 | \n                    (this.data.charCodeAt(offset + 0) & 0xff);\n            break;\n        case 2:\n            return  (this.data.charCodeAt(offset + 1) & 0xff) << 8 | \n                    (this.data.charCodeAt(offset + 0) & 0xff);\n            break;\n        default:\n            return this.data.charCodeAt(offset) & 0xff;\n            break;\n        }\n    };\n\n    this.getDOSDate = function(dosdate, dostime) {\n        var day = dosdate & 0x1f;\n        var month = ((dosdate >> 5) & 0xf) - 1;\n        var year = 1980 + ((dosdate >> 9) & 0x7f)\n        var second = (dostime & 0x1f) * 2;\n        var minute = (dostime >> 5) & 0x3f;\n        hour = (dostime >> 11) & 0x1f;\n        return new Date(year, month, day, hour, minute, second);\n    }\n\n    this.open = function(data) {\n        this.data = data;\n        this.files = [];\n\n        if (this.data.length < 22)\n            return { 'status' : false, 'error' : 'Invalid data' };\n        var endOfCentralDirectory = this.data.length - 22;\n        while (endOfCentralDirectory >= 0 && this.getInt(endOfCentralDirectory, 4) != 0x06054b50)\n            --endOfCentralDirectory;\n        if (endOfCentralDirectory < 0)\n            return { 'status' : false, 'error' : 'Invalid data' };\n        if (this.getInt(endOfCentralDirectory + 4, 2) != 0 || this.getInt(endOfCentralDirectory + 6, 2) != 0)\n            return { 'status' : false, 'error' : 'No multidisk support' };\n\n        var entriesInThisDisk = this.getInt(endOfCentralDirectory + 8, 2);\n        var centralDirectoryOffset = this.getInt(endOfCentralDirectory + 16, 4);\n        var globalCommentLength = this.getInt(endOfCentralDirectory + 20, 2);\n        this.comment = this.data.slice(endOfCentralDirectory + 22, endOfCentralDirectory + 22 + globalCommentLength);\n\n        var fileOffset = centralDirectoryOffset;\n\n        for (var i = 0; i < entriesInThisDisk; ++i) {\n            if (this.getInt(fileOffset + 0, 4) != 0x02014b50)\n                return { 'status' : false, 'error' : 'Invalid data' };\n            if (this.getInt(fileOffset + 6, 2) > 20)\n                return { 'status' : false, 'error' : 'Unsupported version' };\n            if (this.getInt(fileOffset + 8, 2) & 1)\n                return { 'status' : false, 'error' : 'Encryption not implemented' };\n\n            var compressionMethod = this.getInt(fileOffset + 10, 2);\n            if (compressionMethod != 0 && compressionMethod != 8)\n                return { 'status' : false, 'error' : 'Unsupported compression method' };\n\n            var lastModFileTime = this.getInt(fileOffset + 12, 2);\n            var lastModFileDate = this.getInt(fileOffset + 14, 2);\n            var lastModifiedDate = this.getDOSDate(lastModFileDate, lastModFileTime);\n\n            var crc = this.getInt(fileOffset + 16, 4);\n            // TODO: crc\n\n            var compressedSize = this.getInt(fileOffset + 20, 4);\n            var uncompressedSize = this.getInt(fileOffset + 24, 4);\n\n            var fileNameLength = this.getInt(fileOffset + 28, 2);\n            var extraFieldLength = this.getInt(fileOffset + 30, 2);\n            var fileCommentLength = this.getInt(fileOffset + 32, 2);\n\n            var relativeOffsetOfLocalHeader = this.getInt(fileOffset + 42, 4);\n\n            var fileName = this.data.slice(fileOffset + 46, fileOffset + 46 + fileNameLength);\n            var fileComment = this.data.slice(fileOffset + 46 + fileNameLength + extraFieldLength, fileOffset + 46 + fileNameLength + extraFieldLength + fileCommentLength);\n\n            if (this.getInt(relativeOffsetOfLocalHeader + 0, 4) != 0x04034b50)\n                return { 'status' : false, 'error' : 'Invalid data' };\n            var localFileNameLength = this.getInt(relativeOffsetOfLocalHeader + 26, 2);\n            var localExtraFieldLength = this.getInt(relativeOffsetOfLocalHeader + 28, 2);\n            var localFileContent = relativeOffsetOfLocalHeader + 30 + localFileNameLength + localExtraFieldLength;\n\n            this.files[fileName] = \n            {\n                'fileComment' : fileComment,\n                'compressionMethod' : compressionMethod,\n                'compressedSize' : compressedSize,\n                'uncompressedSize' : uncompressedSize,\n                'localFileContent' : localFileContent,\n                'lastModifiedDate' : lastModifiedDate\n            };\n\n            fileOffset += 46 + fileNameLength + extraFieldLength + fileCommentLength;\n        }\n        return { 'status' : true }\n    };     \n    \n\n    this.read = function(fileName) {\n        var fileInfo = this.files[fileName];\n        if (fileInfo) {\n            if (fileInfo.compressionMethod == 8) {\n                if (!tinf) {\n                    tinf = new TINF();\n                    tinf.init();\n                }\n                var result = tinf.uncompress(this.data, fileInfo.localFileContent);\n                if (result.status == tinf.OK)\n                    return { 'status' : true, 'data' : result.data };\n                else\n                    return { 'status' : false, 'error' : result.error };\n            } else {\n                return { 'status' : true, 'data' : this.data.slice(fileInfo.localFileContent, fileInfo.localFileContent + fileInfo.uncompressedSize) };\n            }\n        }\n        return { 'status' : false, 'error' : \"File '\" + fileName + \"' doesn't exist in zip\" };\n    };\n    \n};\n\n\n\n/*\n * tinflate  -  tiny inflate\n *\n * Copyright (c) 2003 by Joergen Ibsen / Jibz\n * All Rights Reserved\n *\n * http://www.ibsensoftware.com/\n *\n * This software is provided 'as-is', without any express\n * or implied warranty.  In no event will the authors be\n * held liable for any damages arising from the use of\n * this software.\n *\n * Permission is granted to anyone to use this software\n * for any purpose, including commercial applications,\n * and to alter it and redistribute it freely, subject to\n * the following restrictions:\n *\n * 1. The origin of this software must not be\n *    misrepresented; you must not claim that you\n *    wrote the original software. If you use this\n *    software in a product, an acknowledgment in\n *    the product documentation would be appreciated\n *    but is not required.\n *\n * 2. Altered source versions must be plainly marked\n *    as such, and must not be misrepresented as\n *    being the original software.\n *\n * 3. This notice may not be removed or altered from\n *    any source distribution.\n */\n\n/*\n * tinflate javascript port by Erik Moller in May 2011.\n * emoller@opera.com\n * \n * read_bits() patched by mike@imidio.com to allow\n * reading more then 8 bits (needed in some zlib streams)\n */\n\n\"use strict\";\n\nfunction TINF() {\n    \nthis.OK = 0;\nthis.DATA_ERROR = (-3);\nthis.WINDOW_SIZE = 32768;\n\n/* ------------------------------ *\n * -- internal data structures -- *\n * ------------------------------ */\n\nthis.TREE = function() {\n   this.table = new Array(16);  /* table of code length counts */\n   this.trans = new Array(288); /* code -> symbol translation table */\n};\n\nthis.DATA = function(that) {\n   this.source = '';\n   this.sourceIndex = 0;\n   this.tag = 0;\n   this.bitcount = 0;\n\n   this.dest = [];\n   \n   this.history = [];\n\n   this.ltree = new that.TREE(); /* dynamic length/symbol tree */\n   this.dtree = new that.TREE(); /* dynamic distance tree */\n};\n\n/* --------------------------------------------------- *\n * -- uninitialized global data (static structures) -- *\n * --------------------------------------------------- */\n\nthis.sltree = new this.TREE(); /* fixed length/symbol tree */\nthis.sdtree = new this.TREE(); /* fixed distance tree */\n\n/* extra bits and base tables for length codes */\nthis.length_bits = new Array(30);\nthis.length_base = new Array(30);\n\n/* extra bits and base tables for distance codes */\nthis.dist_bits = new Array(30);\nthis.dist_base = new Array(30);\n\n/* special ordering of code length codes */\nthis.clcidx = [\n   16, 17, 18, 0, 8, 7, 9, 6,\n   10, 5, 11, 4, 12, 3, 13, 2,\n   14, 1, 15\n];\n\n/* ----------------------- *\n * -- utility functions -- *\n * ----------------------- */\n\n/* build extra bits and base tables */\nthis.build_bits_base = function(bits, base, delta, first)\n{\n   var i, sum;\n\n   /* build bits table */\n   for (i = 0; i < delta; ++i) bits[i] = 0;\n   for (i = 0; i < 30 - delta; ++i) bits[i + delta] = Math.floor(i / delta);\n\n   /* build base table */\n   for (sum = first, i = 0; i < 30; ++i)\n   {\n      base[i] = sum;\n      sum += 1 << bits[i];\n   }\n}\n\n/* build the fixed huffman trees */\nthis.build_fixed_trees = function(lt, dt)\n{\n   var i;\n\n   /* build fixed length tree */\n   for (i = 0; i < 7; ++i) lt.table[i] = 0;\n\n   lt.table[7] = 24;\n   lt.table[8] = 152;\n   lt.table[9] = 112;\n\n   for (i = 0; i < 24; ++i) lt.trans[i] = 256 + i;\n   for (i = 0; i < 144; ++i) lt.trans[24 + i] = i;\n   for (i = 0; i < 8; ++i) lt.trans[24 + 144 + i] = 280 + i;\n   for (i = 0; i < 112; ++i) lt.trans[24 + 144 + 8 + i] = 144 + i;\n\n   /* build fixed distance tree */\n   for (i = 0; i < 5; ++i) dt.table[i] = 0;\n\n   dt.table[5] = 32;\n\n   for (i = 0; i < 32; ++i) dt.trans[i] = i;\n}\n\n/* given an array of code lengths, build a tree */\nthis.build_tree = function(t, lengths, loffset, num)\n{\n   var offs = new Array(16);\n   var i, sum;\n\n   /* clear code length count table */\n   for (i = 0; i < 16; ++i) t.table[i] = 0;\n\n   /* scan symbol lengths, and sum code length counts */\n   for (i = 0; i < num; ++i) t.table[lengths[loffset + i]]++;\n\n   t.table[0] = 0;\n\n   /* compute offset table for distribution sort */\n   for (sum = 0, i = 0; i < 16; ++i)\n   {\n      offs[i] = sum;\n      sum += t.table[i];\n   }\n\n   /* create code->symbol translation table (symbols sorted by code) */\n   for (i = 0; i < num; ++i)\n   {\n      if (lengths[loffset + i]) t.trans[offs[lengths[loffset + i]]++] = i;\n   }\n}\n\n/* ---------------------- *\n * -- decode functions -- *\n * ---------------------- */\n\n/* get one bit from source stream */\nthis.getbit = function(d)\n{\n   var bit;\n\n   /* check if tag is empty */\n   if (!d.bitcount--)\n   {\n      /* load next tag */\n      d.tag = d.source[d.sourceIndex++] & 0xff;\n      d.bitcount = 7;\n   }\n\n   /* shift bit out of tag */\n   bit = d.tag & 0x01;\n   d.tag >>= 1;\n\n   return bit;\n}\n\n/* read a num bit value from a stream and add base */\nfunction read_bits_direct(source, bitcount, tag, idx, num)\n{\n    var val = 0;\n    while (bitcount < 24) {\n        tag = tag | (source[idx++] & 0xff) << bitcount;\n        bitcount += 8;\n    }\n    val = tag & (0xffff >> (16 - num));\n    tag >>= num;\n    bitcount -= num;\n    return [bitcount, tag, idx, val];\n}\nthis.read_bits = function(d, num, base)\n{\n    if (!num)\n        return base;\n\n    var ret = read_bits_direct(d.source, d.bitcount, d.tag, d.sourceIndex, num);\n    d.bitcount = ret[0];\n    d.tag = ret[1];\n    d.sourceIndex = ret[2];\n    return ret[3] + base;\n}\n\n/* given a data stream and a tree, decode a symbol */\nthis.decode_symbol = function(d, t)\n{\n    while (d.bitcount < 16) {\n        d.tag = d.tag | (d.source[d.sourceIndex++] & 0xff) << d.bitcount;\n        d.bitcount += 8;\n    }\n    \n    var sum = 0, cur = 0, len = 0;\n    do {\n        cur = 2 * cur + ((d.tag & (1 << len)) >> len);\n\n        ++len;\n\n        sum += t.table[len];\n        cur -= t.table[len];\n\n    } while (cur >= 0);\n\n    d.tag >>= len;\n    d.bitcount -= len;\n\n    return t.trans[sum + cur];\n}\n\n/* given a data stream, decode dynamic trees from it */\nthis.decode_trees = function(d, lt, dt)\n{\n   var code_tree = new this.TREE();\n   var lengths = new Array(288+32);\n   var hlit, hdist, hclen;\n   var i, num, length;\n\n   /* get 5 bits HLIT (257-286) */\n   hlit = this.read_bits(d, 5, 257);\n\n   /* get 5 bits HDIST (1-32) */\n   hdist = this.read_bits(d, 5, 1);\n\n   /* get 4 bits HCLEN (4-19) */\n   hclen = this.read_bits(d, 4, 4);\n\n   for (i = 0; i < 19; ++i) lengths[i] = 0;\n\n   /* read code lengths for code length alphabet */\n   for (i = 0; i < hclen; ++i)\n   {\n      /* get 3 bits code length (0-7) */\n      var clen = this.read_bits(d, 3, 0);\n\n      lengths[this.clcidx[i]] = clen;\n   }\n\n   /* build code length tree */\n   this.build_tree(code_tree, lengths, 0, 19);\n\n   /* decode code lengths for the dynamic trees */\n   for (num = 0; num < hlit + hdist; )\n   {\n      var sym = this.decode_symbol(d, code_tree);\n\n      switch (sym)\n      {\n      case 16:\n         /* copy previous code length 3-6 times (read 2 bits) */\n         {\n            var prev = lengths[num - 1];\n            for (length = this.read_bits(d, 2, 3); length; --length)\n            {\n               lengths[num++] = prev;\n            }\n         }\n         break;\n      case 17:\n         /* repeat code length 0 for 3-10 times (read 3 bits) */\n         for (length = this.read_bits(d, 3, 3); length; --length)\n         {\n            lengths[num++] = 0;\n         }\n         break;\n      case 18:\n         /* repeat code length 0 for 11-138 times (read 7 bits) */\n         for (length = this.read_bits(d, 7, 11); length; --length)\n         {\n            lengths[num++] = 0;\n         }\n         break;\n      default:\n         /* values 0-15 represent the actual code lengths */\n         lengths[num++] = sym;\n         break;\n      }\n   }\n\n   /* build dynamic trees */\n   this.build_tree(lt, lengths, 0, hlit);\n   this.build_tree(dt, lengths, hlit, hdist);\n}\n\n/* ----------------------------- *\n * -- block inflate functions -- *\n * ----------------------------- */\n\n/* given a stream and two trees, inflate a block of data */\nthis.inflate_block_data = function(d, lt, dt)\n{\n   // js optimization.\n   var ddest = d.dest;\n   var ddestlength = ddest.length;\n\n   while (1)\n   {\n      var sym = this.decode_symbol(d, lt);\n\n      /* check for end of block */\n      if (sym == 256)\n      {\n         return this.OK;\n      }\n\n      if (sym < 256)\n      {\n         ddest[ddestlength++] = sym; // ? String.fromCharCode(sym);\n         d.history.push(sym);\n      } else {\n\n         var length, dist, offs;\n         var i;\n\n         sym -= 257;\n\n         /* possibly get more bits from length code */\n         length = this.read_bits(d, this.length_bits[sym], this.length_base[sym]);\n\n         dist = this.decode_symbol(d, dt);\n\n         /* possibly get more bits from distance code */\n         offs = d.history.length - this.read_bits(d, this.dist_bits[dist], this.dist_base[dist]);\n\n         if (offs < 0)\n             throw (\"Invalid zlib offset \" + offs);\n         \n         /* copy match */\n         for (i = offs; i < offs + length; ++i) {\n            //ddest[ddestlength++] = ddest[i];\n            ddest[ddestlength++] = d.history[i];\n            d.history.push(d.history[i]);\n         }\n      }\n   }\n}\n\n/* inflate an uncompressed block of data */\nthis.inflate_uncompressed_block = function(d)\n{\n   var length, invlength;\n   var i;\n\n   if (d.bitcount > 7) {\n       var overflow = Math.floor(d.bitcount / 8);\n       d.sourceIndex -= overflow;\n       d.bitcount = 0;\n       d.tag = 0;\n   }\n   \n   /* get length */\n   length = d.source[d.sourceIndex+1];\n   length = 256*length + d.source[d.sourceIndex];\n\n   /* get one's complement of length */\n   invlength = d.source[d.sourceIndex+3];\n   invlength = 256*invlength + d.source[d.sourceIndex+2];\n\n   /* check length */\n   if (length != (~invlength & 0x0000ffff)) return this.DATA_ERROR;\n\n   d.sourceIndex += 4;\n\n   /* copy block */\n   for (i = length; i; --i) {\n       d.history.push(d.source[d.sourceIndex]);\n       d.dest[d.dest.length] = d.source[d.sourceIndex++];\n   }\n\n   /* make sure we start next block on a byte boundary */\n   d.bitcount = 0;\n\n   return this.OK;\n}\n\n/* inflate a block of data compressed with fixed huffman trees */\nthis.inflate_fixed_block = function(d)\n{\n   /* decode block using fixed trees */\n   return this.inflate_block_data(d, this.sltree, this.sdtree);\n}\n\n/* inflate a block of data compressed with dynamic huffman trees */\nthis.inflate_dynamic_block = function(d)\n{\n   /* decode trees from stream */\n   this.decode_trees(d, d.ltree, d.dtree);\n\n   /* decode block using decoded trees */\n   return this.inflate_block_data(d, d.ltree, d.dtree);\n}\n\n/* ---------------------- *\n * -- public functions -- *\n * ---------------------- */\n\n/* initialize global (static) data */\nthis.init = function()\n{\n   /* build fixed huffman trees */\n   this.build_fixed_trees(this.sltree, this.sdtree);\n\n   /* build extra bits and base tables */\n   this.build_bits_base(this.length_bits, this.length_base, 4, 3);\n   this.build_bits_base(this.dist_bits, this.dist_base, 2, 1);\n\n   /* fix a special case */\n   this.length_bits[28] = 0;\n   this.length_base[28] = 258;\n\n   this.reset();   \n}\n\nthis.reset = function()\n{\n   this.d = new this.DATA(this);\n   delete this.header;\n}\n\n/* inflate stream from source to dest */\nthis.uncompress = function(source, offset)\n{\n\n   var d = this.d;\n   var bfinal;\n\n   /* initialise data */\n   d.source = source;\n   d.sourceIndex = offset;\n   d.bitcount = 0;\n\n   d.dest = [];\n\n   // Skip zlib header at start of stream\n   if (typeof this.header == 'undefined') {\n       this.header = this.read_bits(d, 16, 0);\n       /* byte 0: 0x78, 7 = 32k window size, 8 = deflate */\n       /* byte 1: check bits for header and other flags */\n   }\n\n   var blocks = 0;\n   \n   do {\n\n      var btype;\n      var res;\n\n      /* read final block flag */\n      bfinal = this.getbit(d);\n\n      /* read block type (2 bits) */\n      btype = this.read_bits(d, 2, 0);\n\n      /* decompress block */\n      switch (btype)\n      {\n      case 0:\n         /* decompress uncompressed block */\n         res = this.inflate_uncompressed_block(d);\n         break;\n      case 1:\n         /* decompress block with fixed huffman trees */\n         res = this.inflate_fixed_block(d);\n         break;\n      case 2:\n         /* decompress block with dynamic huffman trees */\n         res = this.inflate_dynamic_block(d);\n         break;\n      default:\n         return { 'status' : this.DATA_ERROR };\n      }\n\n      if (res != this.OK) return { 'status' : this.DATA_ERROR };\n      blocks++;\n      \n   } while (!bfinal && d.sourceIndex < d.source.length);\n\n   d.history = d.history.slice(-this.WINDOW_SIZE);\n   \n   return { 'status' : this.OK, 'data' : d.dest };\n}\n\n};\n\ndefine(\"vnc-jsunzip\", [\"vnc-util\"], function(){});\n\n",
    "/*\n * noVNC: HTML5 VNC client\n * Copyright (C) 2012 Joel Martin\n * Copyright (C) 2013 Samuel Mannehed for Cendio AB\n * Licensed under MPL 2.0 (see LICENSE.txt)\n *\n * See README.md for usage and integration instructions.\n *\n * TIGHT decoder portion:\n * (c) 2012 Michael Tinglof, Joe Balaz, Les Piech (Mercuri.ca)\n */\n\n/*jslint white: false, browser: true */\n/*global window, Util, Display, Keyboard, Mouse, Websock, Websock_native, Base64, DES */\n\nvar RFB;\n\n(function () {\n    \"use strict\";\n    RFB = function (defaults) {\n        if (!defaults) {\n            defaults = {};\n        }\n\n        this._rfb_host = '';\n        this._rfb_port = 5900;\n        this._rfb_password = '';\n        this._rfb_path = '';\n\n        this._rfb_state = 'disconnected';\n        this._rfb_version = 0;\n        this._rfb_max_version = 3.8;\n        this._rfb_auth_scheme = '';\n\n        this._rfb_tightvnc = false;\n        this._rfb_xvp_ver = 0;\n\n        // In preference order\n        this._encodings = [\n            ['COPYRECT',         0x01 ],\n            ['TIGHT',            0x07 ],\n            ['TIGHT_PNG',        -260 ],\n            ['HEXTILE',          0x05 ],\n            ['RRE',              0x02 ],\n            ['RAW',              0x00 ],\n            ['DesktopSize',      -223 ],\n            ['Cursor',           -239 ],\n\n            // Psuedo-encoding settings\n            //['JPEG_quality_lo',   -32 ],\n            ['JPEG_quality_med',    -26 ],\n            //['JPEG_quality_hi',   -23 ],\n            //['compress_lo',      -255 ],\n            ['compress_hi',        -247 ],\n            ['last_rect',          -224 ],\n            ['xvp',                -309 ]\n        ];\n\n        this._encHandlers = {};\n        this._encNames = {};\n        this._encStats = {};\n\n        this._sock = null;              // Websock object\n        this._display = null;           // Display object\n        this._keyboard = null;          // Keyboard input handler object\n        this._mouse = null;             // Mouse input handler object\n        this._sendTimer = null;         // Send Queue check timer\n        this._disconnTimer = null;      // disconnection timer\n        this._msgTimer = null;          // queued handle_msg timer\n\n        // Frame buffer update state\n        this._FBU = {\n            rects: 0,\n            subrects: 0,            // RRE\n            lines: 0,               // RAW\n            tiles: 0,               // HEXTILE\n            bytes: 0,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n            encoding: 0,\n            subencoding: -1,\n            background: null,\n            zlib: []                // TIGHT zlib streams\n        };\n\n        this._fb_Bpp = 4;\n        this._fb_depth = 3;\n        this._fb_width = 0;\n        this._fb_height = 0;\n        this._fb_name = \"\";\n\n        this._rre_chunk_sz = 100;\n\n        this._timing = {\n            last_fbu: 0,\n            fbu_total: 0,\n            fbu_total_cnt: 0,\n            full_fbu_total: 0,\n            full_fbu_cnt: 0,\n\n            fbu_rt_start: 0,\n            fbu_rt_total: 0,\n            fbu_rt_cnt: 0,\n            pixels: 0\n        };\n\n        // Mouse state\n        this._mouse_buttonMask = 0;\n        this._mouse_arr = [];\n        this._viewportDragging = false;\n        this._viewportDragPos = {};\n\n        // set the default value on user-facing properties\n        Util.set_defaults(this, defaults, {\n            'target': 'null',                       // VNC display rendering Canvas object\n            'focusContainer': document,             // DOM element that captures keyboard input\n            'encrypt': false,                       // Use TLS/SSL/wss encryption\n            'true_color': true,                     // Request true color pixel data\n            'local_cursor': false,                  // Request locally rendered cursor\n            'shared': true,                         // Request shared mode\n            'view_only': false,                     // Disable client mouse/keyboard\n            'xvp_password_sep': '@',                // Separator for XVP password fields\n            'disconnectTimeout': 3,                 // Time (s) to wait for disconnection\n            'wsProtocols': ['binary', 'base64'],    // Protocols to use in the WebSocket connection\n            'repeaterID': '',                       // [UltraVNC] RepeaterID to connect to\n            'viewportDrag': false,                  // Move the viewport on mouse drags\n\n            // Callback functions\n            'onUpdateState': function () { },       // onUpdateState(rfb, state, oldstate, statusMsg): state update/change\n            'onPasswordRequired': function () { },  // onPasswordRequired(rfb): VNC password is required\n            'onClipboard': function () { },         // onClipboard(rfb, text): RFB clipboard contents received\n            'onBell': function () { },              // onBell(rfb): RFB Bell message received\n            'onFBUReceive': function () { },        // onFBUReceive(rfb, fbu): RFB FBU received but not yet processed\n            'onFBUComplete': function () { },       // onFBUComplete(rfb, fbu): RFB FBU received and processed\n            'onFBResize': function () { },          // onFBResize(rfb, width, height): frame buffer resized\n            'onDesktopName': function () { },       // onDesktopName(rfb, name): desktop name received\n            'onXvpInit': function () { },           // onXvpInit(version): XVP extensions active for this connection\n        });\n\n        // main setup\n        Util.Debug(\">> RFB.constructor\");\n\n        // populate encHandlers with bound versions\n        Object.keys(RFB.encodingHandlers).forEach(function (encName) {\n            this._encHandlers[encName] = RFB.encodingHandlers[encName].bind(this);\n        }.bind(this));\n\n        // Create lookup tables based on encoding number\n        for (var i = 0; i < this._encodings.length; i++) {\n            this._encHandlers[this._encodings[i][1]] = this._encHandlers[this._encodings[i][0]];\n            this._encNames[this._encodings[i][1]] = this._encodings[i][0];\n            this._encStats[this._encodings[i][1]] = [0, 0];\n        }\n\n        try {\n            this._display = new Display({target: this._target});\n        } catch (exc) {\n            Util.Error(\"Display exception: \" + exc);\n            this._updateState('fatal', \"No working Display\");\n        }\n\n        this._keyboard = new Keyboard({target: this._focusContainer,\n                                       onKeyPress: this._handleKeyPress.bind(this)});\n\n        this._mouse = new Mouse({target: this._target,\n                                 onMouseButton: this._handleMouseButton.bind(this),\n                                 onMouseMove: this._handleMouseMove.bind(this),\n                                 notify: this._keyboard.sync.bind(this._keyboard)});\n\n        this._sock = new Websock();\n        this._sock.on('message', this._handle_message.bind(this));\n        this._sock.on('open', function () {\n            if (this._rfb_state === 'connect') {\n                this._updateState('ProtocolVersion', \"Starting VNC handshake\");\n            } else {\n                this._fail(\"Got unexpected WebSocket connection\");\n            }\n        }.bind(this));\n        this._sock.on('close', function (e) {\n            Util.Warn(\"WebSocket on-close event\");\n            var msg = \"\";\n            if (e.code) {\n                msg = \" (code: \" + e.code;\n                if (e.reason) {\n                    msg += \", reason: \" + e.reason;\n                }\n                msg += \")\";\n            }\n            if (this._rfb_state === 'disconnect') {\n                this._updateState('disconnected', 'VNC disconnected' + msg);\n            } else if (this._rfb_state === 'ProtocolVersion') {\n                this._fail('Failed to connect to server' + msg);\n            } else if (this._rfb_state in {'failed': 1, 'disconnected': 1}) {\n                Util.Error(\"Received onclose while disconnected\" + msg);\n            } else {\n                this._fail(\"Server disconnected\" + msg);\n            }\n        }.bind(this));\n        this._sock.on('error', function (e) {\n            Util.Warn(\"WebSocket on-error event\");\n        });\n\n        this._init_vars();\n\n        var rmode = this._display.get_render_mode();\n        if (Websock_native) {\n            Util.Info(\"Using native WebSockets\");\n            this._updateState('loaded', 'noVNC ready: native WebSockets, ' + rmode);\n        } else {\n            Util.Warn(\"Using web-socket-js bridge.  Flash version: \" + Util.Flash.version);\n            if (!Util.Flash || Util.Flash.version < 9) {\n                this._updateState('fatal', \"WebSockets or <a href='http://get.adobe.com/flashplayer'>Adobe Flash</a> is required\");\n            } else if (document.location.href.substr(0, 7) === 'file://') {\n                this._updateState('fatal', \"'file://' URL is incompatible with Adobe Flash\");\n            } else {\n                this._updateState('loaded', 'noVNC ready: WebSockets emulation, ' + rmode);\n            }\n        }\n\n        Util.Debug(\"<< RFB.constructor\");\n    };\n\n    RFB.prototype = {\n        // Public methods\n        connect: function (host, port, password, path) {\n            this._rfb_host = host;\n            this._rfb_port = port;\n            this._rfb_password = (password !== undefined) ? password : \"\";\n            this._rfb_path = (path !== undefined) ? path : \"\";\n\n            if (!this._rfb_host || !this._rfb_port) {\n                return this._fail(\"Must set host and port\");\n            }\n\n            this._updateState('connect');\n        },\n\n        disconnect: function () {\n            this._updateState('disconnect', 'Disconnecting');\n        },\n\n        sendPassword: function (passwd) {\n            this._rfb_password = passwd;\n            this._rfb_state = 'Authentication';\n            setTimeout(this._init_msg.bind(this), 1);\n        },\n\n        sendCtrlAltDel: function () {\n            if (this._rfb_state !== 'normal' || this._view_only) { return false; }\n            Util.Info(\"Sending Ctrl-Alt-Del\");\n\n            var arr = [];\n            arr = arr.concat(RFB.messages.keyEvent(XK_Control_L, 1));\n            arr = arr.concat(RFB.messages.keyEvent(XK_Alt_L, 1));\n            arr = arr.concat(RFB.messages.keyEvent(XK_Delete, 1));\n            arr = arr.concat(RFB.messages.keyEvent(XK_Delete, 0));\n            arr = arr.concat(RFB.messages.keyEvent(XK_Alt_L, 0));\n            arr = arr.concat(RFB.messages.keyEvent(XK_Control_L, 0));\n            this._sock.send(arr);\n        },\n\n        xvpOp: function (ver, op) {\n            if (this._rfb_xvp_ver < ver) { return false; }\n            Util.Info(\"Sending XVP operation \" + op + \" (version \" + ver + \")\");\n            this._sock.send_string(\"\\xFA\\x00\" + String.fromCharCode(ver) + String.fromCharCode(op));\n            return true;\n        },\n\n        xvpShutdown: function () {\n            return this.xvpOp(1, 2);\n        },\n\n        xvpReboot: function () {\n            return this.xvpOp(1, 3);\n        },\n\n        xvpReset: function () {\n            return this.xvpOp(1, 4);\n        },\n\n        // Send a key press. If 'down' is not specified then send a down key\n        // followed by an up key.\n        sendKey: function (code, down) {\n            if (this._rfb_state !== \"normal\" || this._view_only) { return false; }\n            var arr = [];\n            if (typeof down !== 'undefined') {\n                Util.Info(\"Sending key code (\" + (down ? \"down\" : \"up\") + \"): \" + code);\n                arr = arr.concat(RFB.messages.keyEvent(code, down ? 1 : 0));\n            } else {\n                Util.Info(\"Sending key code (down + up): \" + code);\n                arr = arr.concat(RFB.messages.keyEvent(code, 1));\n                arr = arr.concat(RFB.messages.keyEvent(code, 0));\n            }\n            this._sock.send(arr);\n        },\n\n        clipboardPasteFrom: function (text) {\n            if (this._rfb_state !== 'normal') { return; }\n            this._sock.send(RFB.messages.clientCutText(text));\n        },\n\n        // Private methods\n\n        _connect: function () {\n            Util.Debug(\">> RFB.connect\");\n\n            var uri;\n            if (typeof UsingSocketIO !== 'undefined') {\n                uri = 'http';\n            } else {\n                uri = this._encrypt ? 'wss' : 'ws';\n            }\n\n            uri += '://' + this._rfb_host + ':' + this._rfb_port + '/' + this._rfb_path;\n            Util.Info(\"connecting to \" + uri);\n\n            this._sock.open(uri, this._wsProtocols);\n\n            Util.Debug(\"<< RFB.connect\");\n        },\n\n        _init_vars: function () {\n            // reset state\n            this._sock.init();\n\n            this._FBU.rects        = 0;\n            this._FBU.subrects     = 0;  // RRE and HEXTILE\n            this._FBU.lines        = 0;  // RAW\n            this._FBU.tiles        = 0;  // HEXTILE\n            this._FBU.zlibs        = []; // TIGHT zlib encoders\n            this._mouse_buttonMask = 0;\n            this._mouse_arr        = [];\n            this._rfb_tightvnc     = false;\n\n            // Clear the per connection encoding stats\n            var i;\n            for (i = 0; i < this._encodings.length; i++) {\n                this._encStats[this._encodings[i][1]][0] = 0;\n            }\n\n            for (i = 0; i < 4; i++) {\n                this._FBU.zlibs[i] = new TINF();\n                this._FBU.zlibs[i].init();\n            }\n        },\n\n        _print_stats: function () {\n            Util.Info(\"Encoding stats for this connection:\");\n            var i, s;\n            for (i = 0; i < this._encodings.length; i++) {\n                s = this._encStats[this._encodings[i][1]];\n                if (s[0] + s[1] > 0) {\n                    Util.Info(\"    \" + this._encodings[i][0] + \": \" + s[0] + \" rects\");\n                }\n            }\n\n            Util.Info(\"Encoding stats since page load:\");\n            for (i = 0; i < this._encodings.length; i++) {\n                s = this._encStats[this._encodings[i][1]];\n                Util.Info(\"    \" + this._encodings[i][0] + \": \" + s[1] + \" rects\");\n            }\n        },\n\n\n        /*\n         * Page states:\n         *   loaded       - page load, equivalent to disconnected\n         *   disconnected - idle state\n         *   connect      - starting to connect (to ProtocolVersion)\n         *   normal       - connected\n         *   disconnect   - starting to disconnect\n         *   failed       - abnormal disconnect\n         *   fatal        - failed to load page, or fatal error\n         *\n         * RFB protocol initialization states:\n         *   ProtocolVersion\n         *   Security\n         *   Authentication\n         *   password     - waiting for password, not part of RFB\n         *   SecurityResult\n         *   ClientInitialization - not triggered by server message\n         *   ServerInitialization (to normal)\n         */\n        _updateState: function (state, statusMsg) {\n            var oldstate = this._rfb_state;\n\n            if (state === oldstate) {\n                // Already here, ignore\n                Util.Debug(\"Already in state '\" + state + \"', ignoring\");\n            }\n\n            /*\n             * These are disconnected states. A previous connect may\n             * asynchronously cause a connection so make sure we are closed.\n             */\n            if (state in {'disconnected': 1, 'loaded': 1, 'connect': 1,\n                          'disconnect': 1, 'failed': 1, 'fatal': 1}) {\n\n                if (this._sendTimer) {\n                    clearInterval(this._sendTimer);\n                    this._sendTimer = null;\n                }\n\n                if (this._msgTimer) {\n                    clearInterval(this._msgTimer);\n                    this._msgTimer = null;\n                }\n\n                if (this._display && this._display.get_context()) {\n                    this._keyboard.ungrab();\n                    this._mouse.ungrab();\n                    this._display.defaultCursor();\n                    if (Util.get_logging() !== 'debug' || state === 'loaded') {\n                        // Show noVNC logo on load and when disconnected, unless in\n                        // debug mode\n                        this._display.clear();\n                    }\n                }\n\n                this._sock.close();\n            }\n\n            if (oldstate === 'fatal') {\n                Util.Error('Fatal error, cannot continue');\n            }\n\n            var cmsg = typeof(statusMsg) !== 'undefined' ? (\" Msg: \" + statusMsg) : \"\";\n            var fullmsg = \"New state '\" + state + \"', was '\" + oldstate + \"'.\" + cmsg;\n            if (state === 'failed' || state === 'fatal') {\n                Util.Error(cmsg);\n            } else {\n                Util.Warn(cmsg);\n            }\n\n            if (oldstate === 'failed' && state === 'disconnected') {\n                // do disconnect action, but stay in failed state\n                this._rfb_state = 'failed';\n            } else {\n                this._rfb_state = state;\n            }\n\n            if (this._disconnTimer && this._rfb_state !== 'disconnect') {\n                Util.Debug(\"Clearing disconnect timer\");\n                clearTimeout(this._disconnTimer);\n                this._disconnTimer = null;\n            }\n\n            switch (state) {\n                case 'normal':\n                    if (oldstate === 'disconnected' || oldstate === 'failed') {\n                        Util.Error(\"Invalid transition from 'disconnected' or 'failed' to 'normal'\");\n                    }\n                    break;\n\n                case 'connect':\n                    this._init_vars();\n                    this._connect();\n                    // WebSocket.onopen transitions to 'ProtocolVersion'\n                    break;\n\n                case 'disconnect':\n                    this._disconnTimer = setTimeout(function () {\n                        this._fail(\"Disconnect timeout\");\n                    }.bind(this), this._disconnectTimeout * 1000);\n\n                    this._print_stats();\n\n                    // WebSocket.onclose transitions to 'disconnected'\n                    break;\n\n                case 'failed':\n                    if (oldstate === 'disconnected') {\n                        Util.Error(\"Invalid transition from 'disconnected' to 'failed'\");\n                    } else if (oldstate === 'normal') {\n                        Util.Error(\"Error while connected.\");\n                    } else if (oldstate === 'init') {\n                        Util.Error(\"Error while initializing.\");\n                    }\n\n                    // Make sure we transition to disconnected\n                    setTimeout(function () {\n                        this._updateState('disconnected');\n                    }.bind(this), 50);\n\n                    break;\n\n                default:\n                    // No state change action to take\n            }\n\n            if (oldstate === 'failed' && state === 'disconnected') {\n                this._onUpdateState(this, state, oldstate);\n            } else {\n                this._onUpdateState(this, state, oldstate, statusMsg);\n            }\n        },\n\n        _fail: function (msg) {\n            this._updateState('failed', msg);\n            return false;\n        },\n\n        _handle_message: function () {\n            if (this._sock.rQlen() === 0) {\n                Util.Warn(\"handle_message called on an empty receive queue\");\n                return;\n            }\n\n            switch (this._rfb_state) {\n                case 'disconnected':\n                case 'failed':\n                    Util.Error(\"Got data while disconnected\");\n                    break;\n                case 'normal':\n                    if (this._normal_msg() && this._sock.rQlen() > 0) {\n                        // true means we can continue processing\n                        // Give other events a chance to run\n                        if (this._msgTimer === null) {\n                            Util.Debug(\"More data to process, creating timer\");\n                            this._msgTimer = setTimeout(function () {\n                                this._msgTimer = null;\n                                this._handle_message();\n                            }.bind(this), 10);\n                        } else {\n                            Util.Debug(\"More data to process, existing timer\");\n                        }\n                    }\n                    break;\n                default:\n                    this._init_msg();\n                    break;\n            }\n        },\n\n        _checkEvents: function () {\n            if (this._rfb_state === 'normal' && !this._viewportDragging && this._mouse_arr.length > 0) {\n                this._sock.send(this._mouse_arr);\n                this._mouse_arr = [];\n            }\n        },\n\n        _handleKeyPress: function (keysym, down) {\n            if (this._view_only) { return; } // View only, skip keyboard, events\n            this._sock.send(RFB.messages.keyEvent(keysym, down));\n        },\n\n        _handleMouseButton: function (x, y, down, bmask) {\n            if (down) {\n                this._mouse_buttonMask |= bmask;\n            } else {\n                this._mouse_buttonMask ^= bmask;\n            }\n\n            if (this._viewportDrag) {\n                if (down && !this._viewportDragging) {\n                    this._viewportDragging = true;\n                    this._viewportDragPos = {'x': x, 'y': y};\n\n                    // Skip sending mouse events\n                    return;\n                } else {\n                    this._viewportDragging = false;\n                }\n            }\n\n            if (this._view_only) { return; } // View only, skip mouse events\n\n            this._mouse_arr = this._mouse_arr.concat(\n                    RFB.messages.pointerEvent(this._display.absX(x), this._display.absY(y), this._mouse_buttonMask));\n            this._sock.send(this._mouse_arr);\n            this._mouse_arr = [];\n        },\n\n        _handleMouseMove: function (x, y) {\n            if (this._viewportDragging) {\n                var deltaX = this._viewportDragPos.x - x;\n                var deltaY = this._viewportDragPos.y - y;\n                this._viewportDragPos = {'x': x, 'y': y};\n\n                this._display.viewportChange(deltaX, deltaY);\n\n                // Skip sending mouse events\n                return;\n            }\n\n            if (this._view_only) { return; } // View only, skip mouse events\n\n            this._mouse_arr = this._mouse_arr.concat(\n                    RFB.messages.pointerEvent(this._display.absX(x), this._display.absY(y), this._mouse_buttonMask));\n\n            this._checkEvents();\n        },\n\n        // Message Handlers\n\n        _negotiate_protocol_version: function () {\n            if (this._sock.rQlen() < 12) {\n                return this._fail(\"Incomplete protocol version\");\n            }\n\n            var sversion = this._sock.rQshiftStr(12).substr(4, 7);\n            Util.Info(\"Server ProtocolVersion: \" + sversion);\n            var is_repeater = 0;\n            switch (sversion) {\n                case \"000.000\":  // UltraVNC repeater\n                    is_repeater = 1;\n                    break;\n                case \"003.003\":\n                case \"003.006\":  // UltraVNC\n                case \"003.889\":  // Apple Remote Desktop\n                    this._rfb_version = 3.3;\n                    break;\n                case \"003.007\":\n                    this._rfb_version = 3.7;\n                    break;\n                case \"003.008\":\n                case \"004.000\":  // Intel AMT KVM\n                case \"004.001\":  // RealVNC 4.6\n                    this._rfb_version = 3.8;\n                    break;\n                default:\n                    return this._fail(\"Invalid server version \" + sversion);\n            }\n\n            if (is_repeater) {\n                var repeaterID = this._repeaterID;\n                while (repeaterID.length < 250) {\n                    repeaterID += \"\\0\";\n                }\n                this._sock.send_string(repeaterID);\n                return true;\n            }\n\n            if (this._rfb_version > this._rfb_max_version) {\n                this._rfb_version = this._rfb_max_version;\n            }\n\n            // Send updates either at a rate of 1 update per 50ms, or\n            // whatever slower rate the network can handle\n            this._sendTimer = setInterval(this._sock.flush.bind(this._sock), 50);\n\n            var cversion = \"00\" + parseInt(this._rfb_version, 10) +\n                           \".00\" + ((this._rfb_version * 10) % 10);\n            this._sock.send_string(\"RFB \" + cversion + \"\\n\");\n            this._updateState('Security', 'Sent ProtocolVersion: ' + cversion);\n        },\n\n        _negotiate_security: function () {\n            if (this._rfb_version >= 3.7) {\n                // Server sends supported list, client decides\n                var num_types = this._sock.rQshift8();\n                if (this._sock.rQwait(\"security type\", num_types, 1)) { return false; }\n\n                if (num_types === 0) {\n                    var strlen = this._sock.rQshift32();\n                    var reason = this._sock.rQshiftStr(strlen);\n                    return this._fail(\"Security failure: \" + reason);\n                }\n\n                this._rfb_auth_scheme = 0;\n                var types = this._sock.rQshiftBytes(num_types);\n                Util.Debug(\"Server security types: \" + types);\n                for (var i = 0; i < types.length; i++) {\n                    if (types[i] > this._rfb_auth_scheme && (types[i] <= 16 || types[i] == 22)) {\n                        this._rfb_auth_scheme = types[i];\n                    }\n                }\n\n                if (this._rfb_auth_scheme === 0) {\n                    return this._fail(\"Unsupported security types: \" + types);\n                }\n\n                this._sock.send([this._rfb_auth_scheme]);\n            } else {\n                // Server decides\n                if (this._sock.rQwait(\"security scheme\", 4)) { return false; }\n                this._rfb_auth_scheme = this._sock.rQshift32();\n            }\n\n            this._updateState('Authentication', 'Authenticating using scheme: ' + this._rfb_auth_scheme);\n            return this._init_msg(); // jump to authentication\n        },\n\n        // authentication\n        _negotiate_xvp_auth: function () {\n            var xvp_sep = this._xvp_password_sep;\n            var xvp_auth = this._rfb_password.split(xvp_sep);\n            if (xvp_auth.length < 3) {\n                this._updateState('password', 'XVP credentials required (user' + xvp_sep +\n                                  'target' + xvp_sep + 'password) -- got only ' + this._rfb_password);\n                this._onPasswordRequired(this);\n                return false;\n            }\n\n            var xvp_auth_str = String.fromCharCode(xvp_auth[0].length) +\n                               String.fromCharCode(xvp_auth[1].length) +\n                               xvp_auth[0] +\n                               xvp_auth[1];\n            this._sock.send_string(xvp_auth_str);\n            this._rfb_password = xvp_auth.slice(2).join(xvp_sep);\n            this._rfb_auth_scheme = 2;\n            return this._negotiate_authentication();\n        },\n\n        _negotiate_std_vnc_auth: function () {\n            if (this._rfb_password.length === 0) {\n                // Notify via both callbacks since it's kind of\n                // an RFB state change and a UI interface issue\n                this._updateState('password', \"Password Required\");\n                this._onPasswordRequired(this);\n            }\n\n            if (this._sock.rQwait(\"auth challenge\", 16)) { return false; }\n\n            var challenge = this._sock.rQshiftBytes(16);\n            var response = RFB.genDES(this._rfb_password, challenge);\n            this._sock.send(response);\n            this._updateState(\"SecurityResult\");\n            return true;\n        },\n\n        _negotiate_tight_tunnels: function (numTunnels) {\n            var clientSupportedTunnelTypes = {\n                0: { vendor: 'TGHT', signature: 'NOTUNNEL' }\n            };\n            var serverSupportedTunnelTypes = {};\n            // receive tunnel capabilities\n            for (var i = 0; i < numTunnels; i++) {\n                var cap_code = this._sock.rQshift32();\n                var cap_vendor = this._sock.rQshiftStr(4);\n                var cap_signature = this._sock.rQshiftStr(8);\n                serverSupportedTunnelTypes[cap_code] = { vendor: cap_vendor, signature: cap_signature };\n            }\n\n            // choose the notunnel type\n            if (serverSupportedTunnelTypes[0]) {\n                if (serverSupportedTunnelTypes[0].vendor != clientSupportedTunnelTypes[0].vendor ||\n                    serverSupportedTunnelTypes[0].signature != clientSupportedTunnelTypes[0].signature) {\n                    return this._fail(\"Client's tunnel type had the incorrect vendor or signature\");\n                }\n                this._sock.send([0, 0, 0, 0]);  // use NOTUNNEL\n                return false; // wait until we receive the sub auth count to continue\n            } else {\n                return this._fail(\"Server wanted tunnels, but doesn't support the notunnel type\");\n            }\n        },\n\n        _negotiate_tight_auth: function () {\n            if (!this._rfb_tightvnc) {  // first pass, do the tunnel negotiation\n                if (this._sock.rQwait(\"num tunnels\", 4)) { return false; }\n                var numTunnels = this._sock.rQshift32();\n                if (numTunnels > 0 && this._sock.rQwait(\"tunnel capabilities\", 16 * numTunnels, 4)) { return false; }\n\n                this._rfb_tightvnc = true;\n\n                if (numTunnels > 0) {\n                    this._negotiate_tight_tunnels(numTunnels);\n                    return false;  // wait until we receive the sub auth to continue\n                }\n            }\n\n            // second pass, do the sub-auth negotiation\n            if (this._sock.rQwait(\"sub auth count\", 4)) { return false; }\n            var subAuthCount = this._sock.rQshift32();\n            if (this._sock.rQwait(\"sub auth capabilities\", 16 * subAuthCount, 4)) { return false; }\n\n            var clientSupportedTypes = {\n                'STDVNOAUTH__': 1,\n                'STDVVNCAUTH_': 2\n            };\n\n            var serverSupportedTypes = [];\n\n            for (var i = 0; i < subAuthCount; i++) {\n                var capNum = this._sock.rQshift32();\n                var capabilities = this._sock.rQshiftStr(12);\n                serverSupportedTypes.push(capabilities);\n            }\n\n            for (var authType in clientSupportedTypes) {\n                if (serverSupportedTypes.indexOf(authType) != -1) {\n                    this._sock.send([0, 0, 0, clientSupportedTypes[authType]]);\n\n                    switch (authType) {\n                        case 'STDVNOAUTH__':  // no auth\n                            this._updateState('SecurityResult');\n                            return true;\n                        case 'STDVVNCAUTH_': // VNC auth\n                            this._rfb_auth_scheme = 2;\n                            return this._init_msg();\n                        default:\n                            return this._fail(\"Unsupported tiny auth scheme: \" + authType);\n                    }\n                }\n            }\n\n            this._fail(\"No supported sub-auth types!\");\n        },\n\n        _negotiate_authentication: function () {\n            switch (this._rfb_auth_scheme) {\n                case 0:  // connection failed\n                    if (this._sock.rQwait(\"auth reason\", 4)) { return false; }\n                    var strlen = this._sock.rQshift32();\n                    var reason = this._sock.rQshiftStr(strlen);\n                    return this._fail(\"Auth failure: \" + reason);\n\n                case 1:  // no auth\n                    if (this._rfb_version >= 3.8) {\n                        this._updateState('SecurityResult');\n                        return true;\n                    }\n                    this._updateState('ClientInitialisation', \"No auth required\");\n                    return this._init_msg();\n\n                case 22:  // XVP auth\n                    return this._negotiate_xvp_auth();\n\n                case 2:  // VNC authentication\n                    return this._negotiate_std_vnc_auth();\n\n                case 16:  // TightVNC Security Type\n                    return this._negotiate_tight_auth();\n\n                default:\n                    return this._fail(\"Unsupported auth scheme: \" + this._rfb_auth_scheme);\n            }\n        },\n\n        _handle_security_result: function () {\n            if (this._sock.rQwait('VNC auth response ', 4)) { return false; }\n            switch (this._sock.rQshift32()) {\n                case 0:  // OK\n                    this._updateState('ClientInitialisation', 'Authentication OK');\n                    return this._init_msg();\n                case 1:  // failed\n                    if (this._rfb_version >= 3.8) {\n                        var length = this._sock.rQshift32();\n                        if (this._sock.rQwait(\"SecurityResult reason\", length, 8)) { return false; }\n                        var reason = this._sock.rQshiftStr(length);\n                        return this._fail(reason);\n                    } else {\n                        return this._fail(\"Authentication failure\");\n                    }\n                    return false;\n                case 2:\n                    return this._fail(\"Too many auth attempts\");\n            }\n        },\n\n        _negotiate_server_init: function () {\n            if (this._sock.rQwait(\"server initialization\", 24)) { return false; }\n\n            /* Screen size */\n            this._fb_width  = this._sock.rQshift16();\n            this._fb_height = this._sock.rQshift16();\n\n            /* PIXEL_FORMAT */\n            var bpp         = this._sock.rQshift8();\n            var depth       = this._sock.rQshift8();\n            var big_endian  = this._sock.rQshift8();\n            var true_color  = this._sock.rQshift8();\n\n            var red_max     = this._sock.rQshift16();\n            var green_max   = this._sock.rQshift16();\n            var blue_max    = this._sock.rQshift16();\n            var red_shift   = this._sock.rQshift8();\n            var green_shift = this._sock.rQshift8();\n            var blue_shift  = this._sock.rQshift8();\n            this._sock.rQskipBytes(3);  // padding\n\n            // NB(directxman12): we don't want to call any callbacks or print messages until\n            //                   *after* we're past the point where we could backtrack\n\n            /* Connection name/title */\n            var name_length = this._sock.rQshift32();\n            if (this._sock.rQwait('server init name', name_length, 24)) { return false; }\n            this._fb_name = Util.decodeUTF8(this._sock.rQshiftStr(name_length));\n\n            if (this._rfb_tightvnc) {\n                if (this._sock.rQwait('TightVNC extended server init header', 8, 24 + name_length)) { return false; }\n                // In TightVNC mode, ServerInit message is extended\n                var numServerMessages = this._sock.rQshift16();\n                var numClientMessages = this._sock.rQshift16();\n                var numEncodings = this._sock.rQshift16();\n                this._sock.rQskipBytes(2);  // padding\n\n                var totalMessagesLength = (numServerMessages + numClientMessages + numEncodings) * 16;\n                if (this._sock.rQwait('TightVNC extended server init header', totalMessagesLength, 32 + name_length)) { return false; }\n\n                var i;\n                for (i = 0; i < numServerMessages; i++) {\n                    var srvMsg = this._sock.rQshiftStr(16);\n                }\n\n                for (i = 0; i < numClientMessages; i++) {\n                    var clientMsg = this._sock.rQshiftStr(16);\n                }\n\n                for (i = 0; i < numEncodings; i++) {\n                    var encoding = this._sock.rQshiftStr(16);\n                }\n            }\n\n            // NB(directxman12): these are down here so that we don't run them multiple times\n            //                   if we backtrack\n            Util.Info(\"Screen: \" + this._fb_width + \"x\" + this._fb_height +\n                      \", bpp: \" + bpp + \", depth: \" + depth +\n                      \", big_endian: \" + big_endian +\n                      \", true_color: \" + true_color +\n                      \", red_max: \" + red_max +\n                      \", green_max: \" + green_max +\n                      \", blue_max: \" + blue_max +\n                      \", red_shift: \" + red_shift +\n                      \", green_shift: \" + green_shift +\n                      \", blue_shift: \" + blue_shift);\n\n            if (big_endian !== 0) {\n                Util.Warn(\"Server native endian is not little endian\");\n            }\n\n            if (red_shift !== 16) {\n                Util.Warn(\"Server native red-shift is not 16\");\n            }\n\n            if (blue_shift !== 0) {\n                Util.Warn(\"Server native blue-shift is not 0\");\n            }\n\n            // we're past the point where we could backtrack, so it's safe to call this\n            this._onDesktopName(this, this._fb_name);\n\n            if (this._true_color && this._fb_name === \"Intel(r) AMT KVM\") {\n                Util.Warn(\"Intel AMT KVM only supports 8/16 bit depths.  Disabling true color\");\n                this._true_color = false;\n            }\n\n            this._display.set_true_color(this._true_color);\n            this._onFBResize(this, this._fb_width, this._fb_height);\n            this._display.resize(this._fb_width, this._fb_height);\n            this._keyboard.grab();\n            this._mouse.grab();\n\n            if (this._true_color) {\n                this._fb_Bpp = 4;\n                this._fb_depth = 3;\n            } else {\n                this._fb_Bpp = 1;\n                this._fb_depth = 1;\n            }\n\n            var response = RFB.messages.pixelFormat(this._fb_Bpp, this._fb_depth, this._true_color);\n            response = response.concat(\n                            RFB.messages.clientEncodings(this._encodings, this._local_cursor, this._true_color));\n            response = response.concat(\n                            RFB.messages.fbUpdateRequests(this._display.getCleanDirtyReset(),\n                                                          this._fb_width, this._fb_height));\n\n            this._timing.fbu_rt_start = (new Date()).getTime();\n            this._timing.pixels = 0;\n            this._sock.send(response);\n\n            this._checkEvents();\n\n            if (this._encrypt) {\n                this._updateState('normal', 'Connected (encrypted) to: ' + this._fb_name);\n            } else {\n                this._updateState('normal', 'Connected (unencrypted) to: ' + this._fb_name);\n            }\n        },\n\n        _init_msg: function () {\n            switch (this._rfb_state) {\n                case 'ProtocolVersion':\n                    return this._negotiate_protocol_version();\n\n                case 'Security':\n                    return this._negotiate_security();\n\n                case 'Authentication':\n                    return this._negotiate_authentication();\n\n                case 'SecurityResult':\n                    return this._handle_security_result();\n\n                case 'ClientInitialisation':\n                    this._sock.send([this._shared ? 1 : 0]); // ClientInitialisation\n                    this._updateState('ServerInitialisation', \"Authentication OK\");\n                    return true;\n\n                case 'ServerInitialisation':\n                    return this._negotiate_server_init();\n            }\n        },\n\n        _handle_set_colour_map_msg: function () {\n            Util.Debug(\"SetColorMapEntries\");\n            this._sock.rQskip8();  // Padding\n\n            var first_colour = this._sock.rQshift16();\n            var num_colours = this._sock.rQshift16();\n            if (this._sock.rQwait('SetColorMapEntries', num_colours * 6, 6)) { return false; }\n\n            for (var c = 0; c < num_colours; c++) {\n                var red = parseInt(this._sock.rQshift16() / 256, 10);\n                var green = parseInt(this._sock.rQshift16() / 256, 10);\n                var blue = parseInt(this._sock.rQshift16() / 256, 10);\n                this._display.set_colourMap([blue, green, red], first_colour + c);\n            }\n            Util.Debug(\"colourMap: \" + this._display.get_colourMap());\n            Util.Info(\"Registered \" + num_colours + \" colourMap entries\");\n\n            return true;\n        },\n\n        _handle_server_cut_text: function () {\n            Util.Debug(\"ServerCutText\");\n            if (this._sock.rQwait(\"ServerCutText header\", 7, 1)) { return false; }\n            this._sock.rQskipBytes(3);  // Padding\n            var length = this._sock.rQshift32();\n            if (this._sock.rQwait(\"ServerCutText\", length, 8)) { return false; }\n\n            var text = this._sock.rQshiftStr(length);\n            this._onClipboard(this, text);\n\n            return true;\n        },\n\n        _handle_xvp_msg: function () {\n            if (this._sock.rQwait(\"XVP version and message\", 3, 1)) { return false; }\n            this._sock.rQskip8();  // Padding\n            var xvp_ver = this._sock.rQshift8();\n            var xvp_msg = this._sock.rQshift8();\n\n            switch (xvp_msg) {\n                case 0:  // XVP_FAIL\n                    this._updateState(this._rfb_state, \"Operation Failed\");\n                    break;\n                case 1:  // XVP_INIT\n                    this._rfb_xvp_ver = xvp_ver;\n                    Util.Info(\"XVP extensions enabled (version \" + this._rfb_xvp_ver + \")\");\n                    this._onXvpInit(this._rfb_xvp_ver);\n                    break;\n                default:\n                    this._fail(\"Disconnected: illegal server XVP message \" + xvp_msg);\n                    break;\n            }\n\n            return true;\n        },\n\n        _normal_msg: function () {\n            var msg_type;\n\n            if (this._FBU.rects > 0) {\n                msg_type = 0;\n            } else {\n                msg_type = this._sock.rQshift8();\n            }\n\n            switch (msg_type) {\n                case 0:  // FramebufferUpdate\n                    var ret = this._framebufferUpdate();\n                    if (ret) {\n                        this._sock.send(RFB.messages.fbUpdateRequests(this._display.getCleanDirtyReset(),\n                                                                      this._fb_width, this._fb_height));\n                    }\n                    return ret;\n\n                case 1:  // SetColorMapEntries\n                    return this._handle_set_colour_map_msg();\n\n                case 2:  // Bell\n                    Util.Debug(\"Bell\");\n                    this._onBell(this);\n                    return true;\n\n                case 3:  // ServerCutText\n                    return this._handle_server_cut_text();\n\n                case 250:  // XVP\n                    return this._handle_xvp_msg();\n\n                default:\n                    this._fail(\"Disconnected: illegal server message type \" + msg_type);\n                    Util.Debug(\"sock.rQslice(0, 30): \" + this._sock.rQslice(0, 30));\n                    return true;\n            }\n        },\n\n        _framebufferUpdate: function () {\n            var ret = true;\n            var now;\n\n            if (this._FBU.rects === 0) {\n                if (this._sock.rQwait(\"FBU header\", 3, 1)) { return false; }\n                this._sock.rQskip8();  // Padding\n                this._FBU.rects = this._sock.rQshift16();\n                this._FBU.bytes = 0;\n                this._timing.cur_fbu = 0;\n                if (this._timing.fbu_rt_start > 0) {\n                    now = (new Date()).getTime();\n                    Util.Info(\"First FBU latency: \" + (now - this._timing.fbu_rt_start));\n                }\n            }\n\n            while (this._FBU.rects > 0) {\n                if (this._rfb_state !== \"normal\") { return false; }\n\n                if (this._sock.rQwait(\"FBU\", this._FBU.bytes)) { return false; }\n                if (this._FBU.bytes === 0) {\n                    if (this._sock.rQwait(\"rect header\", 12)) { return false; }\n                    /* New FramebufferUpdate */\n\n                    var hdr = this._sock.rQshiftBytes(12);\n                    this._FBU.x        = (hdr[0] << 8) + hdr[1];\n                    this._FBU.y        = (hdr[2] << 8) + hdr[3];\n                    this._FBU.width    = (hdr[4] << 8) + hdr[5];\n                    this._FBU.height   = (hdr[6] << 8) + hdr[7];\n                    this._FBU.encoding = parseInt((hdr[8] << 24) + (hdr[9] << 16) +\n                                                  (hdr[10] << 8) + hdr[11], 10);\n\n                    this._onFBUReceive(this,\n                        {'x': this._FBU.x, 'y': this._FBU.y,\n                         'width': this._FBU.width, 'height': this._FBU.height,\n                         'encoding': this._FBU.encoding,\n                         'encodingName': this._encNames[this._FBU.encoding]});\n\n                    if (!this._encNames[this._FBU.encoding]) {\n                        this._fail(\"Disconnected: unsupported encoding \" +\n                                   this._FBU.encoding);\n                        return false;\n                    }\n                }\n\n                this._timing.last_fbu = (new Date()).getTime();\n\n                ret = this._encHandlers[this._FBU.encoding]();\n\n                now = (new Date()).getTime();\n                this._timing.cur_fbu += (now - this._timing.last_fbu);\n\n                if (ret) {\n                    this._encStats[this._FBU.encoding][0]++;\n                    this._encStats[this._FBU.encoding][1]++;\n                    this._timing.pixels += this._FBU.width * this._FBU.height;\n                }\n\n                if (this._timing.pixels >= (this._fb_width * this._fb_height)) {\n                    if ((this._FBU.width === this._fb_width && this._FBU.height === this._fb_height) ||\n                        this._timing.fbu_rt_start > 0) {\n                        this._timing.full_fbu_total += this._timing.cur_fbu;\n                        this._timing.full_fbu_cnt++;\n                        Util.Info(\"Timing of full FBU, curr: \" +\n                                  this._timing.cur_fbu + \", total: \" +\n                                  this._timing.full_fbu_total + \", cnt: \" +\n                                  this._timing.full_fbu_cnt + \", avg: \" +\n                                  (this._timing.full_fbu_total / this._timing.full_fbu_cnt));\n                    }\n\n                    if (this._timing.fbu_rt_start > 0) {\n                        var fbu_rt_diff = now - this._timing.fbu_rt_start;\n                        this._timing.fbu_rt_total += fbu_rt_diff;\n                        this._timing.fbu_rt_cnt++;\n                        Util.Info(\"full FBU round-trip, cur: \" +\n                                  fbu_rt_diff + \", total: \" +\n                                  this._timing.fbu_rt_total + \", cnt: \" +\n                                  this._timing.fbu_rt_cnt + \", avg: \" +\n                                  (this._timing.fbu_rt_total / this._timing.fbu_rt_cnt));\n                        this._timing.fbu_rt_start = 0;\n                    }\n                }\n\n                if (!ret) { return ret; }  // need more data\n            }\n\n            this._onFBUComplete(this,\n                    {'x': this._FBU.x, 'y': this._FBU.y,\n                     'width': this._FBU.width, 'height': this._FBU.height,\n                     'encoding': this._FBU.encoding,\n                     'encodingName': this._encNames[this._FBU.encoding]});\n\n            return true;  // We finished this FBU\n        },\n    };\n\n    Util.make_properties(RFB, [\n        ['target', 'wo', 'dom'],                // VNC display rendering Canvas object\n        ['focusContainer', 'wo', 'dom'],        // DOM element that captures keyboard input\n        ['encrypt', 'rw', 'bool'],              // Use TLS/SSL/wss encryption\n        ['true_color', 'rw', 'bool'],           // Request true color pixel data\n        ['local_cursor', 'rw', 'bool'],         // Request locally rendered cursor\n        ['shared', 'rw', 'bool'],               // Request shared mode\n        ['view_only', 'rw', 'bool'],            // Disable client mouse/keyboard\n        ['xvp_password_sep', 'rw', 'str'],      // Separator for XVP password fields\n        ['disconnectTimeout', 'rw', 'int'],     // Time (s) to wait for disconnection\n        ['wsProtocols', 'rw', 'arr'],           // Protocols to use in the WebSocket connection\n        ['repeaterID', 'rw', 'str'],            // [UltraVNC] RepeaterID to connect to\n        ['viewportDrag', 'rw', 'bool'],         // Move the viewport on mouse drags\n\n        // Callback functions\n        ['onUpdateState', 'rw', 'func'],        // onUpdateState(rfb, state, oldstate, statusMsg): RFB state update/change\n        ['onPasswordRequired', 'rw', 'func'],   // onPasswordRequired(rfb): VNC password is required\n        ['onClipboard', 'rw', 'func'],          // onClipboard(rfb, text): RFB clipboard contents received\n        ['onBell', 'rw', 'func'],               // onBell(rfb): RFB Bell message received\n        ['onFBUReceive', 'rw', 'func'],         // onFBUReceive(rfb, fbu): RFB FBU received but not yet processed\n        ['onFBUComplete', 'rw', 'func'],        // onFBUComplete(rfb, fbu): RFB FBU received and processed\n        ['onFBResize', 'rw', 'func'],           // onFBResize(rfb, width, height): frame buffer resized\n        ['onDesktopName', 'rw', 'func'],        // onDesktopName(rfb, name): desktop name received\n        ['onXvpInit', 'rw', 'func'],            // onXvpInit(version): XVP extensions active for this connection\n    ]);\n\n    RFB.prototype.set_local_cursor = function (cursor) {\n        if (!cursor || (cursor in {'0': 1, 'no': 1, 'false': 1})) {\n            this._local_cursor = false;\n        } else {\n            if (this._display.get_cursor_uri()) {\n                this._local_cursor = true;\n            } else {\n                Util.Warn(\"Browser does not support local cursor\");\n            }\n        }\n    };\n\n    RFB.prototype.get_display = function () { return this._display; };\n    RFB.prototype.get_keyboard = function () { return this._keyboard; };\n    RFB.prototype.get_mouse = function () { return this._mouse; };\n\n    // Class Methods\n    RFB.messages = {\n        keyEvent: function (keysym, down) {\n            var arr = [4];\n            arr.push8(down);\n            arr.push16(0);\n            arr.push32(keysym);\n            return arr;\n        },\n\n        pointerEvent: function (x, y, mask) {\n            var arr = [5];  // msg-type\n            arr.push8(mask);\n            arr.push16(x);\n            arr.push16(y);\n            return arr;\n        },\n\n        // TODO(directxman12): make this unicode compatible?\n        clientCutText: function (text) {\n            var arr = [6];  // msg-type\n            arr.push8(0);   // padding\n            arr.push8(0);   // padding\n            arr.push8(0);   // padding\n            arr.push32(text.length);\n            var n = text.length;\n            for (var i = 0; i < n; i++) {\n                arr.push(text.charCodeAt(i));\n            }\n\n            return arr;\n        },\n\n        pixelFormat: function (bpp, depth, true_color) {\n            var arr = [0]; // msg-type\n            arr.push8(0);  // padding\n            arr.push8(0);  // padding\n            arr.push8(0);  // padding\n\n            arr.push8(bpp * 8); // bits-per-pixel\n            arr.push8(depth * 8); // depth\n            arr.push8(0);  // little-endian\n            arr.push8(true_color ? 1 : 0);  // true-color\n\n            arr.push16(255);  // red-max\n            arr.push16(255);  // green-max\n            arr.push16(255);  // blue-max\n            arr.push8(16);    // red-shift\n            arr.push8(8);     // green-shift\n            arr.push8(0);     // blue-shift\n\n            arr.push8(0);     // padding\n            arr.push8(0);     // padding\n            arr.push8(0);     // padding\n            return arr;\n        },\n\n        clientEncodings: function (encodings, local_cursor, true_color) {\n            var i, encList = [];\n\n            for (i = 0; i < encodings.length; i++) {\n                if (encodings[i][0] === \"Cursor\" && !local_cursor) {\n                    Util.Debug(\"Skipping Cursor pseudo-encoding\");\n                } else if (encodings[i][0] === \"TIGHT\" && !true_color) {\n                    // TODO: remove this when we have tight+non-true-color\n                    Util.Warn(\"Skipping tight as it is only supported with true color\");\n                } else {\n                    encList.push(encodings[i][1]);\n                }\n            }\n\n            var arr = [2];  // msg-type\n            arr.push8(0);   // padding\n\n            arr.push16(encList.length);  // encoding count\n            for (i = 0; i < encList.length; i++) {\n                arr.push32(encList[i]);\n            }\n\n            return arr;\n        },\n\n        fbUpdateRequests: function (cleanDirty, fb_width, fb_height) {\n            var arr = [];\n\n            var cb = cleanDirty.cleanBox;\n            var w, h;\n            if (cb.w > 0 && cb.h > 0) {\n                w = typeof cb.w === \"undefined\" ? fb_width : cb.w;\n                h = typeof cb.h === \"undefined\" ? fb_height : cb.h;\n                // Request incremental for clean box\n                arr = arr.concat(RFB.messages.fbUpdateRequest(1, cb.x, cb.y, w, h));\n            }\n\n            for (var i = 0; i < cleanDirty.dirtyBoxes.length; i++) {\n                var db = cleanDirty.dirtyBoxes[i];\n                // Force all (non-incremental) for dirty box\n                w = typeof db.w === \"undefined\" ? fb_width : db.w;\n                h = typeof db.h === \"undefined\" ? fb_height : db.h;\n                arr = arr.concat(RFB.messages.fbUpdateRequest(0, db.x, db.y, w, h));\n            }\n\n            return arr;\n        },\n\n        fbUpdateRequest: function (incremental, x, y, w, h) {\n            if (typeof(x) === \"undefined\") { x = 0; }\n            if (typeof(y) === \"undefined\") { y = 0; }\n\n            var arr = [3];  // msg-type\n            arr.push8(incremental);\n            arr.push16(x);\n            arr.push16(y);\n            arr.push16(w);\n            arr.push16(h);\n\n            return arr;\n        }\n    };\n\n    RFB.genDES = function (password, challenge) {\n        var passwd = [];\n        for (var i = 0; i < password.length; i++) {\n            passwd.push(password.charCodeAt(i));\n        }\n        return (new DES(passwd)).encrypt(challenge);\n    };\n\n    RFB.extract_data_uri = function (arr) {\n        return \";base64,\" + Base64.encode(arr);\n    };\n\n    RFB.encodingHandlers = {\n        RAW: function () {\n            if (this._FBU.lines === 0) {\n                this._FBU.lines = this._FBU.height;\n            }\n\n            this._FBU.bytes = this._FBU.width * this._fb_Bpp;  // at least a line\n            if (this._sock.rQwait(\"RAW\", this._FBU.bytes)) { return false; }\n            var cur_y = this._FBU.y + (this._FBU.height - this._FBU.lines);\n            var curr_height = Math.min(this._FBU.lines,\n                                       Math.floor(this._sock.rQlen() / (this._FBU.width * this._fb_Bpp)));\n            this._display.blitImage(this._FBU.x, cur_y, this._FBU.width,\n                                    curr_height, this._sock.get_rQ(),\n                                    this._sock.get_rQi());\n            this._sock.rQskipBytes(this._FBU.width * curr_height * this._fb_Bpp);\n            this._FBU.lines -= curr_height;\n\n            if (this._FBU.lines > 0) {\n                this._FBU.bytes = this._FBU.width * this._fb_Bpp;  // At least another line\n            } else {\n                this._FBU.rects--;\n                this._FBU.bytes = 0;\n            }\n\n            return true;\n        },\n\n        COPYRECT: function () {\n            this._FBU.bytes = 4;\n            if (this._sock.rQwait(\"COPYRECT\", 4)) { return false; }\n            this._display.renderQ_push({\n                'type': 'copy',\n                'old_x': this._sock.rQshift16(),\n                'old_y': this._sock.rQshift16(),\n                'x': this._FBU.x,\n                'y': this._FBU.y,\n                'width': this._FBU.width,\n                'height': this._FBU.height\n            });\n            this._FBU.rects--;\n            this._FBU.bytes = 0;\n            return true;\n        },\n\n        RRE: function () {\n            var color;\n            if (this._FBU.subrects === 0) {\n                this._FBU.bytes = 4 + this._fb_Bpp;\n                if (this._sock.rQwait(\"RRE\", 4 + this._fb_Bpp)) { return false; }\n                this._FBU.subrects = this._sock.rQshift32();\n                color = this._sock.rQshiftBytes(this._fb_Bpp);  // Background\n                this._display.fillRect(this._FBU.x, this._FBU.y, this._FBU.width, this._FBU.height, color);\n            }\n\n            while (this._FBU.subrects > 0 && this._sock.rQlen() >= (this._fb_Bpp + 8)) {\n                color = this._sock.rQshiftBytes(this._fb_Bpp);\n                var x = this._sock.rQshift16();\n                var y = this._sock.rQshift16();\n                var width = this._sock.rQshift16();\n                var height = this._sock.rQshift16();\n                this._display.fillRect(this._FBU.x + x, this._FBU.y + y, width, height, color);\n                this._FBU.subrects--;\n            }\n\n            if (this._FBU.subrects > 0) {\n                var chunk = Math.min(this._rre_chunk_sz, this._FBU.subrects);\n                this._FBU.bytes = (this._fb_Bpp + 8) * chunk;\n            } else {\n                this._FBU.rects--;\n                this._FBU.bytes = 0;\n            }\n\n            return true;\n        },\n\n        HEXTILE: function () {\n            var rQ = this._sock.get_rQ();\n            var rQi = this._sock.get_rQi();\n\n            if (this._FBU.tiles === 0) {\n                this._FBU.tiles_x = Math.ceil(this._FBU.width / 16);\n                this._FBU.tiles_y = Math.ceil(this._FBU.height / 16);\n                this._FBU.total_tiles = this._FBU.tiles_x * this._FBU.tiles_y;\n                this._FBU.tiles = this._FBU.total_tiles;\n            }\n\n            while (this._FBU.tiles > 0) {\n                this._FBU.bytes = 1;\n                if (this._sock.rQwait(\"HEXTILE subencoding\", this._FBU.bytes)) { return false; }\n                var subencoding = rQ[rQi];  // Peek\n                if (subencoding > 30) {  // Raw\n                    this._fail(\"Disconnected: illegal hextile subencoding \" + subencoding);\n                    return false;\n                }\n\n                var subrects = 0;\n                var curr_tile = this._FBU.total_tiles - this._FBU.tiles;\n                var tile_x = curr_tile % this._FBU.tiles_x;\n                var tile_y = Math.floor(curr_tile / this._FBU.tiles_x);\n                var x = this._FBU.x + tile_x * 16;\n                var y = this._FBU.y + tile_y * 16;\n                var w = Math.min(16, (this._FBU.x + this._FBU.width) - x);\n                var h = Math.min(16, (this._FBU.y + this._FBU.height) - y);\n\n                // Figure out how much we are expecting\n                if (subencoding & 0x01) {  // Raw\n                    this._FBU.bytes += w * h * this._fb_Bpp;\n                } else {\n                    if (subencoding & 0x02) {  // Background\n                        this._FBU.bytes += this._fb_Bpp;\n                    }\n                    if (subencoding & 0x04) {  // Foreground\n                        this._FBU.bytes += this._fb_Bpp;\n                    }\n                    if (subencoding & 0x08) {  // AnySubrects\n                        this._FBU.bytes++;  // Since we aren't shifting it off\n                        if (this._sock.rQwait(\"hextile subrects header\", this._FBU.bytes)) { return false; }\n                        subrects = rQ[rQi + this._FBU.bytes - 1];  // Peek\n                        if (subencoding & 0x10) {  // SubrectsColoured\n                            this._FBU.bytes += subrects * (this._fb_Bpp + 2);\n                        } else {\n                            this._FBU.bytes += subrects * 2;\n                        }\n                    }\n                }\n\n                if (this._sock.rQwait(\"hextile\", this._FBU.bytes)) { return false; }\n\n                // We know the encoding and have a whole tile\n                this._FBU.subencoding = rQ[rQi];\n                rQi++;\n                if (this._FBU.subencoding === 0) {\n                    if (this._FBU.lastsubencoding & 0x01) {\n                        // Weird: ignore blanks are RAW\n                        Util.Debug(\"     Ignoring blank after RAW\");\n                    } else {\n                        this._display.fillRect(x, y, w, h, this._FBU.background);\n                    }\n                } else if (this._FBU.subencoding & 0x01) {  // Raw\n                    this._display.blitImage(x, y, w, h, rQ, rQi);\n                    rQi += this._FBU.bytes - 1;\n                } else {\n                    if (this._FBU.subencoding & 0x02) {  // Background\n                        this._FBU.background = rQ.slice(rQi, rQi + this._fb_Bpp);\n                        rQi += this._fb_Bpp;\n                    }\n                    if (this._FBU.subencoding & 0x04) {  // Foreground\n                        this._FBU.foreground = rQ.slice(rQi, rQi + this._fb_Bpp);\n                        rQi += this._fb_Bpp;\n                    }\n\n                    this._display.startTile(x, y, w, h, this._FBU.background);\n                    if (this._FBU.subencoding & 0x08) {  // AnySubrects\n                        subrects = rQ[rQi];\n                        rQi++;\n\n                        for (var s = 0; s < subrects; s++) {\n                            var color;\n                            if (this._FBU.subencoding & 0x10) {  // SubrectsColoured\n                                color = rQ.slice(rQi, rQi + this._fb_Bpp);\n                                rQi += this._fb_Bpp;\n                            } else {\n                                color = this._FBU.foreground;\n                            }\n                            var xy = rQ[rQi];\n                            rQi++;\n                            var sx = (xy >> 4);\n                            var sy = (xy & 0x0f);\n\n                            var wh = rQ[rQi];\n                            rQi++;\n                            var sw = (wh >> 4) + 1;\n                            var sh = (wh & 0x0f) + 1;\n\n                            this._display.subTile(sx, sy, sw, sh, color);\n                        }\n                    }\n                    this._display.finishTile();\n                }\n                this._sock.set_rQi(rQi);\n                this._FBU.lastsubencoding = this._FBU.subencoding;\n                this._FBU.bytes = 0;\n                this._FBU.tiles--;\n            }\n\n            if (this._FBU.tiles === 0) {\n                this._FBU.rects--;\n            }\n\n            return true;\n        },\n\n        getTightCLength: function (arr) {\n            var header = 1, data = 0;\n            data += arr[0] & 0x7f;\n            if (arr[0] & 0x80) {\n                header++;\n                data += (arr[1] & 0x7f) << 7;\n                if (arr[1] & 0x80) {\n                    header++;\n                    data += arr[2] << 14;\n                }\n            }\n            return [header, data];\n        },\n\n        display_tight: function (isTightPNG) {\n            if (this._fb_depth === 1) {\n                this._fail(\"Tight protocol handler only implements true color mode\");\n            }\n\n            this._FBU.bytes = 1;  // compression-control byte\n            if (this._sock.rQwait(\"TIGHT compression-control\", this._FBU.bytes)) { return false; }\n\n            var checksum = function (data) {\n                var sum = 0;\n                for (var i = 0; i < data.length; i++) {\n                    sum += data[i];\n                    if (sum > 65536) sum -= 65536;\n                }\n                return sum;\n            };\n\n            var resetStreams = 0;\n            var streamId = -1;\n            var decompress = function (data) {\n                for (var i = 0; i < 4; i++) {\n                    if ((resetStreams >> i) & 1) {\n                        this._FBU.zlibs[i].reset();\n                        Util.Info(\"Reset zlib stream \" + i);\n                    }\n                }\n\n                var uncompressed = this._FBU.zlibs[streamId].uncompress(data, 0);\n                if (uncompressed.status !== 0) {\n                    Util.Error(\"Invalid data in zlib stream\");\n                }\n\n                return uncompressed.data;\n            }.bind(this);\n\n            var indexedToRGB = function (data, numColors, palette, width, height) {\n                // Convert indexed (palette based) image data to RGB\n                // TODO: reduce number of calculations inside loop\n                var dest = [];\n                var x, y, dp, sp;\n                if (numColors === 2) {\n                    var w = Math.floor((width + 7) / 8);\n                    var w1 = Math.floor(width / 8);\n\n                    for (y = 0; y < height; y++) {\n                        var b;\n                        for (x = 0; x < w1; x++) {\n                            for (b = 7; b >= 0; b--) {\n                                dp = (y * width + x * 8 + 7 - b) * 3;\n                                sp = (data[y * w + x] >> b & 1) * 3;\n                                dest[dp] = palette[sp];\n                                dest[dp + 1] = palette[sp + 1];\n                                dest[dp + 2] = palette[sp + 2];\n                            }\n                        }\n\n                        for (b = 7; b >= 8 - width % 8; b--) {\n                            dp = (y * width + x * 8 + 7 - b) * 3;\n                            sp = (data[y * w + x] >> b & 1) * 3;\n                            dest[dp] = palette[sp];\n                            dest[dp + 1] = palette[sp + 1];\n                            dest[dp + 2] = palette[sp + 2];\n                        }\n                    }\n                } else {\n                    for (y = 0; y < height; y++) {\n                        for (x = 0; x < width; x++) {\n                            dp = (y * width + x) * 3;\n                            sp = data[y * width + x] * 3;\n                            dest[dp] = palette[sp];\n                            dest[dp + 1] = palette[sp + 1];\n                            dest[dp + 2] = palette[sp + 2];\n                        }\n                    }\n                }\n\n                return dest;\n            }.bind(this);\n\n            var rQ = this._sock.get_rQ();\n            var rQi = this._sock.get_rQi();\n            var cmode, clength, data;\n\n            var handlePalette = function () {\n                var numColors = rQ[rQi + 2] + 1;\n                var paletteSize = numColors * this._fb_depth;\n                this._FBU.bytes += paletteSize;\n                if (this._sock.rQwait(\"TIGHT palette \" + cmode, this._FBU.bytes)) { return false; }\n\n                var bpp = (numColors <= 2) ? 1 : 8;\n                var rowSize = Math.floor((this._FBU.width * bpp + 7) / 8);\n                var raw = false;\n                if (rowSize * this._FBU.height < 12) {\n                    raw = true;\n                    clength = [0, rowSize * this._FBU.height];\n                } else {\n                    clength = RFB.encodingHandlers.getTightCLength(this._sock.rQslice(3 + paletteSize,\n                                                                                      3 + paletteSize + 3));\n                }\n\n                this._FBU.bytes += clength[0] + clength[1];\n                if (this._sock.rQwait(\"TIGHT \" + cmode, this._FBU.bytes)) { return false; }\n\n                // Shift ctl, filter id, num colors, palette entries, and clength off\n                this._sock.rQskipBytes(3);\n                var palette = this._sock.rQshiftBytes(paletteSize);\n                this._sock.rQskipBytes(clength[0]);\n\n                if (raw) {\n                    data = this._sock.rQshiftBytes(clength[1]);\n                } else {\n                    data = decompress(this._sock.rQshiftBytes(clength[1]));\n                }\n\n                // Convert indexed (palette based) image data to RGB\n                var rgb = indexedToRGB(data, numColors, palette, this._FBU.width, this._FBU.height);\n\n                this._display.renderQ_push({\n                    'type': 'blitRgb',\n                    'data': rgb,\n                    'x': this._FBU.x,\n                    'y': this._FBU.y,\n                    'width': this._FBU.width,\n                    'height': this._FBU.height\n                });\n\n                return true;\n            }.bind(this);\n\n            var handleCopy = function () {\n                var raw = false;\n                var uncompressedSize = this._FBU.width * this._FBU.height * this._fb_depth;\n                if (uncompressedSize < 12) {\n                    raw = true;\n                    clength = [0, uncompressedSize];\n                } else {\n                    clength = RFB.encodingHandlers.getTightCLength(this._sock.rQslice(1, 4));\n                }\n                this._FBU.bytes = 1 + clength[0] + clength[1];\n                if (this._sock.rQwait(\"TIGHT \" + cmode, this._FBU.bytes)) { return false; }\n\n                // Shift ctl, clength off\n                this._sock.rQshiftBytes(1 + clength[0]);\n\n                if (raw) {\n                    data = this._sock.rQshiftBytes(clength[1]);\n                } else {\n                    data = decompress(this._sock.rQshiftBytes(clength[1]));\n                }\n\n                this._display.renderQ_push({\n                    'type': 'blitRgb',\n                    'data': data,\n                    'x': this._FBU.x,\n                    'y': this._FBU.y,\n                    'width': this._FBU.width,\n                    'height': this._FBU.height\n                });\n\n                return true;\n            }.bind(this);\n\n            var ctl = this._sock.rQpeek8();\n\n            // Keep tight reset bits\n            resetStreams = ctl & 0xF;\n\n            // Figure out filter\n            ctl = ctl >> 4;\n            streamId = ctl & 0x3;\n\n            if (ctl === 0x08)       cmode = \"fill\";\n            else if (ctl === 0x09)  cmode = \"jpeg\";\n            else if (ctl === 0x0A)  cmode = \"png\";\n            else if (ctl & 0x04)    cmode = \"filter\";\n            else if (ctl < 0x04)    cmode = \"copy\";\n            else return this._fail(\"Illegal tight compression received, ctl: \" + ctl);\n\n            if (isTightPNG && (cmode === \"filter\" || cmode === \"copy\")) {\n                return this._fail(\"filter/copy received in tightPNG mode\");\n            }\n\n            switch (cmode) {\n                // fill use fb_depth because TPIXELs drop the padding byte\n                case \"fill\":  // TPIXEL\n                    this._FBU.bytes += this._fb_depth;\n                    break;\n                case \"jpeg\":  // max clength\n                    this._FBU.bytes += 3;\n                    break;\n                case \"png\":  // max clength\n                    this._FBU.bytes += 3;\n                    break;\n                case \"filter\":  // filter id + num colors if palette\n                    this._FBU.bytes += 2;\n                    break;\n                case \"copy\":\n                    break;\n            }\n\n            if (this._sock.rQwait(\"TIGHT \" + cmode, this._FBU.bytes)) { return false; }\n\n            // Determine FBU.bytes\n            switch (cmode) {\n                case \"fill\":\n                    this._sock.rQskip8();  // shift off ctl\n                    var color = this._sock.rQshiftBytes(this._fb_depth);\n                    this._display.renderQ_push({\n                        'type': 'fill',\n                        'x': this._FBU.x,\n                        'y': this._FBU.y,\n                        'width': this._FBU.width,\n                        'height': this._FBU.height,\n                        'color': [color[2], color[1], color[0]]\n                    });\n                    break;\n                case \"png\":\n                case \"jpeg\":\n                    clength = RFB.encodingHandlers.getTightCLength(this._sock.rQslice(1, 4));\n                    this._FBU.bytes = 1 + clength[0] + clength[1];  // ctl + clength size + jpeg-data\n                    if (this._sock.rQwait(\"TIGHT \" + cmode, this._FBU.bytes)) { return false; }\n\n                    // We have everything, render it\n                    this._sock.rQskipBytes(1 + clength[0]);  // shift off clt + compact length\n                    var img = new Image();\n                    img.src = \"data: image/\" + cmode +\n                        RFB.extract_data_uri(this._sock.rQshiftBytes(clength[1]));\n                    this._display.renderQ_push({\n                        'type': 'img',\n                        'img': img,\n                        'x': this._FBU.x,\n                        'y': this._FBU.y\n                    });\n                    img = null;\n                    break;\n                case \"filter\":\n                    var filterId = rQ[rQi + 1];\n                    if (filterId === 1) {\n                        if (!handlePalette()) { return false; }\n                    } else {\n                        // Filter 0, Copy could be valid here, but servers don't send it as an explicit filter\n                        // Filter 2, Gradient is valid but not use if jpeg is enabled\n                        // TODO(directxman12): why aren't we just calling '_fail' here\n                        throw new Error(\"Unsupported tight subencoding received, filter: \" + filterId);\n                    }\n                    break;\n                case \"copy\":\n                    if (!handleCopy()) { return false; }\n                    break;\n            }\n\n\n            this._FBU.bytes = 0;\n            this._FBU.rects--;\n\n            return true;\n        },\n\n        TIGHT: function () { return this._encHandlers.display_tight(false); },\n        TIGHT_PNG: function () { return this._encHandlers.display_tight(true); },\n\n        last_rect: function () {\n            this._FBU.rects = 0;\n            return true;\n        },\n\n        DesktopSize: function () {\n            Util.Debug(\">> set_desktopsize\");\n            this._fb_width = this._FBU.width;\n            this._fb_height = this._FBU.height;\n            this._onFBResize(this, this._fb_width, this._fb_height);\n            this._display.resize(this._fb_width, this._fb_height);\n            this._timing.fbu_rt_start = (new Date()).getTime();\n\n            this._FBU.bytes = 0;\n            this._FBU.rects--;\n\n            Util.Debug(\"<< set_desktopsize\");\n            return true;\n        },\n\n        Cursor: function () {\n            Util.Debug(\">> set_cursor\");\n            var x = this._FBU.x;  // hotspot-x\n            var y = this._FBU.y;  // hotspot-y\n            var w = this._FBU.width;\n            var h = this._FBU.height;\n\n            var pixelslength = w * h * this._fb_Bpp;\n            var masklength = Math.floor((w + 7) / 8) * h;\n\n            this._FBU.bytes = pixelslength + masklength;\n            if (this._sock.rQwait(\"cursor encoding\", this._FBU.bytes)) { return false; }\n\n            this._display.changeCursor(this._sock.rQshiftBytes(pixelslength),\n                                       this._sock.rQshiftBytes(masklength),\n                                       x, y, w, h);\n\n            this._FBU.bytes = 0;\n            this._FBU.rects--;\n\n            Util.Debug(\"<< set_cursor\");\n            return true;\n        },\n\n        JPEG_quality_lo: function () {\n            Util.Error(\"Server sent jpeg_quality pseudo-encoding\");\n        },\n\n        compress_lo: function () {\n            Util.Error(\"Server sent compress level pseudo-encoding\");\n        }\n    };\n})();\n\ndefine(\"vnc-rfb\", [\"vnc-util\"], function(){});\n\n",
    "var XK_VoidSymbol =                0xffffff, /* Void symbol */\n\nXK_BackSpace =                   0xff08, /* Back space, back char */\nXK_Tab =                         0xff09,\nXK_Linefeed =                    0xff0a, /* Linefeed, LF */\nXK_Clear =                       0xff0b,\nXK_Return =                      0xff0d, /* Return, enter */\nXK_Pause =                       0xff13, /* Pause, hold */\nXK_Scroll_Lock =                 0xff14,\nXK_Sys_Req =                     0xff15,\nXK_Escape =                      0xff1b,\nXK_Delete =                      0xffff, /* Delete, rubout */\n\n/* Cursor control & motion */\n\nXK_Home =                        0xff50,\nXK_Left =                        0xff51, /* Move left, left arrow */\nXK_Up =                          0xff52, /* Move up, up arrow */\nXK_Right =                       0xff53, /* Move right, right arrow */\nXK_Down =                        0xff54, /* Move down, down arrow */\nXK_Prior =                       0xff55, /* Prior, previous */\nXK_Page_Up =                     0xff55,\nXK_Next =                        0xff56, /* Next */\nXK_Page_Down =                   0xff56,\nXK_End =                         0xff57, /* EOL */\nXK_Begin =                       0xff58, /* BOL */\n\n\n/* Misc functions */\n\nXK_Select =                      0xff60, /* Select, mark */\nXK_Print =                       0xff61,\nXK_Execute =                     0xff62, /* Execute, run, do */\nXK_Insert =                      0xff63, /* Insert, insert here */\nXK_Undo =                        0xff65,\nXK_Redo =                        0xff66, /* Redo, again */\nXK_Menu =                        0xff67,\nXK_Find =                        0xff68, /* Find, search */\nXK_Cancel =                      0xff69, /* Cancel, stop, abort, exit */\nXK_Help =                        0xff6a, /* Help */\nXK_Break =                       0xff6b,\nXK_Mode_switch =                 0xff7e, /* Character set switch */\nXK_script_switch =               0xff7e, /* Alias for mode_switch */\nXK_Num_Lock =                    0xff7f,\n\n/* Keypad functions, keypad numbers cleverly chosen to map to ASCII */\n\nXK_KP_Space =                    0xff80, /* Space */\nXK_KP_Tab =                      0xff89,\nXK_KP_Enter =                    0xff8d, /* Enter */\nXK_KP_F1 =                       0xff91, /* PF1, KP_A, ... */\nXK_KP_F2 =                       0xff92,\nXK_KP_F3 =                       0xff93,\nXK_KP_F4 =                       0xff94,\nXK_KP_Home =                     0xff95,\nXK_KP_Left =                     0xff96,\nXK_KP_Up =                       0xff97,\nXK_KP_Right =                    0xff98,\nXK_KP_Down =                     0xff99,\nXK_KP_Prior =                    0xff9a,\nXK_KP_Page_Up =                  0xff9a\nXK_KP_Next =                     0xff9b,\nXK_KP_Page_Down =                0xff9b,\nXK_KP_End =                      0xff9c,\nXK_KP_Begin =                    0xff9d,\nXK_KP_Insert =                   0xff9e,\nXK_KP_Delete =                   0xff9f,\nXK_KP_Equal =                    0xffbd, /* Equals */\nXK_KP_Multiply =                 0xffaa,\nXK_KP_Add =                      0xffab,\nXK_KP_Separator =                0xffac, /* Separator, often comma */\nXK_KP_Subtract =                 0xffad,\nXK_KP_Decimal =                  0xffae,\nXK_KP_Divide =                   0xffaf,\n\nXK_KP_0 =                        0xffb0,\nXK_KP_1 =                        0xffb1,\nXK_KP_2 =                        0xffb2,\nXK_KP_3 =                        0xffb3,\nXK_KP_4 =                        0xffb4,\nXK_KP_5 =                        0xffb5,\nXK_KP_6 =                        0xffb6,\nXK_KP_7 =                        0xffb7,\nXK_KP_8 =                        0xffb8,\nXK_KP_9 =                        0xffb9,\n\n/*\n * Auxiliary functions; note the duplicate definitions for left and right\n * function keys;  Sun keyboards and a few other manufacturers have such\n * function key groups on the left and/or right sides of the keyboard.\n * We've not found a keyboard with more than 35 function keys total.\n */\n\nXK_F1 =                          0xffbe,\nXK_F2 =                          0xffbf,\nXK_F3 =                          0xffc0,\nXK_F4 =                          0xffc1,\nXK_F5 =                          0xffc2,\nXK_F6 =                          0xffc3,\nXK_F7 =                          0xffc4,\nXK_F8 =                          0xffc5,\nXK_F9 =                          0xffc6,\nXK_F10 =                         0xffc7,\nXK_F11 =                         0xffc8,\nXK_L1 =                          0xffc8,\nXK_F12 =                         0xffc9,\nXK_L2 =                          0xffc9,\nXK_F13 =                         0xffca,\nXK_L3 =                          0xffca,\nXK_F14 =                         0xffcb,\nXK_L4 =                          0xffcb,\nXK_F15 =                         0xffcc,\nXK_L5 =                          0xffcc,\nXK_F16 =                         0xffcd,\nXK_L6 =                          0xffcd,\nXK_F17 =                         0xffce,\nXK_L7 =                          0xffce,\nXK_F18 =                         0xffcf,\nXK_L8 =                          0xffcf,\nXK_F19 =                         0xffd0,\nXK_L9 =                          0xffd0,\nXK_F20 =                         0xffd1,\nXK_L10 =                         0xffd1,\nXK_F21 =                         0xffd2,\nXK_R1 =                          0xffd2,\nXK_F22 =                         0xffd3,\nXK_R2 =                          0xffd3,\nXK_F23 =                         0xffd4,\nXK_R3 =                          0xffd4,\nXK_F24 =                         0xffd5,\nXK_R4 =                          0xffd5,\nXK_F25 =                         0xffd6,\nXK_R5 =                          0xffd6,\nXK_F26 =                         0xffd7,\nXK_R6 =                          0xffd7,\nXK_F27 =                         0xffd8,\nXK_R7 =                          0xffd8,\nXK_F28 =                         0xffd9,\nXK_R8 =                          0xffd9,\nXK_F29 =                         0xffda,\nXK_R9 =                          0xffda,\nXK_F30 =                         0xffdb,\nXK_R10 =                         0xffdb,\nXK_F31 =                         0xffdc,\nXK_R11 =                         0xffdc,\nXK_F32 =                         0xffdd,\nXK_R12 =                         0xffdd,\nXK_F33 =                         0xffde,\nXK_R13 =                         0xffde,\nXK_F34 =                         0xffdf,\nXK_R14 =                         0xffdf,\nXK_F35 =                         0xffe0,\nXK_R15 =                         0xffe0,\n\n/* Modifiers */\n\nXK_Shift_L =                     0xffe1, /* Left shift */\nXK_Shift_R =                     0xffe2, /* Right shift */\nXK_Control_L =                   0xffe3, /* Left control */\nXK_Control_R =                   0xffe4, /* Right control */\nXK_Caps_Lock =                   0xffe5, /* Caps lock */\nXK_Shift_Lock =                  0xffe6, /* Shift lock */\n\nXK_Meta_L =                      0xffe7, /* Left meta */\nXK_Meta_R =                      0xffe8, /* Right meta */\nXK_Alt_L =                       0xffe9, /* Left alt */\nXK_Alt_R =                       0xffea, /* Right alt */\nXK_Super_L =                     0xffeb, /* Left super */\nXK_Super_R =                     0xffec, /* Right super */\nXK_Hyper_L =                     0xffed, /* Left hyper */\nXK_Hyper_R =                     0xffee, /* Right hyper */\n\nXK_ISO_Level3_Shift =            0xfe03, /* AltGr */\n\n/*\n * Latin 1\n * (ISO/IEC 8859-1 = Unicode U+0020..U+00FF)\n * Byte 3 = 0\n */\n\nXK_space =                       0x0020, /* U+0020 SPACE */\nXK_exclam =                      0x0021, /* U+0021 EXCLAMATION MARK */\nXK_quotedbl =                    0x0022, /* U+0022 QUOTATION MARK */\nXK_numbersign =                  0x0023, /* U+0023 NUMBER SIGN */\nXK_dollar =                      0x0024, /* U+0024 DOLLAR SIGN */\nXK_percent =                     0x0025, /* U+0025 PERCENT SIGN */\nXK_ampersand =                   0x0026, /* U+0026 AMPERSAND */\nXK_apostrophe =                  0x0027, /* U+0027 APOSTROPHE */\nXK_quoteright =                  0x0027, /* deprecated */\nXK_parenleft =                   0x0028, /* U+0028 LEFT PARENTHESIS */\nXK_parenright =                  0x0029, /* U+0029 RIGHT PARENTHESIS */\nXK_asterisk =                    0x002a, /* U+002A ASTERISK */\nXK_plus =                        0x002b, /* U+002B PLUS SIGN */\nXK_comma =                       0x002c, /* U+002C COMMA */\nXK_minus =                       0x002d, /* U+002D HYPHEN-MINUS */\nXK_period =                      0x002e, /* U+002E FULL STOP */\nXK_slash =                       0x002f, /* U+002F SOLIDUS */\nXK_0 =                           0x0030, /* U+0030 DIGIT ZERO */\nXK_1 =                           0x0031, /* U+0031 DIGIT ONE */\nXK_2 =                           0x0032, /* U+0032 DIGIT TWO */\nXK_3 =                           0x0033, /* U+0033 DIGIT THREE */\nXK_4 =                           0x0034, /* U+0034 DIGIT FOUR */\nXK_5 =                           0x0035, /* U+0035 DIGIT FIVE */\nXK_6 =                           0x0036, /* U+0036 DIGIT SIX */\nXK_7 =                           0x0037, /* U+0037 DIGIT SEVEN */\nXK_8 =                           0x0038, /* U+0038 DIGIT EIGHT */\nXK_9 =                           0x0039, /* U+0039 DIGIT NINE */\nXK_colon =                       0x003a, /* U+003A COLON */\nXK_semicolon =                   0x003b, /* U+003B SEMICOLON */\nXK_less =                        0x003c, /* U+003C LESS-THAN SIGN */\nXK_equal =                       0x003d, /* U+003D EQUALS SIGN */\nXK_greater =                     0x003e, /* U+003E GREATER-THAN SIGN */\nXK_question =                    0x003f, /* U+003F QUESTION MARK */\nXK_at =                          0x0040, /* U+0040 COMMERCIAL AT */\nXK_A =                           0x0041, /* U+0041 LATIN CAPITAL LETTER A */\nXK_B =                           0x0042, /* U+0042 LATIN CAPITAL LETTER B */\nXK_C =                           0x0043, /* U+0043 LATIN CAPITAL LETTER C */\nXK_D =                           0x0044, /* U+0044 LATIN CAPITAL LETTER D */\nXK_E =                           0x0045, /* U+0045 LATIN CAPITAL LETTER E */\nXK_F =                           0x0046, /* U+0046 LATIN CAPITAL LETTER F */\nXK_G =                           0x0047, /* U+0047 LATIN CAPITAL LETTER G */\nXK_H =                           0x0048, /* U+0048 LATIN CAPITAL LETTER H */\nXK_I =                           0x0049, /* U+0049 LATIN CAPITAL LETTER I */\nXK_J =                           0x004a, /* U+004A LATIN CAPITAL LETTER J */\nXK_K =                           0x004b, /* U+004B LATIN CAPITAL LETTER K */\nXK_L =                           0x004c, /* U+004C LATIN CAPITAL LETTER L */\nXK_M =                           0x004d, /* U+004D LATIN CAPITAL LETTER M */\nXK_N =                           0x004e, /* U+004E LATIN CAPITAL LETTER N */\nXK_O =                           0x004f, /* U+004F LATIN CAPITAL LETTER O */\nXK_P =                           0x0050, /* U+0050 LATIN CAPITAL LETTER P */\nXK_Q =                           0x0051, /* U+0051 LATIN CAPITAL LETTER Q */\nXK_R =                           0x0052, /* U+0052 LATIN CAPITAL LETTER R */\nXK_S =                           0x0053, /* U+0053 LATIN CAPITAL LETTER S */\nXK_T =                           0x0054, /* U+0054 LATIN CAPITAL LETTER T */\nXK_U =                           0x0055, /* U+0055 LATIN CAPITAL LETTER U */\nXK_V =                           0x0056, /* U+0056 LATIN CAPITAL LETTER V */\nXK_W =                           0x0057, /* U+0057 LATIN CAPITAL LETTER W */\nXK_X =                           0x0058, /* U+0058 LATIN CAPITAL LETTER X */\nXK_Y =                           0x0059, /* U+0059 LATIN CAPITAL LETTER Y */\nXK_Z =                           0x005a, /* U+005A LATIN CAPITAL LETTER Z */\nXK_bracketleft =                 0x005b, /* U+005B LEFT SQUARE BRACKET */\nXK_backslash =                   0x005c, /* U+005C REVERSE SOLIDUS */\nXK_bracketright =                0x005d, /* U+005D RIGHT SQUARE BRACKET */\nXK_asciicircum =                 0x005e, /* U+005E CIRCUMFLEX ACCENT */\nXK_underscore =                  0x005f, /* U+005F LOW LINE */\nXK_grave =                       0x0060, /* U+0060 GRAVE ACCENT */\nXK_quoteleft =                   0x0060, /* deprecated */\nXK_a =                           0x0061, /* U+0061 LATIN SMALL LETTER A */\nXK_b =                           0x0062, /* U+0062 LATIN SMALL LETTER B */\nXK_c =                           0x0063, /* U+0063 LATIN SMALL LETTER C */\nXK_d =                           0x0064, /* U+0064 LATIN SMALL LETTER D */\nXK_e =                           0x0065, /* U+0065 LATIN SMALL LETTER E */\nXK_f =                           0x0066, /* U+0066 LATIN SMALL LETTER F */\nXK_g =                           0x0067, /* U+0067 LATIN SMALL LETTER G */\nXK_h =                           0x0068, /* U+0068 LATIN SMALL LETTER H */\nXK_i =                           0x0069, /* U+0069 LATIN SMALL LETTER I */\nXK_j =                           0x006a, /* U+006A LATIN SMALL LETTER J */\nXK_k =                           0x006b, /* U+006B LATIN SMALL LETTER K */\nXK_l =                           0x006c, /* U+006C LATIN SMALL LETTER L */\nXK_m =                           0x006d, /* U+006D LATIN SMALL LETTER M */\nXK_n =                           0x006e, /* U+006E LATIN SMALL LETTER N */\nXK_o =                           0x006f, /* U+006F LATIN SMALL LETTER O */\nXK_p =                           0x0070, /* U+0070 LATIN SMALL LETTER P */\nXK_q =                           0x0071, /* U+0071 LATIN SMALL LETTER Q */\nXK_r =                           0x0072, /* U+0072 LATIN SMALL LETTER R */\nXK_s =                           0x0073, /* U+0073 LATIN SMALL LETTER S */\nXK_t =                           0x0074, /* U+0074 LATIN SMALL LETTER T */\nXK_u =                           0x0075, /* U+0075 LATIN SMALL LETTER U */\nXK_v =                           0x0076, /* U+0076 LATIN SMALL LETTER V */\nXK_w =                           0x0077, /* U+0077 LATIN SMALL LETTER W */\nXK_x =                           0x0078, /* U+0078 LATIN SMALL LETTER X */\nXK_y =                           0x0079, /* U+0079 LATIN SMALL LETTER Y */\nXK_z =                           0x007a, /* U+007A LATIN SMALL LETTER Z */\nXK_braceleft =                   0x007b, /* U+007B LEFT CURLY BRACKET */\nXK_bar =                         0x007c, /* U+007C VERTICAL LINE */\nXK_braceright =                  0x007d, /* U+007D RIGHT CURLY BRACKET */\nXK_asciitilde =                  0x007e, /* U+007E TILDE */\n\nXK_nobreakspace =                0x00a0, /* U+00A0 NO-BREAK SPACE */\nXK_exclamdown =                  0x00a1, /* U+00A1 INVERTED EXCLAMATION MARK */\nXK_cent =                        0x00a2, /* U+00A2 CENT SIGN */\nXK_sterling =                    0x00a3, /* U+00A3 POUND SIGN */\nXK_currency =                    0x00a4, /* U+00A4 CURRENCY SIGN */\nXK_yen =                         0x00a5, /* U+00A5 YEN SIGN */\nXK_brokenbar =                   0x00a6, /* U+00A6 BROKEN BAR */\nXK_section =                     0x00a7, /* U+00A7 SECTION SIGN */\nXK_diaeresis =                   0x00a8, /* U+00A8 DIAERESIS */\nXK_copyright =                   0x00a9, /* U+00A9 COPYRIGHT SIGN */\nXK_ordfeminine =                 0x00aa, /* U+00AA FEMININE ORDINAL INDICATOR */\nXK_guillemotleft =               0x00ab, /* U+00AB LEFT-POINTING DOUBLE ANGLE QUOTATION MARK */\nXK_notsign =                     0x00ac, /* U+00AC NOT SIGN */\nXK_hyphen =                      0x00ad, /* U+00AD SOFT HYPHEN */\nXK_registered =                  0x00ae, /* U+00AE REGISTERED SIGN */\nXK_macron =                      0x00af, /* U+00AF MACRON */\nXK_degree =                      0x00b0, /* U+00B0 DEGREE SIGN */\nXK_plusminus =                   0x00b1, /* U+00B1 PLUS-MINUS SIGN */\nXK_twosuperior =                 0x00b2, /* U+00B2 SUPERSCRIPT TWO */\nXK_threesuperior =               0x00b3, /* U+00B3 SUPERSCRIPT THREE */\nXK_acute =                       0x00b4, /* U+00B4 ACUTE ACCENT */\nXK_mu =                          0x00b5, /* U+00B5 MICRO SIGN */\nXK_paragraph =                   0x00b6, /* U+00B6 PILCROW SIGN */\nXK_periodcentered =              0x00b7, /* U+00B7 MIDDLE DOT */\nXK_cedilla =                     0x00b8, /* U+00B8 CEDILLA */\nXK_onesuperior =                 0x00b9, /* U+00B9 SUPERSCRIPT ONE */\nXK_masculine =                   0x00ba, /* U+00BA MASCULINE ORDINAL INDICATOR */\nXK_guillemotright =              0x00bb, /* U+00BB RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK */\nXK_onequarter =                  0x00bc, /* U+00BC VULGAR FRACTION ONE QUARTER */\nXK_onehalf =                     0x00bd, /* U+00BD VULGAR FRACTION ONE HALF */\nXK_threequarters =               0x00be, /* U+00BE VULGAR FRACTION THREE QUARTERS */\nXK_questiondown =                0x00bf, /* U+00BF INVERTED QUESTION MARK */\nXK_Agrave =                      0x00c0, /* U+00C0 LATIN CAPITAL LETTER A WITH GRAVE */\nXK_Aacute =                      0x00c1, /* U+00C1 LATIN CAPITAL LETTER A WITH ACUTE */\nXK_Acircumflex =                 0x00c2, /* U+00C2 LATIN CAPITAL LETTER A WITH CIRCUMFLEX */\nXK_Atilde =                      0x00c3, /* U+00C3 LATIN CAPITAL LETTER A WITH TILDE */\nXK_Adiaeresis =                  0x00c4, /* U+00C4 LATIN CAPITAL LETTER A WITH DIAERESIS */\nXK_Aring =                       0x00c5, /* U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE */\nXK_AE =                          0x00c6, /* U+00C6 LATIN CAPITAL LETTER AE */\nXK_Ccedilla =                    0x00c7, /* U+00C7 LATIN CAPITAL LETTER C WITH CEDILLA */\nXK_Egrave =                      0x00c8, /* U+00C8 LATIN CAPITAL LETTER E WITH GRAVE */\nXK_Eacute =                      0x00c9, /* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */\nXK_Ecircumflex =                 0x00ca, /* U+00CA LATIN CAPITAL LETTER E WITH CIRCUMFLEX */\nXK_Ediaeresis =                  0x00cb, /* U+00CB LATIN CAPITAL LETTER E WITH DIAERESIS */\nXK_Igrave =                      0x00cc, /* U+00CC LATIN CAPITAL LETTER I WITH GRAVE */\nXK_Iacute =                      0x00cd, /* U+00CD LATIN CAPITAL LETTER I WITH ACUTE */\nXK_Icircumflex =                 0x00ce, /* U+00CE LATIN CAPITAL LETTER I WITH CIRCUMFLEX */\nXK_Idiaeresis =                  0x00cf, /* U+00CF LATIN CAPITAL LETTER I WITH DIAERESIS */\nXK_ETH =                         0x00d0, /* U+00D0 LATIN CAPITAL LETTER ETH */\nXK_Eth =                         0x00d0, /* deprecated */\nXK_Ntilde =                      0x00d1, /* U+00D1 LATIN CAPITAL LETTER N WITH TILDE */\nXK_Ograve =                      0x00d2, /* U+00D2 LATIN CAPITAL LETTER O WITH GRAVE */\nXK_Oacute =                      0x00d3, /* U+00D3 LATIN CAPITAL LETTER O WITH ACUTE */\nXK_Ocircumflex =                 0x00d4, /* U+00D4 LATIN CAPITAL LETTER O WITH CIRCUMFLEX */\nXK_Otilde =                      0x00d5, /* U+00D5 LATIN CAPITAL LETTER O WITH TILDE */\nXK_Odiaeresis =                  0x00d6, /* U+00D6 LATIN CAPITAL LETTER O WITH DIAERESIS */\nXK_multiply =                    0x00d7, /* U+00D7 MULTIPLICATION SIGN */\nXK_Oslash =                      0x00d8, /* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */\nXK_Ooblique =                    0x00d8, /* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */\nXK_Ugrave =                      0x00d9, /* U+00D9 LATIN CAPITAL LETTER U WITH GRAVE */\nXK_Uacute =                      0x00da, /* U+00DA LATIN CAPITAL LETTER U WITH ACUTE */\nXK_Ucircumflex =                 0x00db, /* U+00DB LATIN CAPITAL LETTER U WITH CIRCUMFLEX */\nXK_Udiaeresis =                  0x00dc, /* U+00DC LATIN CAPITAL LETTER U WITH DIAERESIS */\nXK_Yacute =                      0x00dd, /* U+00DD LATIN CAPITAL LETTER Y WITH ACUTE */\nXK_THORN =                       0x00de, /* U+00DE LATIN CAPITAL LETTER THORN */\nXK_Thorn =                       0x00de, /* deprecated */\nXK_ssharp =                      0x00df, /* U+00DF LATIN SMALL LETTER SHARP S */\nXK_agrave =                      0x00e0, /* U+00E0 LATIN SMALL LETTER A WITH GRAVE */\nXK_aacute =                      0x00e1, /* U+00E1 LATIN SMALL LETTER A WITH ACUTE */\nXK_acircumflex =                 0x00e2, /* U+00E2 LATIN SMALL LETTER A WITH CIRCUMFLEX */\nXK_atilde =                      0x00e3, /* U+00E3 LATIN SMALL LETTER A WITH TILDE */\nXK_adiaeresis =                  0x00e4, /* U+00E4 LATIN SMALL LETTER A WITH DIAERESIS */\nXK_aring =                       0x00e5, /* U+00E5 LATIN SMALL LETTER A WITH RING ABOVE */\nXK_ae =                          0x00e6, /* U+00E6 LATIN SMALL LETTER AE */\nXK_ccedilla =                    0x00e7, /* U+00E7 LATIN SMALL LETTER C WITH CEDILLA */\nXK_egrave =                      0x00e8, /* U+00E8 LATIN SMALL LETTER E WITH GRAVE */\nXK_eacute =                      0x00e9, /* U+00E9 LATIN SMALL LETTER E WITH ACUTE */\nXK_ecircumflex =                 0x00ea, /* U+00EA LATIN SMALL LETTER E WITH CIRCUMFLEX */\nXK_ediaeresis =                  0x00eb, /* U+00EB LATIN SMALL LETTER E WITH DIAERESIS */\nXK_igrave =                      0x00ec, /* U+00EC LATIN SMALL LETTER I WITH GRAVE */\nXK_iacute =                      0x00ed, /* U+00ED LATIN SMALL LETTER I WITH ACUTE */\nXK_icircumflex =                 0x00ee, /* U+00EE LATIN SMALL LETTER I WITH CIRCUMFLEX */\nXK_idiaeresis =                  0x00ef, /* U+00EF LATIN SMALL LETTER I WITH DIAERESIS */\nXK_eth =                         0x00f0, /* U+00F0 LATIN SMALL LETTER ETH */\nXK_ntilde =                      0x00f1, /* U+00F1 LATIN SMALL LETTER N WITH TILDE */\nXK_ograve =                      0x00f2, /* U+00F2 LATIN SMALL LETTER O WITH GRAVE */\nXK_oacute =                      0x00f3, /* U+00F3 LATIN SMALL LETTER O WITH ACUTE */\nXK_ocircumflex =                 0x00f4, /* U+00F4 LATIN SMALL LETTER O WITH CIRCUMFLEX */\nXK_otilde =                      0x00f5, /* U+00F5 LATIN SMALL LETTER O WITH TILDE */\nXK_odiaeresis =                  0x00f6, /* U+00F6 LATIN SMALL LETTER O WITH DIAERESIS */\nXK_division =                    0x00f7, /* U+00F7 DIVISION SIGN */\nXK_oslash =                      0x00f8, /* U+00F8 LATIN SMALL LETTER O WITH STROKE */\nXK_ooblique =                    0x00f8, /* U+00F8 LATIN SMALL LETTER O WITH STROKE */\nXK_ugrave =                      0x00f9, /* U+00F9 LATIN SMALL LETTER U WITH GRAVE */\nXK_uacute =                      0x00fa, /* U+00FA LATIN SMALL LETTER U WITH ACUTE */\nXK_ucircumflex =                 0x00fb, /* U+00FB LATIN SMALL LETTER U WITH CIRCUMFLEX */\nXK_udiaeresis =                  0x00fc, /* U+00FC LATIN SMALL LETTER U WITH DIAERESIS */\nXK_yacute =                      0x00fd, /* U+00FD LATIN SMALL LETTER Y WITH ACUTE */\nXK_thorn =                       0x00fe, /* U+00FE LATIN SMALL LETTER THORN */\nXK_ydiaeresis =                  0x00ff; /* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS */\n;\ndefine(\"vnc-keysym\", [\"vnc-util\"], function(){});\n\n",
    "/* -------------------------------------------------------------------------- */\n/* Copyright 2002-2016, OpenNebula Project, OpenNebula Systems                */\n/*                                                                            */\n/* Licensed under the Apache License, Version 2.0 (the \"License\"); you may    */\n/* not use this file except in compliance with the License. You may obtain    */\n/* a copy of the License at                                                   */\n/*                                                                            */\n/* http://www.apache.org/licenses/LICENSE-2.0                                 */\n/*                                                                            */\n/* Unless required by applicable law or agreed to in writing, software        */\n/* distributed under the License is distributed on an \"AS IS\" BASIS,          */\n/* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   */\n/* See the License for the specific language governing permissions and        */\n/* limitations under the License.                                             */\n/* -------------------------------------------------------------------------- */\n\ndefine('console/vnc',['require','vnc-util','vnc-webutil','vnc-base64','vnc-websock','vnc-des','vnc-keysymdef','vnc-keyboard','vnc-input','vnc-display','vnc-jsunzip','vnc-rfb','vnc-keysym'],function(require) {\n  require('vnc-util');\n  require('vnc-webutil');\n  require('vnc-base64');\n  require('vnc-websock');\n  require('vnc-des');\n  require('vnc-keysymdef');\n  require('vnc-keyboard');\n  require('vnc-input');\n  require('vnc-display');\n  require('vnc-jsunzip');\n  require('vnc-rfb');\n  require('vnc-keysym');\n\n  var rfb;\n  var encrypt = WebUtil.getQueryVar('encrypt', (window.location.protocol === \"https:\"));\n  var repeaterID = WebUtil.getQueryVar('repeaterID', '');\n  var true_color = WebUtil.getQueryVar('true_color', true);\n  var local_cursor = WebUtil.getQueryVar('cursor', true);\n  var shared = WebUtil.getQueryVar('shared', true);\n  var view_only = WebUtil.getQueryVar('view_only', false);\n  var host = WebUtil.getQueryVar('host', window.location.hostname);\n  var port = WebUtil.getQueryVar('port', window.location.port);\n  var token = WebUtil.getQueryVar('token', null);\n  var password = WebUtil.getQueryVar('password', null);\n  var path = WebUtil.getQueryVar('path', 'websockify');\n\n  function passwordRequired(rfb) {\n    var msg;\n    msg = '<form id=\"setPasswordForm\"';\n    msg += '  style=\"margin-bottom: 0px\">';\n    msg += 'Password Required: ';\n    msg += '<input type=password size=10 id=\"password_input\" class=\"noVNC_status\">';\n    msg += '<\\/form>';\n    $D('noVNC_status_bar').setAttribute(\"class\", \"noVNC_status_warn\");\n    $D('noVNC_status').innerHTML = msg;\n    document.getElementById(\"setPasswordForm\").addEventListener(\"submit\", setPassword);\n  }\n  function setPassword(event) {\n    rfb.sendPassword($D('password_input').value);\n    event.preventDefault();\n    return false;\n  }\n  function sendCtrlAltDel() {\n    rfb.sendCtrlAltDel();\n    return false;\n  }\n  function xvpShutdown() {\n    rfb.xvpShutdown();\n    return false;\n  }\n  function xvpReboot() {\n    rfb.xvpReboot();\n    return false;\n  }\n  function xvpReset() {\n    rfb.xvpReset();\n    return false;\n  }\n  function updateState(rfb, state, oldstate, msg) {\n    var s, sb, cad, level;\n    s = $D('noVNC_status');\n    sb = $D('noVNC_status_bar');\n    cad = $D('sendCtrlAltDelButton');\n    switch (state) {\n      case 'failed':       level = \"error\";  break;\n      case 'fatal':        level = \"error\";  break;\n      case 'normal':       level = \"normal\"; break;\n      case 'disconnected': level = \"normal\"; break;\n      case 'loaded':       level = \"normal\"; break;\n      default:             level = \"warn\";   break;\n    }\n\n    if (state === \"normal\") {\n      cad.disabled = false;\n    } else {\n      cad.disabled = true;\n      xvpInit(0);\n    }\n\n    if (typeof(msg) !== 'undefined') {\n      sb.setAttribute(\"class\", \"noVNC_status_\" + level);\n      s.innerHTML = msg;\n    }\n  }\n\n  function xvpInit(ver) {\n    var xvpbuttons;\n    xvpbuttons = $D('noVNC_xvp_buttons');\n    if (ver >= 1) {\n      xvpbuttons.style.display = 'inline';\n    } else {\n      xvpbuttons.style.display = 'none';\n    }\n  }\n\n    var host, port, password, path, token;\n\n    $D('sendCtrlAltDelButton').style.display = \"inline\";\n    $D('sendCtrlAltDelButton').onclick = sendCtrlAltDel;\n    $D('xvpShutdownButton').onclick = xvpShutdown;\n    $D('xvpRebootButton').onclick = xvpReboot;\n    $D('xvpResetButton').onclick = xvpReset;\n\n    WebUtil.init_logging(WebUtil.getQueryVar('logging', 'warn'));\n    document.title = unescape(WebUtil.getQueryVar('title', 'noVNC'));\n    // By default, use the host and port of server that served this file\n\n    // if port == 80 (or 443) then it won't be present and should be\n    // set manually\n    if (!port) {\n      if (window.location.protocol.substring(0, 4) == 'http') {\n        port = 80;\n      } else if (window.location.protocol.substring(0, 5) == 'https') {\n        port = 443;\n      }\n    }\n\n    // If a token variable is passed in, set the parameter in a cookie.\n    // This is used by nova-novncproxy.\n    if (token) {\n      WebUtil.createCookie('token', token, 1)\n    }\n\n    if ((!host) || (!port)) {\n      updateState('failed',\n          \"Must specify host and port in URL\");\n      return;\n    }\n\n    rfb = new RFB({'target':       $D('noVNC_canvas'),\n                   'encrypt':      encrypt,\n                   'repeaterID':   repeaterID,\n                   'true_color':   true_color,\n                   'local_cursor': local_cursor,\n                   'shared':       shared,\n                   'view_only':    view_only,\n                   'onUpdateState':  updateState,\n                   'onXvpInit':    xvpInit,\n                   'onPasswordRequired':  passwordRequired});\n\n    if (password) {\n      rfb.connect(host, port, password, path + \"?token=\" + token);\n    } else {\n      rfb.connect(host, port, undefined, path + \"?token=\" + token);\n    }\n})\n;\n"
  ]
}